// vite.generated.ts
import path2 from "path";
import { existsSync as existsSync5, mkdirSync as mkdirSync2, readdirSync as readdirSync2, readFileSync as readFileSync4, writeFileSync as writeFileSync2 } from "fs";
import { createHash } from "crypto";
import * as net from "net";

// target/plugins/application-theme-plugin/theme-handle.js
import { existsSync as existsSync3, readFileSync as readFileSync2 } from "fs";
import { resolve as resolve3 } from "path";

// target/plugins/application-theme-plugin/theme-generator.js
import { globSync as globSync2 } from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/glob/dist/esm/index.js";
import { resolve as resolve2, basename as basename2 } from "path";
import { existsSync as existsSync2, readFileSync, writeFileSync } from "fs";

// target/plugins/application-theme-plugin/theme-copy.js
import { readdirSync, statSync, mkdirSync, existsSync, copyFileSync } from "fs";
import { resolve, basename, relative, extname } from "path";
import { globSync } from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/glob/dist/esm/index.js";
var ignoredFileExtensions = [".css", ".js", ".json"];
function copyThemeResources(themeFolder2, projectStaticAssetsOutputFolder, logger) {
  const staticAssetsThemeFolder = resolve(projectStaticAssetsOutputFolder, "themes", basename(themeFolder2));
  const collection = collectFolders(themeFolder2, logger);
  if (collection.files.length > 0) {
    mkdirSync(staticAssetsThemeFolder, { recursive: true });
    collection.directories.forEach((directory) => {
      const relativeDirectory = relative(themeFolder2, directory);
      const targetDirectory = resolve(staticAssetsThemeFolder, relativeDirectory);
      mkdirSync(targetDirectory, { recursive: true });
    });
    collection.files.forEach((file) => {
      const relativeFile = relative(themeFolder2, file);
      const targetFile = resolve(staticAssetsThemeFolder, relativeFile);
      copyFileIfAbsentOrNewer(file, targetFile, logger);
    });
  }
}
function collectFolders(folderToCopy, logger) {
  const collection = { directories: [], files: [] };
  logger.trace("files in directory", readdirSync(folderToCopy));
  readdirSync(folderToCopy).forEach((file) => {
    const fileToCopy = resolve(folderToCopy, file);
    try {
      if (statSync(fileToCopy).isDirectory()) {
        logger.debug("Going through directory", fileToCopy);
        const result = collectFolders(fileToCopy, logger);
        if (result.files.length > 0) {
          collection.directories.push(fileToCopy);
          logger.debug("Adding directory", fileToCopy);
          collection.directories.push.apply(collection.directories, result.directories);
          collection.files.push.apply(collection.files, result.files);
        }
      } else if (!ignoredFileExtensions.includes(extname(fileToCopy))) {
        logger.debug("Adding file", fileToCopy);
        collection.files.push(fileToCopy);
      }
    } catch (error) {
      handleNoSuchFileError(fileToCopy, error, logger);
    }
  });
  return collection;
}
function copyStaticAssets(themeName, themeProperties, projectStaticAssetsOutputFolder, logger) {
  const assets = themeProperties["assets"];
  if (!assets) {
    logger.debug("no assets to handle no static assets were copied");
    return;
  }
  mkdirSync(projectStaticAssetsOutputFolder, {
    recursive: true
  });
  const missingModules = checkModules(Object.keys(assets));
  if (missingModules.length > 0) {
    throw Error(
      "Missing npm modules '" + missingModules.join("', '") + "' for assets marked in 'theme.json'.\nInstall package(s) by adding a @NpmPackage annotation or install it using 'npm/pnpm/bun i'"
    );
  }
  Object.keys(assets).forEach((module) => {
    const copyRules = assets[module];
    Object.keys(copyRules).forEach((copyRule) => {
      const nodeSources = resolve("node_modules/", module, copyRule).replace(/\\/g, "/");
      const files = globSync(nodeSources, { nodir: true });
      const targetFolder = resolve(projectStaticAssetsOutputFolder, "themes", themeName, copyRules[copyRule]);
      mkdirSync(targetFolder, {
        recursive: true
      });
      files.forEach((file) => {
        const copyTarget = resolve(targetFolder, basename(file));
        copyFileIfAbsentOrNewer(file, copyTarget, logger);
      });
    });
  });
}
function checkModules(modules) {
  const missing = [];
  modules.forEach((module) => {
    if (!existsSync(resolve("node_modules/", module))) {
      missing.push(module);
    }
  });
  return missing;
}
function copyFileIfAbsentOrNewer(fileToCopy, copyTarget, logger) {
  try {
    if (!existsSync(copyTarget) || statSync(copyTarget).mtime < statSync(fileToCopy).mtime) {
      logger.trace("Copying: ", fileToCopy, "=>", copyTarget);
      copyFileSync(fileToCopy, copyTarget);
    }
  } catch (error) {
    handleNoSuchFileError(fileToCopy, error, logger);
  }
}
function handleNoSuchFileError(file, error, logger) {
  if (error.code === "ENOENT") {
    logger.warn("Ignoring not existing file " + file + ". File may have been deleted during theme processing.");
  } else {
    throw error;
  }
}

// target/plugins/application-theme-plugin/theme-generator.js
var themeComponentsFolder = "components";
var documentCssFilename = "document.css";
var stylesCssFilename = "styles.css";
var CSSIMPORT_COMMENT = "CSSImport end";
var headerImport = `import 'construct-style-sheets-polyfill';
`;
function writeThemeFiles(themeFolder2, themeName, themeProperties, options) {
  const productionMode = !options.devMode;
  const useDevServerOrInProductionMode = !options.useDevBundle;
  const outputFolder = options.frontendGeneratedFolder;
  const styles = resolve2(themeFolder2, stylesCssFilename);
  const documentCssFile = resolve2(themeFolder2, documentCssFilename);
  const autoInjectComponents = themeProperties.autoInjectComponents ?? true;
  const autoInjectGlobalCssImports = themeProperties.autoInjectGlobalCssImports ?? false;
  const globalFilename = "theme-" + themeName + ".global.generated.js";
  const componentsFilename = "theme-" + themeName + ".components.generated.js";
  const themeFilename = "theme-" + themeName + ".generated.js";
  let themeFileContent = headerImport;
  let globalImportContent = "// When this file is imported, global styles are automatically applied\n";
  let componentsFileContent = "";
  var componentsFiles;
  if (autoInjectComponents) {
    componentsFiles = globSync2("*.css", {
      cwd: resolve2(themeFolder2, themeComponentsFolder),
      nodir: true
    });
    if (componentsFiles.length > 0) {
      componentsFileContent += "import { unsafeCSS, registerStyles } from '@vaadin/vaadin-themable-mixin/register-styles';\n";
    }
  }
  if (themeProperties.parent) {
    themeFileContent += `import { applyTheme as applyBaseTheme } from './theme-${themeProperties.parent}.generated.js';
`;
  }
  themeFileContent += `import { injectGlobalCss } from 'Frontend/generated/jar-resources/theme-util.js';
`;
  themeFileContent += `import { webcomponentGlobalCssInjector } from 'Frontend/generated/jar-resources/theme-util.js';
`;
  themeFileContent += `import './${componentsFilename}';
`;
  themeFileContent += `let needsReloadOnChanges = false;
`;
  const imports = [];
  const componentCssImports = [];
  const globalFileContent = [];
  const globalCssCode = [];
  const shadowOnlyCss = [];
  const componentCssCode = [];
  const parentTheme = themeProperties.parent ? "applyBaseTheme(target);\n" : "";
  const parentThemeGlobalImport = themeProperties.parent ? `import './theme-${themeProperties.parent}.global.generated.js';
` : "";
  const themeIdentifier = "_vaadintheme_" + themeName + "_";
  const lumoCssFlag = "_vaadinthemelumoimports_";
  const globalCssFlag = themeIdentifier + "globalCss";
  const componentCssFlag = themeIdentifier + "componentCss";
  if (!existsSync2(styles)) {
    if (productionMode) {
      throw new Error(`styles.css file is missing and is needed for '${themeName}' in folder '${themeFolder2}'`);
    }
    writeFileSync(
      styles,
      "/* Import your application global css files here or add the styles directly to this file */",
      "utf8"
    );
  }
  let filename = basename2(styles);
  let variable = camelCase(filename);
  const lumoImports = themeProperties.lumoImports || ["typography", "color", "spacing", "badge", "utility"];
  if (lumoImports) {
    lumoImports.forEach((lumoImport) => {
      imports.push(`import { ${lumoImport} } from '@vaadin/vaadin-lumo-styles/${lumoImport}.js';
`);
      if (lumoImport === "utility" || lumoImport === "badge" || lumoImport === "typography" || lumoImport === "color") {
        globalFileContent.push(`import '@vaadin/vaadin-lumo-styles/${lumoImport}-global.js';
`);
      }
    });
    lumoImports.forEach((lumoImport) => {
      shadowOnlyCss.push(`removers.push(injectGlobalCss(${lumoImport}.cssText, '', target, true));
`);
    });
  }
  globalFileContent.push(parentThemeGlobalImport);
  if (useDevServerOrInProductionMode) {
    globalFileContent.push(`import 'themes/${themeName}/${filename}';
`);
    imports.push(`import ${variable} from 'themes/${themeName}/${filename}?inline';
`);
    shadowOnlyCss.push(`removers.push(injectGlobalCss(${variable}.toString(), '', target));
    `);
  }
  if (existsSync2(documentCssFile)) {
    filename = basename2(documentCssFile);
    variable = camelCase(filename);
    if (useDevServerOrInProductionMode) {
      globalFileContent.push(`import 'themes/${themeName}/${filename}';
`);
      imports.push(`import ${variable} from 'themes/${themeName}/${filename}?inline';
`);
      shadowOnlyCss.push(`removers.push(injectGlobalCss(${variable}.toString(),'', document));
    `);
    }
  }
  let i = 0;
  if (themeProperties.documentCss) {
    const missingModules = checkModules(themeProperties.documentCss);
    if (missingModules.length > 0) {
      throw Error(
        "Missing npm modules or files '" + missingModules.join("', '") + "' for documentCss marked in 'theme.json'.\nInstall or update package(s) by adding a @NpmPackage annotation or install it using 'npm/pnpm/bun i'"
      );
    }
    themeProperties.documentCss.forEach((cssImport) => {
      const variable2 = "module" + i++;
      imports.push(`import ${variable2} from '${cssImport}?inline';
`);
      globalCssCode.push(`if(target !== document) {
        removers.push(injectGlobalCss(${variable2}.toString(), '', target));
    }
    `);
      globalCssCode.push(
        `removers.push(injectGlobalCss(${variable2}.toString(), '${CSSIMPORT_COMMENT}', document));
    `
      );
    });
  }
  if (themeProperties.importCss) {
    const missingModules = checkModules(themeProperties.importCss);
    if (missingModules.length > 0) {
      throw Error(
        "Missing npm modules or files '" + missingModules.join("', '") + "' for importCss marked in 'theme.json'.\nInstall or update package(s) by adding a @NpmPackage annotation or install it using 'npm/pnpm/bun i'"
      );
    }
    themeProperties.importCss.forEach((cssPath) => {
      const variable2 = "module" + i++;
      globalFileContent.push(`import '${cssPath}';
`);
      imports.push(`import ${variable2} from '${cssPath}?inline';
`);
      shadowOnlyCss.push(`removers.push(injectGlobalCss(${variable2}.toString(), '${CSSIMPORT_COMMENT}', target));
`);
    });
  }
  if (autoInjectComponents) {
    componentsFiles.forEach((componentCss) => {
      const filename2 = basename2(componentCss);
      const tag = filename2.replace(".css", "");
      const variable2 = camelCase(filename2);
      componentCssImports.push(
        `import ${variable2} from 'themes/${themeName}/${themeComponentsFolder}/${filename2}?inline';
`
      );
      const componentString = `registerStyles(
        '${tag}',
        unsafeCSS(${variable2}.toString())
      );
      `;
      componentCssCode.push(componentString);
    });
  }
  themeFileContent += imports.join("");
  const themeFileApply = `
  let themeRemovers = new WeakMap();
  let targets = [];

  export const applyTheme = (target) => {
    const removers = [];
    if (target !== document) {
      ${shadowOnlyCss.join("")}
      ${autoInjectGlobalCssImports ? `
        webcomponentGlobalCssInjector((css) => {
          removers.push(injectGlobalCss(css, '', target));
        });
        ` : ""}
    }
    ${parentTheme}
    ${globalCssCode.join("")}

    if (import.meta.hot) {
      targets.push(new WeakRef(target));
      themeRemovers.set(target, removers);
    }

  }

`;
  componentsFileContent += `
${componentCssImports.join("")}

if (!document['${componentCssFlag}']) {
  ${componentCssCode.join("")}
  document['${componentCssFlag}'] = true;
}

if (import.meta.hot) {
  import.meta.hot.accept((module) => {
    window.location.reload();
  });
}

`;
  themeFileContent += themeFileApply;
  themeFileContent += `
if (import.meta.hot) {
  import.meta.hot.accept((module) => {

    if (needsReloadOnChanges) {
      window.location.reload();
    } else {
      targets.forEach(targetRef => {
        const target = targetRef.deref();
        if (target) {
          themeRemovers.get(target).forEach(remover => remover())
          module.applyTheme(target);
        }
      })
    }
  });

  import.meta.hot.on('vite:afterUpdate', (update) => {
    document.dispatchEvent(new CustomEvent('vaadin-theme-updated', { detail: update }));
  });
}

`;
  globalImportContent += `
${globalFileContent.join("")}
`;
  writeIfChanged(resolve2(outputFolder, globalFilename), globalImportContent);
  writeIfChanged(resolve2(outputFolder, themeFilename), themeFileContent);
  writeIfChanged(resolve2(outputFolder, componentsFilename), componentsFileContent);
}
function writeIfChanged(file, data) {
  if (!existsSync2(file) || readFileSync(file, { encoding: "utf-8" }) !== data) {
    writeFileSync(file, data);
  }
}
function camelCase(str) {
  return str.replace(/(?:^\w|[A-Z]|\b\w)/g, function(word, index) {
    return index === 0 ? word.toLowerCase() : word.toUpperCase();
  }).replace(/\s+/g, "").replace(/\.|\-/g, "");
}

// target/plugins/application-theme-plugin/theme-handle.js
var nameRegex = /theme-(.*)\.generated\.js/;
var prevThemeName = void 0;
var firstThemeName = void 0;
function processThemeResources(options, logger) {
  const themeName = extractThemeName(options.frontendGeneratedFolder);
  if (themeName) {
    if (!prevThemeName && !firstThemeName) {
      firstThemeName = themeName;
    } else if (prevThemeName && prevThemeName !== themeName && firstThemeName !== themeName || !prevThemeName && firstThemeName !== themeName) {
      const warning = `Attention: Active theme is switched to '${themeName}'.`;
      const description = `
      Note that adding new style sheet files to '/themes/${themeName}/components', 
      may not be taken into effect until the next application restart.
      Changes to already existing style sheet files are being reloaded as before.`;
      logger.warn("*******************************************************************");
      logger.warn(warning);
      logger.warn(description);
      logger.warn("*******************************************************************");
    }
    prevThemeName = themeName;
    findThemeFolderAndHandleTheme(themeName, options, logger);
  } else {
    prevThemeName = void 0;
    logger.debug("Skipping Vaadin application theme handling.");
    logger.trace("Most likely no @Theme annotation for application or only themeClass used.");
  }
}
function findThemeFolderAndHandleTheme(themeName, options, logger) {
  let themeFound = false;
  for (let i = 0; i < options.themeProjectFolders.length; i++) {
    const themeProjectFolder = options.themeProjectFolders[i];
    if (existsSync3(themeProjectFolder)) {
      logger.debug("Searching themes folder '" + themeProjectFolder + "' for theme '" + themeName + "'");
      const handled = handleThemes(themeName, themeProjectFolder, options, logger);
      if (handled) {
        if (themeFound) {
          throw new Error(
            "Found theme files in '" + themeProjectFolder + "' and '" + themeFound + "'. Theme should only be available in one folder"
          );
        }
        logger.debug("Found theme files from '" + themeProjectFolder + "'");
        themeFound = themeProjectFolder;
      }
    }
  }
  if (existsSync3(options.themeResourceFolder)) {
    if (themeFound && existsSync3(resolve3(options.themeResourceFolder, themeName))) {
      throw new Error(
        "Theme '" + themeName + `'should not exist inside a jar and in the project at the same time
Extending another theme is possible by adding { "parent": "my-parent-theme" } entry to the theme.json file inside your theme folder.`
      );
    }
    logger.debug(
      "Searching theme jar resource folder '" + options.themeResourceFolder + "' for theme '" + themeName + "'"
    );
    handleThemes(themeName, options.themeResourceFolder, options, logger);
    themeFound = true;
  }
  return themeFound;
}
function handleThemes(themeName, themesFolder, options, logger) {
  const themeFolder2 = resolve3(themesFolder, themeName);
  if (existsSync3(themeFolder2)) {
    logger.debug("Found theme ", themeName, " in folder ", themeFolder2);
    const themeProperties = getThemeProperties(themeFolder2);
    if (themeProperties.parent) {
      const found = findThemeFolderAndHandleTheme(themeProperties.parent, options, logger);
      if (!found) {
        throw new Error(
          "Could not locate files for defined parent theme '" + themeProperties.parent + "'.\nPlease verify that dependency is added or theme folder exists."
        );
      }
    }
    copyStaticAssets(themeName, themeProperties, options.projectStaticAssetsOutputFolder, logger);
    copyThemeResources(themeFolder2, options.projectStaticAssetsOutputFolder, logger);
    writeThemeFiles(themeFolder2, themeName, themeProperties, options);
    return true;
  }
  return false;
}
function getThemeProperties(themeFolder2) {
  const themePropertyFile = resolve3(themeFolder2, "theme.json");
  if (!existsSync3(themePropertyFile)) {
    return {};
  }
  const themePropertyFileAsString = readFileSync2(themePropertyFile);
  if (themePropertyFileAsString.length === 0) {
    return {};
  }
  return JSON.parse(themePropertyFileAsString);
}
function extractThemeName(frontendGeneratedFolder) {
  if (!frontendGeneratedFolder) {
    throw new Error(
      "Couldn't extract theme name from 'theme.js', because the path to folder containing this file is empty. Please set the a correct folder path in ApplicationThemePlugin constructor parameters."
    );
  }
  const generatedThemeFile = resolve3(frontendGeneratedFolder, "theme.js");
  if (existsSync3(generatedThemeFile)) {
    const themeName = nameRegex.exec(readFileSync2(generatedThemeFile, { encoding: "utf8" }))[1];
    if (!themeName) {
      throw new Error("Couldn't parse theme name from '" + generatedThemeFile + "'.");
    }
    return themeName;
  } else {
    return "";
  }
}

// target/plugins/theme-loader/theme-loader-utils.js
import { existsSync as existsSync4, readFileSync as readFileSync3 } from "fs";
import { resolve as resolve4, basename as basename3 } from "path";
import { globSync as globSync3 } from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/glob/dist/esm/index.js";
var urlMatcher = /(url\(\s*)(\'|\")?(\.\/|\.\.\/)((?:\3)*)?(\S*)(\2\s*\))/g;
function assetsContains(fileUrl, themeFolder2, logger) {
  const themeProperties = getThemeProperties2(themeFolder2);
  if (!themeProperties) {
    logger.debug("No theme properties found.");
    return false;
  }
  const assets = themeProperties["assets"];
  if (!assets) {
    logger.debug("No defined assets in theme properties");
    return false;
  }
  for (let module of Object.keys(assets)) {
    const copyRules = assets[module];
    for (let copyRule of Object.keys(copyRules)) {
      if (fileUrl.startsWith(copyRules[copyRule])) {
        const targetFile = fileUrl.replace(copyRules[copyRule], "");
        const files = globSync3(resolve4("node_modules/", module, copyRule), { nodir: true });
        for (let file of files) {
          if (file.endsWith(targetFile)) return true;
        }
      }
    }
  }
  return false;
}
function getThemeProperties2(themeFolder2) {
  const themePropertyFile = resolve4(themeFolder2, "theme.json");
  if (!existsSync4(themePropertyFile)) {
    return {};
  }
  const themePropertyFileAsString = readFileSync3(themePropertyFile);
  if (themePropertyFileAsString.length === 0) {
    return {};
  }
  return JSON.parse(themePropertyFileAsString);
}
function rewriteCssUrls(source, handledResourceFolder, themeFolder2, logger, options) {
  source = source.replace(urlMatcher, function(match, url, quoteMark, replace, additionalDotSegments, fileUrl, endString) {
    let absolutePath = resolve4(handledResourceFolder, replace, additionalDotSegments || "", fileUrl);
    let existingThemeResource = absolutePath.startsWith(themeFolder2) && existsSync4(absolutePath);
    if (!existingThemeResource && additionalDotSegments) {
      absolutePath = resolve4(handledResourceFolder, replace, fileUrl);
      existingThemeResource = absolutePath.startsWith(themeFolder2) && existsSync4(absolutePath);
    }
    const isAsset = assetsContains(fileUrl, themeFolder2, logger);
    if (existingThemeResource || isAsset) {
      const replacement = options.devMode ? "./" : "../static/";
      const skipLoader = existingThemeResource ? "" : replacement;
      const frontendThemeFolder = skipLoader + "themes/" + basename3(themeFolder2);
      logger.log(
        "Updating url for file",
        "'" + replace + fileUrl + "'",
        "to use",
        "'" + frontendThemeFolder + "/" + fileUrl + "'"
      );
      const pathResolved = isAsset ? "/" + fileUrl : absolutePath.substring(themeFolder2.length).replace(/\\/g, "/");
      return url + (quoteMark ?? "") + frontendThemeFolder + pathResolved + endString;
    } else if (options.devMode) {
      logger.log("No rewrite for '", match, "' as the file was not found.");
    } else {
      return url + (quoteMark ?? "") + "../../" + fileUrl + endString;
    }
    return match;
  });
  return source;
}

// target/plugins/react-function-location-plugin/react-function-location-plugin.js
import * as t from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/@babel/types/lib/index.js";
function addFunctionComponentSourceLocationBabel() {
  function isReactFunctionName(name) {
    return name && name.match(/^[A-Z].*/);
  }
  function addDebugInfo(path3, name, filename, loc) {
    const lineNumber = loc.start.line;
    const columnNumber = loc.start.column + 1;
    const debugSourceMember = t.memberExpression(t.identifier(name), t.identifier("__debugSourceDefine"));
    const debugSourceDefine = t.objectExpression([
      t.objectProperty(t.identifier("fileName"), t.stringLiteral(filename)),
      t.objectProperty(t.identifier("lineNumber"), t.numericLiteral(lineNumber)),
      t.objectProperty(t.identifier("columnNumber"), t.numericLiteral(columnNumber))
    ]);
    const assignment = t.expressionStatement(t.assignmentExpression("=", debugSourceMember, debugSourceDefine));
    const condition = t.binaryExpression(
      "===",
      t.unaryExpression("typeof", t.identifier(name)),
      t.stringLiteral("function")
    );
    const ifFunction = t.ifStatement(condition, t.blockStatement([assignment]));
    path3.insertAfter(ifFunction);
  }
  return {
    visitor: {
      VariableDeclaration(path3, state) {
        path3.node.declarations.forEach((declaration) => {
          if (declaration.id.type !== "Identifier") {
            return;
          }
          const name = declaration?.id?.name;
          if (!isReactFunctionName(name)) {
            return;
          }
          const filename = state.file.opts.filename;
          if (declaration?.init?.body?.loc) {
            addDebugInfo(path3, name, filename, declaration.init.body.loc);
          }
        });
      },
      FunctionDeclaration(path3, state) {
        const node = path3.node;
        const name = node?.id?.name;
        if (!isReactFunctionName(name)) {
          return;
        }
        const filename = state.file.opts.filename;
        if (node.body.loc) {
          addDebugInfo(path3, name, filename, node.body.loc);
        }
      }
    }
  };
}

// target/vaadin-dev-server-settings.json
var vaadin_dev_server_settings_default = {
  frontendFolder: "/home/workspace/DSquare HOME/home_Vaadin/./frontend",
  themeFolder: "themes",
  themeResourceFolder: "/home/workspace/DSquare HOME/home_Vaadin/./frontend/generated/jar-resources",
  staticOutput: "/home/workspace/DSquare HOME/home_Vaadin/target/classes/META-INF/VAADIN/webapp/VAADIN/static",
  generatedFolder: "generated",
  statsOutput: "/home/workspace/DSquare HOME/home_Vaadin/target/classes/META-INF/VAADIN/config",
  frontendBundleOutput: "/home/workspace/DSquare HOME/home_Vaadin/target/classes/META-INF/VAADIN/webapp",
  devBundleOutput: "/home/workspace/DSquare HOME/home_Vaadin/target/dev-bundle/webapp",
  devBundleStatsOutput: "/home/workspace/DSquare HOME/home_Vaadin/target/dev-bundle/config",
  i18nOutput: "target/classes/vaadin-i18n",
  jarResourcesFolder: "/home/workspace/DSquare HOME/home_Vaadin/./frontend/generated/jar-resources",
  themeName: "dark",
  clientServiceWorkerSource: "/home/workspace/DSquare HOME/home_Vaadin/target/sw.ts",
  pwaEnabled: true,
  offlineEnabled: true,
  offlinePath: "'.'"
};

// vite.generated.ts
import {
  defineConfig,
  mergeConfig
} from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/vite/dist/node/index.js";
import brotli2 from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/rollup-plugin-brotli/lib/index.cjs.js";
import checker from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/vite-plugin-checker/dist/main.js";

// target/plugins/rollup-plugin-postcss-lit-custom/rollup-plugin-postcss-lit.js
import { createFilter } from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/@rollup/pluginutils/dist/es/index.js";
import transformAst from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/transform-ast/index.js";
var assetUrlRE = /__VITE_ASSET__([\w$]+)__(?:\$_(.*?)__)?/g;
var escape = (str) => str.replace(assetUrlRE, '${unsafeCSSTag("__VITE_ASSET__$1__$2")}').replace(/`/g, "\\`").replace(/\\(?!`)/g, "\\\\");
function postcssLit(options = {}) {
  const defaultOptions = {
    include: "**/*.{css,sss,pcss,styl,stylus,sass,scss,less}",
    exclude: null,
    importPackage: "lit"
  };
  const opts = { ...defaultOptions, ...options };
  const filter = createFilter(opts.include, opts.exclude);
  return {
    name: "postcss-lit",
    enforce: "post",
    transform(code, id) {
      if (!filter(id)) return;
      const ast = this.parse(code, {});
      let defaultExportName;
      let isDeclarationLiteral = false;
      const magicString = transformAst(code, { ast }, (node) => {
        if (node.type === "ExportDefaultDeclaration") {
          defaultExportName = node.declaration.name;
          isDeclarationLiteral = node.declaration.type === "Literal";
        }
      });
      if (!defaultExportName && !isDeclarationLiteral) {
        return;
      }
      magicString.walk((node) => {
        if (defaultExportName && node.type === "VariableDeclaration") {
          const exportedVar = node.declarations.find((d) => d.id.name === defaultExportName);
          if (exportedVar) {
            exportedVar.init.edit.update(`cssTag\`${escape(exportedVar.init.value)}\``);
          }
        }
        if (isDeclarationLiteral && node.type === "ExportDefaultDeclaration") {
          node.declaration.edit.update(`cssTag\`${escape(node.declaration.value)}\``);
        }
      });
      magicString.prepend(`import {css as cssTag, unsafeCSS as unsafeCSSTag} from '${opts.importPackage}';
`);
      return {
        code: magicString.toString(),
        map: magicString.generateMap({
          hires: true
        })
      };
    }
  };
}

// target/plugins/rollup-plugin-vaadin-i18n/rollup-plugin-vaadin-i18n.js
import { createFilter as createFilter2 } from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/@rollup/pluginutils/dist/es/index.js";
import transformAst2 from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/transform-ast/index.js";
import MagicString from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/magic-string/dist/magic-string.es.mjs";
import process2 from "node:process";
import * as path from "node:path";
import * as fsPromises from "node:fs/promises";
var chunkNameMarker = "__VAADIN_I18n_chunkName__";
var registerChunkImport = `import { i18n } from '@vaadin/hilla-react-i18n';
`;
var registerChunkCall = `await i18n.registerChunk('${chunkNameMarker}');
`;
function vaadinI18n(options = {}) {
  const defaultOptions = {
    include: "**/*.{js,jsx,ts,tsx}",
    exclude: null,
    cwd: process2.cwd(),
    meta: {
      output: {
        dir: "",
        filename: "i18n.json"
      }
    }
  };
  const filter = createFilter2(options?.include ?? defaultOptions.include, options?.exclude ?? defaultOptions.exclude);
  const cwd = options?.cwd ?? defaultOptions.cwd;
  const metaOutputDir = path.resolve(cwd, options?.meta?.output?.dir ?? defaultOptions.meta.output.dir);
  const metaOutputFilename = path.resolve(metaOutputDir, options?.meta?.output?.filename ?? defaultOptions.meta.output.filename);
  const chunkKeySets = /* @__PURE__ */ new Map();
  const mainChunkKeySet = /* @__PURE__ */ new Set();
  return {
    name: "vaadin-i18n",
    async transform(code, id) {
      if (!filter(id)) {
        return;
      }
      const keyTagBindings = /* @__PURE__ */ new Set();
      const translateBindings = /* @__PURE__ */ new Set();
      const ast = this.parse(code, {});
      const moduleKeySet = /* @__PURE__ */ new Set();
      let hasI18nImport = false;
      const magicString = transformAst2(code, { ast }, (node) => {
        if (node.type === "ImportDeclaration" && node.source?.value === "@vaadin/hilla-react-i18n") {
          for (const spec of node?.specifiers) {
            if (spec.imported?.name === "key") {
              keyTagBindings.add(spec.local?.name);
            }
            if (spec.imported?.name === "translate") {
              translateBindings.add(spec.local?.name);
            }
            if (spec.type === "ImportSpecifier" && spec.imported?.name === "i18n") {
              hasI18nImport = true;
            }
          }
        }
        if (node.type === "TaggedTemplateExpression" && node.tag.type === "Identifier" && keyTagBindings.has(node.tag.name) && node.quasi && node.quasi.type === "TemplateLiteral" && node.quasi.quasis.length === 1 && typeof node.quasi.quasis[0].value.raw === "string") {
          if (node.parent && node.parent.type === "CallExpression" && node.parent.callee.type === "Identifier" && translateBindings.has(node.parent.callee.name)) {
            moduleKeySet.add(node.quasi.quasis[0].value.raw);
          } else {
            mainChunkKeySet.add(node.quasi.quasis[0].value.raw);
          }
        }
      });
      if (moduleKeySet.size === 0) {
        return { code, map: null };
      }
      if (!hasI18nImport) {
        magicString.prepend(registerChunkImport);
      }
      magicString.prepend(registerChunkCall);
      return {
        code: magicString.toString(),
        map: magicString.generateMap({ hires: true }),
        meta: {
          vaadinI18n: {
            keys: Array.from(moduleKeySet)
          }
        }
      };
    },
    renderStart() {
      chunkKeySets.clear();
    },
    async generateBundle(_options, bundle) {
      for (const [fileName, chunk] of Object.entries(bundle)) {
        if (chunk.type === "chunk") {
          const magicString = new MagicString(chunk.code);
          let idx = 0;
          let firstIdx = -1;
          let searchIdx = 0;
          while ((idx = magicString.toString().indexOf(registerChunkCall, searchIdx)) !== -1) {
            if (firstIdx === -1) {
              firstIdx = idx;
              searchIdx = idx + registerChunkCall.length;
            } else {
              magicString.remove(idx, idx + registerChunkCall.length);
              searchIdx = idx;
            }
          }
          magicString.replace(chunkNameMarker, fileName);
          chunk.code = magicString.toString();
          chunk.map = magicString.generateMap({ hires: true });
          const chunkKeySet = /* @__PURE__ */ new Set();
          for (const id of chunk.moduleIds) {
            if (!filter(id)) {
              continue;
            }
            const info = this.getModuleInfo(id);
            (info?.meta?.vaadinI18n?.keys ?? []).forEach((key) => chunkKeySet.add(key));
          }
          chunkKeySets.set(fileName, chunkKeySet);
        }
      }
      const chunks = {};
      for (const [name, chunkKeySet] of chunkKeySets.entries()) {
        if (name.includes("indexhtml")) {
          for (const key of mainChunkKeySet) {
            chunkKeySet.add(key);
          }
          mainChunkKeySet.clear();
        }
        const keys = Array.from(chunkKeySet);
        if (keys.length > 0) {
          chunks[name] = { keys };
        }
      }
      await fsPromises.mkdir(metaOutputDir, { recursive: true });
      await fsPromises.writeFile(path.resolve(metaOutputDir, metaOutputFilename), JSON.stringify({ chunks }, void 0, 2), { encoding: "utf-8" });
    }
  };
}

// target/plugins/vite-plugin-service-worker/index.ts
import { resolve as resolve6, relative as relative2 } from "node:path";
import { build } from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/vite/dist/node/index.js";
import { getManifest } from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/workbox-build/build/index.js";
import brotli from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/rollup-plugin-brotli/lib/index.cjs.js";
var APP_SHELL_URL = ".";
function injectManifestToSWPlugin({ outDir }) {
  const rewriteManifestIndexHtmlUrl = (manifest) => {
    const indexEntry = manifest.find((entry) => entry.url === "index.html");
    if (indexEntry) {
      indexEntry.url = APP_SHELL_URL;
    }
    return { manifest, warnings: [] };
  };
  return {
    name: "vaadin:inject-manifest-to-sw",
    async transform(code, id) {
      if (/sw\.(ts|js)$/.test(id)) {
        const { manifestEntries } = await getManifest({
          globDirectory: outDir,
          globPatterns: ["**/*"],
          globIgnores: ["**/*.br", "pwa-icons/**"],
          manifestTransforms: [rewriteManifestIndexHtmlUrl],
          maximumFileSizeToCacheInBytes: 100 * 1024 * 1024
          // 100mb,
        });
        return code.replace("self.__WB_MANIFEST", JSON.stringify(manifestEntries));
      }
      return;
    }
  };
}
function serviceWorkerPlugin({ srcPath }) {
  let buildConfig;
  let buildOutput;
  let swSourcePath = resolve6(srcPath);
  return {
    name: "vaadin:build-sw",
    enforce: "post",
    async configResolved(viteConfig) {
      buildConfig = {
        base: viteConfig.base,
        root: viteConfig.root,
        mode: viteConfig.mode,
        resolve: viteConfig.resolve,
        define: {
          ...viteConfig.define,
          "process.env.NODE_ENV": JSON.stringify(viteConfig.mode),
          "globalThis.document": void 0
        },
        build: {
          write: viteConfig.mode !== "development",
          minify: viteConfig.build.minify,
          outDir: viteConfig.build.outDir,
          target: viteConfig.build.target,
          sourcemap: viteConfig.command === "serve" || viteConfig.build.sourcemap,
          emptyOutDir: false,
          modulePreload: false,
          rollupOptions: {
            input: {
              sw: swSourcePath
            },
            output: {
              format: "iife",
              exports: "none",
              entryFileNames: "sw.js",
              inlineDynamicImports: true
            }
          }
        }
      };
    },
    async buildStart() {
      if (buildConfig.mode === "development") {
        buildOutput = await build(buildConfig);
      }
    },
    resolveId(id) {
      if (id === "/sw.js") {
        return swSourcePath;
      }
      return;
    },
    async load(id) {
      if (relative2(id, swSourcePath).length === 0) {
        return buildOutput.output[0].code;
      }
      return;
    },
    async closeBundle() {
      if (buildConfig.mode !== "development") {
        await build({
          ...buildConfig,
          plugins: [injectManifestToSWPlugin({ outDir: buildConfig.build.outDir }), brotli()]
        });
      }
    },
    async hotUpdate({ file }) {
      if (this.environment.name !== "client") {
        return;
      }
      const needsSwRebuild = !buildOutput || buildOutput.output[0].moduleIds.includes(file);
      if (!needsSwRebuild) {
        return;
      }
      try {
        buildOutput = await build(buildConfig);
        const mg = this.environment.moduleGraph;
        if (!mg) {
          return;
        }
        for (const module of mg.getModulesByFile(swSourcePath) ?? []) {
          mg.invalidateModule(module);
        }
        this.environment.hot.send({ type: "custom", event: "sw-js-update" });
      } catch (error) {
        if (error instanceof Error) {
          this.environment.logger.error(error.message, { error });
        }
      }
    }
  };
}

// vite.generated.ts
import { createRequire } from "module";
import { visualizer } from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/rollup-plugin-visualizer/dist/plugin/index.js";
import reactPlugin from "file:///home/workspace/DSquare%20HOME/home_Vaadin/node_modules/@vitejs/plugin-react/dist/index.mjs";
var __vite_injected_original_dirname = "/home/workspace/DSquare HOME/home_Vaadin";
var __vite_injected_original_import_meta_url = "file:///home/workspace/DSquare%20HOME/home_Vaadin/vite.generated.ts";
var require2 = createRequire(__vite_injected_original_import_meta_url);
var frontendFolder = path2.resolve(__vite_injected_original_dirname, vaadin_dev_server_settings_default.frontendFolder);
var themeFolder = path2.resolve(frontendFolder, vaadin_dev_server_settings_default.themeFolder);
var frontendBundleFolder = path2.resolve(__vite_injected_original_dirname, vaadin_dev_server_settings_default.frontendBundleOutput);
var devBundleFolder = path2.resolve(__vite_injected_original_dirname, vaadin_dev_server_settings_default.devBundleOutput);
var devBundle = !!process.env.devBundle;
var jarResourcesFolder = path2.resolve(__vite_injected_original_dirname, vaadin_dev_server_settings_default.jarResourcesFolder);
var themeResourceFolder = path2.resolve(__vite_injected_original_dirname, vaadin_dev_server_settings_default.themeResourceFolder);
var projectPackageJsonFile = path2.resolve(__vite_injected_original_dirname, "package.json");
var buildOutputFolder = devBundle ? devBundleFolder : frontendBundleFolder;
var statsFolder = path2.resolve(__vite_injected_original_dirname, devBundle ? vaadin_dev_server_settings_default.devBundleStatsOutput : vaadin_dev_server_settings_default.statsOutput);
var statsFile = path2.resolve(statsFolder, "stats.json");
var bundleSizeFile = path2.resolve(statsFolder, "bundle-size.html");
var i18nFolder = path2.resolve(__vite_injected_original_dirname, vaadin_dev_server_settings_default.i18nOutput);
var nodeModulesFolder = path2.resolve(__vite_injected_original_dirname, "node_modules");
var webComponentTags = "";
var projectIndexHtml = path2.resolve(frontendFolder, "index.html");
var projectStaticAssetsFolders = [
  path2.resolve(__vite_injected_original_dirname, "src", "main", "resources", "META-INF", "resources"),
  path2.resolve(__vite_injected_original_dirname, "src", "main", "resources", "static"),
  frontendFolder
];
var themeProjectFolders = projectStaticAssetsFolders.map((folder) => path2.resolve(folder, vaadin_dev_server_settings_default.themeFolder));
var themeOptions = {
  devMode: false,
  useDevBundle: devBundle,
  // The following matches folder 'frontend/generated/themes/'
  // (not 'frontend/themes') for theme in JAR that is copied there
  themeResourceFolder: path2.resolve(themeResourceFolder, vaadin_dev_server_settings_default.themeFolder),
  themeProjectFolders,
  projectStaticAssetsOutputFolder: devBundle ? path2.resolve(devBundleFolder, "../assets") : path2.resolve(__vite_injected_original_dirname, vaadin_dev_server_settings_default.staticOutput),
  frontendGeneratedFolder: path2.resolve(frontendFolder, vaadin_dev_server_settings_default.generatedFolder)
};
var hasExportedWebComponents = existsSync5(path2.resolve(frontendFolder, "web-component.html"));
var commercialBannerComponent = path2.resolve(frontendFolder, vaadin_dev_server_settings_default.generatedFolder, "commercial-banner.js");
var hasCommercialBanner = existsSync5(commercialBannerComponent);
var target = ["safari15", "es2022"];
console.trace = () => {
};
console.debug = () => {
};
function statsExtracterPlugin() {
  function collectThemeJsonsInFrontend(themeJsonContents, themeName) {
    const themeJson = path2.resolve(frontendFolder, vaadin_dev_server_settings_default.themeFolder, themeName, "theme.json");
    if (existsSync5(themeJson)) {
      const themeJsonContent = readFileSync4(themeJson, { encoding: "utf-8" }).replace(/\r\n/g, "\n");
      themeJsonContents[themeName] = themeJsonContent;
      const themeJsonObject = JSON.parse(themeJsonContent);
      if (themeJsonObject.parent) {
        collectThemeJsonsInFrontend(themeJsonContents, themeJsonObject.parent);
      }
    }
  }
  return {
    name: "vaadin:stats",
    enforce: "post",
    async writeBundle(options, bundle) {
      const modules = Object.values(bundle).flatMap((b) => b.modules ? Object.keys(b.modules) : []);
      const nodeModulesFolders = modules.map((id) => id.replace(/\\/g, "/")).filter((id) => id.startsWith(nodeModulesFolder.replace(/\\/g, "/"))).map((id) => id.substring(nodeModulesFolder.length + 1));
      const npmModules = nodeModulesFolders.map((id) => id.replace(/\\/g, "/")).map((id) => {
        const parts = id.split("/");
        if (id.startsWith("@")) {
          return parts[0] + "/" + parts[1];
        } else {
          return parts[0];
        }
      }).sort().filter((value, index, self) => self.indexOf(value) === index);
      const npmModuleAndVersion = Object.fromEntries(npmModules.map((module) => [module, getVersion(module)]));
      const cvdls = Object.fromEntries(
        npmModules.filter((module) => getCvdlName(module) != null).map((module) => [module, { name: getCvdlName(module), version: getVersion(module) }])
      );
      mkdirSync2(path2.dirname(statsFile), { recursive: true });
      const projectPackageJson = JSON.parse(readFileSync4(projectPackageJsonFile, { encoding: "utf-8" }));
      const entryScripts = Object.values(bundle).filter((bundle2) => bundle2.isEntry).map((bundle2) => bundle2.fileName);
      const generatedIndexHtml = path2.resolve(buildOutputFolder, "index.html");
      const customIndexData = readFileSync4(projectIndexHtml, { encoding: "utf-8" });
      const generatedIndexData = readFileSync4(generatedIndexHtml, {
        encoding: "utf-8"
      });
      const customIndexRows = new Set(customIndexData.split(/[\r\n]/).filter((row) => row.trim() !== ""));
      const generatedIndexRows = generatedIndexData.split(/[\r\n]/).filter((row) => row.trim() !== "");
      const rowsGenerated = [];
      generatedIndexRows.forEach((row) => {
        if (!customIndexRows.has(row)) {
          rowsGenerated.push(row);
        }
      });
      const parseImports = (filename, result) => {
        const content = readFileSync4(filename, { encoding: "utf-8" });
        const lines = content.split("\n");
        const staticImports = lines.filter((line) => line.startsWith("import ")).map((line) => line.substring(line.indexOf("'") + 1, line.lastIndexOf("'"))).map((line) => line.includes("?") ? line.substring(0, line.lastIndexOf("?")) : line);
        const dynamicImports = lines.filter((line) => line.includes("import(")).map((line) => line.replace(/.*import\(/, "")).map((line) => line.split(/'/)[1]).map((line) => line.includes("?") ? line.substring(0, line.lastIndexOf("?")) : line);
        staticImports.forEach((staticImport) => result.add(staticImport));
        dynamicImports.map((dynamicImport) => {
          const importedFile = path2.resolve(path2.dirname(filename), dynamicImport);
          parseImports(importedFile, result);
        });
      };
      const generatedImportsSet = /* @__PURE__ */ new Set();
      parseImports(
        path2.resolve(themeOptions.frontendGeneratedFolder, "flow", "generated-flow-imports.js"),
        generatedImportsSet
      );
      const generatedImports = Array.from(generatedImportsSet).sort();
      const frontendFiles = {};
      frontendFiles["index.html"] = createHash("sha256").update(customIndexData.replace(/\r\n/g, "\n"), "utf8").digest("hex");
      const projectFileExtensions = [".js", ".js.map", ".ts", ".ts.map", ".tsx", ".tsx.map", ".css", ".css.map"];
      const isThemeComponentsResource = (id) => id.startsWith(themeOptions.frontendGeneratedFolder.replace(/\\/g, "/")) && id.match(/.*\/jar-resources\/themes\/[^\/]+\/components\//);
      const isGeneratedWebComponentResource = (id) => id.startsWith(themeOptions.frontendGeneratedFolder.replace(/\\/g, "/")) && id.match(/.*\/flow\/web-components\//);
      const isFrontendResourceCollected = (id) => !id.startsWith(themeOptions.frontendGeneratedFolder.replace(/\\/g, "/")) || isThemeComponentsResource(id) || isGeneratedWebComponentResource(id);
      modules.map((id) => id.replace(/\\/g, "/")).filter((id) => id.startsWith(frontendFolder.replace(/\\/g, "/"))).filter(isFrontendResourceCollected).map((id) => id.substring(frontendFolder.length + 1)).map((line) => line.includes("?") ? line.substring(0, line.lastIndexOf("?")) : line).forEach((line) => {
        const filePath = path2.resolve(frontendFolder, line);
        if (projectFileExtensions.includes(path2.extname(filePath))) {
          const fileBuffer = readFileSync4(filePath, { encoding: "utf-8" }).replace(/\r\n/g, "\n");
          frontendFiles[line] = createHash("sha256").update(fileBuffer, "utf8").digest("hex");
        }
      });
      generatedImports.filter((line) => line.includes("generated/jar-resources")).forEach((line) => {
        let filename = line.substring(line.indexOf("generated"));
        const fileBuffer = readFileSync4(path2.resolve(frontendFolder, filename), { encoding: "utf-8" }).replace(
          /\r\n/g,
          "\n"
        );
        const hash = createHash("sha256").update(fileBuffer, "utf8").digest("hex");
        const fileKey = line.substring(line.indexOf("jar-resources/") + 14);
        frontendFiles[fileKey] = hash;
      });
      let frontendFolderAlias = "Frontend";
      generatedImports.filter((line) => line.startsWith(frontendFolderAlias + "/")).filter((line) => !line.startsWith(frontendFolderAlias + "/generated/")).filter((line) => !line.startsWith(frontendFolderAlias + "/themes/")).map((line) => line.substring(frontendFolderAlias.length + 1)).filter((line) => !frontendFiles[line]).forEach((line) => {
        const filePath = path2.resolve(frontendFolder, line);
        if (projectFileExtensions.includes(path2.extname(filePath)) && existsSync5(filePath)) {
          const fileBuffer = readFileSync4(filePath, { encoding: "utf-8" }).replace(/\r\n/g, "\n");
          frontendFiles[line] = createHash("sha256").update(fileBuffer, "utf8").digest("hex");
        }
      });
      if (existsSync5(path2.resolve(frontendFolder, "index.ts"))) {
        const fileBuffer = readFileSync4(path2.resolve(frontendFolder, "index.ts"), { encoding: "utf-8" }).replace(
          /\r\n/g,
          "\n"
        );
        frontendFiles[`index.ts`] = createHash("sha256").update(fileBuffer, "utf8").digest("hex");
      }
      if (hasCommercialBanner) {
        const fileBuffer = readFileSync4(commercialBannerComponent, { encoding: "utf-8" }).replace(/\r\n/g, "\n");
        frontendFiles[vaadin_dev_server_settings_default.generatedFolder + "/commercial-banner.js"] = createHash("sha256").update(fileBuffer, "utf8").digest("hex");
      }
      const themeJsonContents = {};
      const themesFolder = path2.resolve(jarResourcesFolder, "themes");
      if (existsSync5(themesFolder)) {
        readdirSync2(themesFolder).forEach((themeFolder2) => {
          const themeJson = path2.resolve(themesFolder, themeFolder2, "theme.json");
          if (existsSync5(themeJson)) {
            themeJsonContents[path2.basename(themeFolder2)] = readFileSync4(themeJson, { encoding: "utf-8" }).replace(
              /\r\n/g,
              "\n"
            );
          }
        });
      }
      collectThemeJsonsInFrontend(themeJsonContents, vaadin_dev_server_settings_default.themeName);
      let webComponents = [];
      if (webComponentTags) {
        webComponents = webComponentTags.split(";");
      }
      const stats = {
        packageJsonDependencies: projectPackageJson.dependencies,
        npmModules: npmModuleAndVersion,
        bundleImports: generatedImports,
        frontendHashes: frontendFiles,
        themeJsonContents,
        entryScripts,
        webComponents,
        cvdlModules: cvdls,
        packageJsonHash: projectPackageJson?.vaadin?.hash,
        indexHtmlGenerated: rowsGenerated
      };
      writeFileSync2(statsFile, JSON.stringify(stats, null, 1));
    }
  };
}
function vaadinBundlesPlugin() {
  const disabledMessage = "Vaadin component dependency bundles are disabled.";
  const modulesDirectory = nodeModulesFolder.replace(/\\/g, "/");
  let vaadinBundleJson;
  function parseModuleId(id) {
    const [scope, scopedPackageName] = id.split("/", 3);
    const packageName = scope.startsWith("@") ? `${scope}/${scopedPackageName}` : scope;
    const modulePath = `.${id.substring(packageName.length)}`;
    return {
      packageName,
      modulePath
    };
  }
  function getExports(id) {
    const { packageName, modulePath } = parseModuleId(id);
    const packageInfo = vaadinBundleJson.packages[packageName];
    if (!packageInfo) return;
    const exposeInfo = packageInfo.exposes[modulePath];
    if (!exposeInfo) return;
    const exportsSet = /* @__PURE__ */ new Set();
    for (const e of exposeInfo.exports) {
      if (typeof e === "string") {
        exportsSet.add(e);
      } else {
        const { namespace, source } = e;
        if (namespace) {
          exportsSet.add(namespace);
        } else {
          const sourceExports = getExports(source);
          if (sourceExports) {
            sourceExports.forEach((e2) => exportsSet.add(e2));
          }
        }
      }
    }
    return Array.from(exportsSet);
  }
  function getExportBinding(binding) {
    return binding === "default" ? "_default as default" : binding;
  }
  function getImportAssigment(binding) {
    return binding === "default" ? "default: _default" : binding;
  }
  return {
    name: "vaadin:bundles",
    enforce: "pre",
    apply(config, { command }) {
      if (command !== "serve") return false;
      try {
        const vaadinBundleJsonPath = require2.resolve("@vaadin/bundles/vaadin-bundle.json");
        vaadinBundleJson = JSON.parse(readFileSync4(vaadinBundleJsonPath, { encoding: "utf8" }));
      } catch (e) {
        if (typeof e === "object" && e.code === "MODULE_NOT_FOUND") {
          vaadinBundleJson = { packages: {} };
          console.info(`@vaadin/bundles npm package is not found, ${disabledMessage}`);
          return false;
        } else {
          throw e;
        }
      }
      const versionMismatches = [];
      for (const [name, packageInfo] of Object.entries(vaadinBundleJson.packages)) {
        let installedVersion = void 0;
        try {
          const { version: bundledVersion } = packageInfo;
          const installedPackageJsonFile = path2.resolve(modulesDirectory, name, "package.json");
          const packageJson = JSON.parse(readFileSync4(installedPackageJsonFile, { encoding: "utf8" }));
          installedVersion = packageJson.version;
          if (installedVersion && installedVersion !== bundledVersion) {
            versionMismatches.push({
              name,
              bundledVersion,
              installedVersion
            });
          }
        } catch (_) {
        }
      }
      if (versionMismatches.length) {
        console.info(`@vaadin/bundles has version mismatches with installed packages, ${disabledMessage}`);
        console.info(`Packages with version mismatches: ${JSON.stringify(versionMismatches, void 0, 2)}`);
        vaadinBundleJson = { packages: {} };
        return false;
      }
      return true;
    },
    async config(config) {
      return mergeConfig(
        {
          optimizeDeps: {
            exclude: [
              // Vaadin bundle
              "@vaadin/bundles",
              ...Object.keys(vaadinBundleJson.packages),
              "@vaadin/vaadin-material-styles"
            ]
          }
        },
        config
      );
    },
    load(rawId) {
      const [path3, params] = rawId.split("?");
      if (!path3.startsWith(modulesDirectory)) return;
      const id = path3.substring(modulesDirectory.length + 1);
      const bindings = getExports(id);
      if (bindings === void 0) return;
      const cacheSuffix = params ? `?${params}` : "";
      const bundlePath = `@vaadin/bundles/vaadin.js${cacheSuffix}`;
      return `import { init as VaadinBundleInit, get as VaadinBundleGet } from '${bundlePath}';
await VaadinBundleInit('default');
const { ${bindings.map(getImportAssigment).join(", ")} } = (await VaadinBundleGet('./node_modules/${id}'))();
export { ${bindings.map(getExportBinding).join(", ")} };`;
    }
  };
}
function themePlugin(opts) {
  const fullThemeOptions = { ...themeOptions, devMode: opts.devMode };
  return {
    name: "vaadin:theme",
    config() {
      processThemeResources(fullThemeOptions, console);
    },
    configureServer(server) {
      function handleThemeFileCreateDelete(themeFile, stats) {
        if (themeFile.startsWith(themeFolder)) {
          const changed = path2.relative(themeFolder, themeFile);
          console.debug("Theme file " + (!!stats ? "created" : "deleted"), changed);
          processThemeResources(fullThemeOptions, console);
        }
      }
      server.watcher.on("add", handleThemeFileCreateDelete);
      server.watcher.on("unlink", handleThemeFileCreateDelete);
    },
    handleHotUpdate(context) {
      const contextPath = path2.resolve(context.file);
      const themePath = path2.resolve(themeFolder);
      if (contextPath.startsWith(themePath)) {
        const changed = path2.relative(themePath, contextPath);
        console.debug("Theme file changed", changed);
        if (changed.startsWith(vaadin_dev_server_settings_default.themeName)) {
          processThemeResources(fullThemeOptions, console);
        }
      }
    },
    async resolveId(id, importer) {
      if (path2.resolve(themeOptions.frontendGeneratedFolder, "theme.js") === importer && !existsSync5(path2.resolve(themeOptions.frontendGeneratedFolder, id))) {
        console.debug("Generate theme file " + id + " not existing. Processing theme resource");
        processThemeResources(fullThemeOptions, console);
        return;
      }
      if (!id.startsWith(vaadin_dev_server_settings_default.themeFolder)) {
        return;
      }
      for (const location of [themeResourceFolder, frontendFolder]) {
        const result = await this.resolve(path2.resolve(location, id));
        if (result) {
          return result;
        }
      }
    },
    async transform(raw, id, options) {
      const [bareId, query] = id.split("?");
      if (!bareId?.startsWith(themeFolder) && !bareId?.startsWith(themeOptions.themeResourceFolder) || !bareId?.endsWith(".css")) {
        return;
      }
      const resourceThemeFolder = bareId.startsWith(themeFolder) ? themeFolder : themeOptions.themeResourceFolder;
      const [themeName] = bareId.substring(resourceThemeFolder.length + 1).split("/");
      return rewriteCssUrls(raw, path2.dirname(bareId), path2.resolve(resourceThemeFolder, themeName), console, opts);
    }
  };
}
function runWatchDog(watchDogPort, watchDogHost) {
  const client = new net.Socket();
  client.setEncoding("utf8");
  client.on("error", function(err) {
    console.log("Watchdog connection error. Terminating vite process...", err);
    client.destroy();
    process.exit(0);
  });
  client.on("close", function() {
    client.destroy();
    runWatchDog(watchDogPort, watchDogHost);
  });
  client.connect(watchDogPort, watchDogHost || "localhost");
}
var allowedFrontendFolders = [frontendFolder, nodeModulesFolder];
function showRecompileReason() {
  return {
    name: "vaadin:why-you-compile",
    handleHotUpdate(context) {
      console.log("Recompiling because", context.file, "changed");
    }
  };
}
var DEV_MODE_START_REGEXP = /\/\*[\*!]\s+vaadin-dev-mode:start/;
var DEV_MODE_CODE_REGEXP = /\/\*[\*!]\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i;
function preserveUsageStats() {
  return {
    name: "vaadin:preserve-usage-stats",
    transform(src, id) {
      if (id.includes("vaadin-usage-statistics")) {
        if (src.includes("vaadin-dev-mode:start")) {
          const newSrc = src.replace(DEV_MODE_START_REGEXP, "/*! vaadin-dev-mode:start");
          if (newSrc === src) {
            console.error("Comment replacement failed to change anything");
          } else if (!newSrc.match(DEV_MODE_CODE_REGEXP)) {
            console.error("New comment fails to match original regexp");
          } else {
            return { code: newSrc };
          }
        }
      }
      return { code: src };
    }
  };
}
var vaadinConfig = (env) => {
  const devMode = env.mode === "development";
  const productionMode = !devMode && !devBundle;
  const commercialBanner = productionMode && hasCommercialBanner;
  if (devMode && process.env.watchDogPort) {
    runWatchDog(parseInt(process.env.watchDogPort), process.env.watchDogHost);
  }
  return {
    root: frontendFolder,
    base: "",
    publicDir: false,
    resolve: {
      alias: {
        "@vaadin/flow-frontend": jarResourcesFolder,
        Frontend: frontendFolder
      },
      preserveSymlinks: true
    },
    define: {
      OFFLINE_PATH: vaadin_dev_server_settings_default.offlinePath,
      VITE_ENABLED: "true"
    },
    server: {
      host: "127.0.0.1",
      strictPort: true,
      fs: {
        allow: allowedFrontendFolders
      }
    },
    build: {
      minify: productionMode,
      outDir: buildOutputFolder,
      emptyOutDir: devBundle,
      assetsDir: "VAADIN/build",
      target,
      rollupOptions: {
        input: {
          indexhtml: projectIndexHtml,
          ...hasExportedWebComponents ? { webcomponenthtml: path2.resolve(frontendFolder, "web-component.html") } : {}
        },
        output: {
          // Workaround to enable dynamic imports with top-level await for
          // commonjs modules, such as "atmosphere.js" in Hilla. Extracting
          // Rollup's commonjs helpers into separate manual chunk avoids
          // circular dependencies in this case. Caused
          //   - https://github.com/vitejs/vite/issues/10995
          //   - https://github.com/rollup/rollup/issues/5884
          //   - https://github.com/vitejs/vite/issues/19695
          //   - https://github.com/vitejs/vite/issues/12209
          manualChunks: (id) => id.startsWith("\0commonjsHelpers.js") ? "commonjsHelpers" : null
        },
        onwarn: (warning, defaultHandler) => {
          const ignoreEvalWarning = [
            "generated/jar-resources/FlowClient.js",
            "generated/jar-resources/vaadin-spreadsheet/spreadsheet-export.js",
            "@vaadin/charts/src/helpers.js"
          ];
          if (warning.code === "EVAL" && warning.id && !!ignoreEvalWarning.find((id) => warning.id?.endsWith(id))) {
            return;
          }
          defaultHandler(warning);
        }
      }
    },
    optimizeDeps: {
      esbuildOptions: {
        target
      },
      entries: [
        // Pre-scan entrypoints in Vite to avoid reloading on first open
        "generated/vaadin.ts"
      ],
      exclude: [
        "@vaadin/router",
        "@vaadin/vaadin-license-checker",
        "@vaadin/vaadin-usage-statistics",
        "workbox-core",
        "workbox-precaching",
        "workbox-routing",
        "workbox-strategies"
      ]
    },
    plugins: [
      productionMode && brotli2(),
      devMode && vaadinBundlesPlugin(),
      devMode && showRecompileReason(),
      vaadin_dev_server_settings_default.offlineEnabled && serviceWorkerPlugin({
        srcPath: vaadin_dev_server_settings_default.clientServiceWorkerSource
      }),
      !devMode && statsExtracterPlugin(),
      !productionMode && preserveUsageStats(),
      themePlugin({ devMode }),
      postcssLit({
        include: ["**/*.css", /.*\/.*\.css\?.*/],
        exclude: [
          `${themeFolder}/**/*.css`,
          new RegExp(`${themeFolder}/.*/.*\\.css\\?.*`),
          `${themeResourceFolder}/**/*.css`,
          new RegExp(`${themeResourceFolder}/.*/.*\\.css\\?.*`),
          new RegExp(".*/.*\\?html-proxy.*")
        ]
      }),
      // The React plugin provides fast refresh and debug source info
      reactPlugin({
        include: "**/*.tsx",
        babel: {
          // We need to use babel to provide the source information for it to be correct
          // (otherwise Babel will slightly rewrite the source file and esbuild generate source info for the modified file)
          presets: [
            [
              "@babel/preset-react",
              {
                runtime: "automatic",
                importSource: productionMode ? "react" : "Frontend/generated/jsx-dev-transform",
                development: !productionMode
              }
            ]
          ],
          // React writes the source location for where components are used, this writes for where they are defined
          plugins: [
            !productionMode && addFunctionComponentSourceLocationBabel(),
            [
              "module:@preact/signals-react-transform",
              {
                mode: "all"
                // Needed to include translations which do not use something.value
              }
            ]
          ].filter(Boolean)
        }
      }),
      productionMode && vaadinI18n({
        cwd: __vite_injected_original_dirname,
        meta: {
          output: {
            dir: i18nFolder
          }
        }
      }),
      {
        name: "vaadin:force-remove-html-middleware",
        configureServer(server) {
          return () => {
            server.middlewares.stack = server.middlewares.stack.filter((mw) => {
              const handleName = `${mw.handle}`;
              return !handleName.includes("viteHtmlFallbackMiddleware");
            });
          };
        }
      },
      hasExportedWebComponents && {
        name: "vaadin:inject-entrypoints-to-web-component-html",
        transformIndexHtml: {
          order: "pre",
          handler(_html, { path: path3, server }) {
            if (path3 !== "/web-component.html") {
              return;
            }
            const scripts = [
              {
                tag: "script",
                attrs: { type: "module", src: `/generated/vaadin-web-component.ts` },
                injectTo: "head"
              }
            ];
            if (commercialBanner) {
              scripts.push({
                tag: "script",
                attrs: { type: "module", src: "/generated/commercial-banner.js" },
                injectTo: "head"
              });
            }
            return scripts;
          }
        }
      },
      {
        name: "vaadin:inject-entrypoints-to-index-html",
        transformIndexHtml: {
          order: "pre",
          handler(_html, { path: path3, server }) {
            if (path3 !== "/index.html") {
              return;
            }
            const scripts = [];
            if (devMode) {
              scripts.push({
                tag: "script",
                attrs: { type: "module", src: `/generated/vite-devmode.ts`, onerror: "document.location.reload()" },
                injectTo: "head"
              });
            }
            scripts.push({
              tag: "script",
              attrs: { type: "module", src: "/generated/vaadin.ts" },
              injectTo: "head"
            });
            if (commercialBanner) {
              scripts.push({
                tag: "script",
                attrs: { type: "module", src: "/generated/commercial-banner.js" },
                injectTo: "head"
              });
            }
            return scripts;
          }
        }
      },
      checker({
        typescript: true
      }),
      productionMode && visualizer({ brotliSize: true, filename: bundleSizeFile })
    ]
  };
};
var overrideVaadinConfig = (customConfig2) => {
  return defineConfig((env) => mergeConfig(vaadinConfig(env), customConfig2(env)));
};
function getVersion(module) {
  const packageJson = path2.resolve(nodeModulesFolder, module, "package.json");
  return JSON.parse(readFileSync4(packageJson, { encoding: "utf-8" })).version;
}
function getCvdlName(module) {
  const packageJson = path2.resolve(nodeModulesFolder, module, "package.json");
  return JSON.parse(readFileSync4(packageJson, { encoding: "utf-8" })).cvdlName;
}

// vite.config.ts
var customConfig = (env) => ({
  // Here you can add custom Vite parameters
  // https://vitejs.dev/config/
});
var vite_config_default = overrideVaadinConfig(customConfig);
export {
  vite_config_default as default
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsidml0ZS5nZW5lcmF0ZWQudHMiLCAidGFyZ2V0L3BsdWdpbnMvYXBwbGljYXRpb24tdGhlbWUtcGx1Z2luL3RoZW1lLWhhbmRsZS5qcyIsICJ0YXJnZXQvcGx1Z2lucy9hcHBsaWNhdGlvbi10aGVtZS1wbHVnaW4vdGhlbWUtZ2VuZXJhdG9yLmpzIiwgInRhcmdldC9wbHVnaW5zL2FwcGxpY2F0aW9uLXRoZW1lLXBsdWdpbi90aGVtZS1jb3B5LmpzIiwgInRhcmdldC9wbHVnaW5zL3RoZW1lLWxvYWRlci90aGVtZS1sb2FkZXItdXRpbHMuanMiLCAidGFyZ2V0L3BsdWdpbnMvcmVhY3QtZnVuY3Rpb24tbG9jYXRpb24tcGx1Z2luL3JlYWN0LWZ1bmN0aW9uLWxvY2F0aW9uLXBsdWdpbi5qcyIsICJ0YXJnZXQvdmFhZGluLWRldi1zZXJ2ZXItc2V0dGluZ3MuanNvbiIsICJ0YXJnZXQvcGx1Z2lucy9yb2xsdXAtcGx1Z2luLXBvc3Rjc3MtbGl0LWN1c3RvbS9yb2xsdXAtcGx1Z2luLXBvc3Rjc3MtbGl0LmpzIiwgInRhcmdldC9wbHVnaW5zL3JvbGx1cC1wbHVnaW4tdmFhZGluLWkxOG4vcm9sbHVwLXBsdWdpbi12YWFkaW4taTE4bi5qcyIsICJ0YXJnZXQvcGx1Z2lucy92aXRlLXBsdWdpbi1zZXJ2aWNlLXdvcmtlci9pbmRleC50cyIsICJ2aXRlLmNvbmZpZy50cyJdLAogICJzb3VyY2VSb290IjogIi9ob21lL3dvcmtzcGFjZS9EU3F1YXJlIEhPTUUvaG9tZV9WYWFkaW4vIiwKICAic291cmNlc0NvbnRlbnQiOiBbImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSBIT01FL2hvbWVfVmFhZGluXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCIvaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSBIT01FL2hvbWVfVmFhZGluL3ZpdGUuZ2VuZXJhdGVkLnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9ob21lL3dvcmtzcGFjZS9EU3F1YXJlJTIwSE9NRS9ob21lX1ZhYWRpbi92aXRlLmdlbmVyYXRlZC50c1wiOy8qKlxuICogTk9USUNFOiB0aGlzIGlzIGFuIGF1dG8tZ2VuZXJhdGVkIGZpbGVcbiAqXG4gKiBUaGlzIGZpbGUgaGFzIGJlZW4gZ2VuZXJhdGVkIGJ5IHRoZSBgZmxvdzpwcmVwYXJlLWZyb250ZW5kYCBtYXZlbiBnb2FsLlxuICogVGhpcyBmaWxlIHdpbGwgYmUgb3ZlcndyaXR0ZW4gb24gZXZlcnkgcnVuLiBBbnkgY3VzdG9tIGNoYW5nZXMgc2hvdWxkIGJlIG1hZGUgdG8gdml0ZS5jb25maWcudHNcbiAqL1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBleGlzdHNTeW5jLCBta2RpclN5bmMsIHJlYWRkaXJTeW5jLCByZWFkRmlsZVN5bmMsIHdyaXRlRmlsZVN5bmMsIFN0YXRzIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgKiBhcyBuZXQgZnJvbSAnbmV0JztcblxuaW1wb3J0IHsgcHJvY2Vzc1RoZW1lUmVzb3VyY2VzIH0gZnJvbSAnLi90YXJnZXQvcGx1Z2lucy9hcHBsaWNhdGlvbi10aGVtZS1wbHVnaW4vdGhlbWUtaGFuZGxlLmpzJztcbmltcG9ydCB7IHJld3JpdGVDc3NVcmxzIH0gZnJvbSAnLi90YXJnZXQvcGx1Z2lucy90aGVtZS1sb2FkZXIvdGhlbWUtbG9hZGVyLXV0aWxzLmpzJztcbmltcG9ydCB7IGFkZEZ1bmN0aW9uQ29tcG9uZW50U291cmNlTG9jYXRpb25CYWJlbCB9IGZyb20gJy4vdGFyZ2V0L3BsdWdpbnMvcmVhY3QtZnVuY3Rpb24tbG9jYXRpb24tcGx1Z2luL3JlYWN0LWZ1bmN0aW9uLWxvY2F0aW9uLXBsdWdpbi5qcyc7XG5pbXBvcnQgc2V0dGluZ3MgZnJvbSAnLi90YXJnZXQvdmFhZGluLWRldi1zZXJ2ZXItc2V0dGluZ3MuanNvbic7XG5pbXBvcnQge1xuICBBc3NldEluZm8sXG4gIENodW5rSW5mbyxcbiAgZGVmaW5lQ29uZmlnLFxuICBtZXJnZUNvbmZpZyxcbiAgT3V0cHV0T3B0aW9ucyxcbiAgUGx1Z2luT3B0aW9uLFxuICBVc2VyQ29uZmlnRm5cbn0gZnJvbSAndml0ZSc7XG5cbmltcG9ydCAqIGFzIHJvbGx1cCBmcm9tICdyb2xsdXAnO1xuaW1wb3J0IGJyb3RsaSBmcm9tICdyb2xsdXAtcGx1Z2luLWJyb3RsaSc7XG5pbXBvcnQgY2hlY2tlciBmcm9tICd2aXRlLXBsdWdpbi1jaGVja2VyJztcbmltcG9ydCBwb3N0Y3NzTGl0IGZyb20gJy4vdGFyZ2V0L3BsdWdpbnMvcm9sbHVwLXBsdWdpbi1wb3N0Y3NzLWxpdC1jdXN0b20vcm9sbHVwLXBsdWdpbi1wb3N0Y3NzLWxpdC5qcyc7XG5pbXBvcnQgdmFhZGluSTE4biBmcm9tICcuL3RhcmdldC9wbHVnaW5zL3JvbGx1cC1wbHVnaW4tdmFhZGluLWkxOG4vcm9sbHVwLXBsdWdpbi12YWFkaW4taTE4bi5qcyc7XG5pbXBvcnQgc2VydmljZVdvcmtlclBsdWdpbiBmcm9tICcuL3RhcmdldC9wbHVnaW5zL3ZpdGUtcGx1Z2luLXNlcnZpY2Utd29ya2VyJztcblxuaW1wb3J0IHsgY3JlYXRlUmVxdWlyZSB9IGZyb20gJ21vZHVsZSc7XG5cbmltcG9ydCB7IHZpc3VhbGl6ZXIgfSBmcm9tICdyb2xsdXAtcGx1Z2luLXZpc3VhbGl6ZXInO1xuaW1wb3J0IHJlYWN0UGx1Z2luIGZyb20gJ0B2aXRlanMvcGx1Z2luLXJlYWN0JztcblxuXG5cbi8vIE1ha2UgYHJlcXVpcmVgIGNvbXBhdGlibGUgd2l0aCBFUyBtb2R1bGVzXG5jb25zdCByZXF1aXJlID0gY3JlYXRlUmVxdWlyZShpbXBvcnQubWV0YS51cmwpO1xuXG5jb25zdCBmcm9udGVuZEZvbGRlciA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIHNldHRpbmdzLmZyb250ZW5kRm9sZGVyKTtcbmNvbnN0IHRoZW1lRm9sZGVyID0gcGF0aC5yZXNvbHZlKGZyb250ZW5kRm9sZGVyLCBzZXR0aW5ncy50aGVtZUZvbGRlcik7XG5jb25zdCBmcm9udGVuZEJ1bmRsZUZvbGRlciA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIHNldHRpbmdzLmZyb250ZW5kQnVuZGxlT3V0cHV0KTtcbmNvbnN0IGRldkJ1bmRsZUZvbGRlciA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIHNldHRpbmdzLmRldkJ1bmRsZU91dHB1dCk7XG5jb25zdCBkZXZCdW5kbGUgPSAhIXByb2Nlc3MuZW52LmRldkJ1bmRsZTtcbmNvbnN0IGphclJlc291cmNlc0ZvbGRlciA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIHNldHRpbmdzLmphclJlc291cmNlc0ZvbGRlcik7XG5jb25zdCB0aGVtZVJlc291cmNlRm9sZGVyID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgc2V0dGluZ3MudGhlbWVSZXNvdXJjZUZvbGRlcik7XG5jb25zdCBwcm9qZWN0UGFja2FnZUpzb25GaWxlID0gcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ3BhY2thZ2UuanNvbicpO1xuXG5jb25zdCBidWlsZE91dHB1dEZvbGRlciA9IGRldkJ1bmRsZSA/IGRldkJ1bmRsZUZvbGRlciA6IGZyb250ZW5kQnVuZGxlRm9sZGVyO1xuY29uc3Qgc3RhdHNGb2xkZXIgPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBkZXZCdW5kbGUgPyBzZXR0aW5ncy5kZXZCdW5kbGVTdGF0c091dHB1dCA6IHNldHRpbmdzLnN0YXRzT3V0cHV0KTtcbmNvbnN0IHN0YXRzRmlsZSA9IHBhdGgucmVzb2x2ZShzdGF0c0ZvbGRlciwgJ3N0YXRzLmpzb24nKTtcbmNvbnN0IGJ1bmRsZVNpemVGaWxlID0gcGF0aC5yZXNvbHZlKHN0YXRzRm9sZGVyLCAnYnVuZGxlLXNpemUuaHRtbCcpO1xuY29uc3QgaTE4bkZvbGRlciA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIHNldHRpbmdzLmkxOG5PdXRwdXQpO1xuY29uc3Qgbm9kZU1vZHVsZXNGb2xkZXIgPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnbm9kZV9tb2R1bGVzJyk7XG5jb25zdCB3ZWJDb21wb25lbnRUYWdzID0gJyc7XG5cbmNvbnN0IHByb2plY3RJbmRleEh0bWwgPSBwYXRoLnJlc29sdmUoZnJvbnRlbmRGb2xkZXIsICdpbmRleC5odG1sJyk7XG5cbmNvbnN0IHByb2plY3RTdGF0aWNBc3NldHNGb2xkZXJzID0gW1xuICBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnc3JjJywgJ21haW4nLCAncmVzb3VyY2VzJywgJ01FVEEtSU5GJywgJ3Jlc291cmNlcycpLFxuICBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnc3JjJywgJ21haW4nLCAncmVzb3VyY2VzJywgJ3N0YXRpYycpLFxuICBmcm9udGVuZEZvbGRlclxuXTtcblxuLy8gRm9sZGVycyBpbiB0aGUgcHJvamVjdCB3aGljaCBjYW4gY29udGFpbiBhcHBsaWNhdGlvbiB0aGVtZXNcbmNvbnN0IHRoZW1lUHJvamVjdEZvbGRlcnMgPSBwcm9qZWN0U3RhdGljQXNzZXRzRm9sZGVycy5tYXAoKGZvbGRlcikgPT4gcGF0aC5yZXNvbHZlKGZvbGRlciwgc2V0dGluZ3MudGhlbWVGb2xkZXIpKTtcblxuY29uc3QgdGhlbWVPcHRpb25zID0ge1xuICBkZXZNb2RlOiBmYWxzZSxcbiAgdXNlRGV2QnVuZGxlOiBkZXZCdW5kbGUsXG4gIC8vIFRoZSBmb2xsb3dpbmcgbWF0Y2hlcyBmb2xkZXIgJ2Zyb250ZW5kL2dlbmVyYXRlZC90aGVtZXMvJ1xuICAvLyAobm90ICdmcm9udGVuZC90aGVtZXMnKSBmb3IgdGhlbWUgaW4gSkFSIHRoYXQgaXMgY29waWVkIHRoZXJlXG4gIHRoZW1lUmVzb3VyY2VGb2xkZXI6IHBhdGgucmVzb2x2ZSh0aGVtZVJlc291cmNlRm9sZGVyLCBzZXR0aW5ncy50aGVtZUZvbGRlciksXG4gIHRoZW1lUHJvamVjdEZvbGRlcnM6IHRoZW1lUHJvamVjdEZvbGRlcnMsXG4gIHByb2plY3RTdGF0aWNBc3NldHNPdXRwdXRGb2xkZXI6IGRldkJ1bmRsZVxuICAgID8gcGF0aC5yZXNvbHZlKGRldkJ1bmRsZUZvbGRlciwgJy4uL2Fzc2V0cycpXG4gICAgOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCBzZXR0aW5ncy5zdGF0aWNPdXRwdXQpLFxuICBmcm9udGVuZEdlbmVyYXRlZEZvbGRlcjogcGF0aC5yZXNvbHZlKGZyb250ZW5kRm9sZGVyLCBzZXR0aW5ncy5nZW5lcmF0ZWRGb2xkZXIpXG59O1xuXG5jb25zdCBoYXNFeHBvcnRlZFdlYkNvbXBvbmVudHMgPSBleGlzdHNTeW5jKHBhdGgucmVzb2x2ZShmcm9udGVuZEZvbGRlciwgJ3dlYi1jb21wb25lbnQuaHRtbCcpKTtcbmNvbnN0IGNvbW1lcmNpYWxCYW5uZXJDb21wb25lbnQgPSBwYXRoLnJlc29sdmUoZnJvbnRlbmRGb2xkZXIsIHNldHRpbmdzLmdlbmVyYXRlZEZvbGRlciwgJ2NvbW1lcmNpYWwtYmFubmVyLmpzJyk7XG5jb25zdCBoYXNDb21tZXJjaWFsQmFubmVyID0gZXhpc3RzU3luYyhjb21tZXJjaWFsQmFubmVyQ29tcG9uZW50KTtcblxuY29uc3QgdGFyZ2V0ID0gWydzYWZhcmkxNScsICdlczIwMjInXTtcblxuLy8gQmxvY2sgZGVidWcgYW5kIHRyYWNlIGxvZ3MuXG5jb25zb2xlLnRyYWNlID0gKCkgPT4ge307XG5jb25zb2xlLmRlYnVnID0gKCkgPT4ge307XG5cbmZ1bmN0aW9uIHN0YXRzRXh0cmFjdGVyUGx1Z2luKCk6IFBsdWdpbk9wdGlvbiB7XG4gIGZ1bmN0aW9uIGNvbGxlY3RUaGVtZUpzb25zSW5Gcm9udGVuZCh0aGVtZUpzb25Db250ZW50czogUmVjb3JkPHN0cmluZywgc3RyaW5nPiwgdGhlbWVOYW1lOiBzdHJpbmcpIHtcbiAgICBjb25zdCB0aGVtZUpzb24gPSBwYXRoLnJlc29sdmUoZnJvbnRlbmRGb2xkZXIsIHNldHRpbmdzLnRoZW1lRm9sZGVyLCB0aGVtZU5hbWUsICd0aGVtZS5qc29uJyk7XG4gICAgaWYgKGV4aXN0c1N5bmModGhlbWVKc29uKSkge1xuICAgICAgY29uc3QgdGhlbWVKc29uQ29udGVudCA9IHJlYWRGaWxlU3luYyh0aGVtZUpzb24sIHsgZW5jb2Rpbmc6ICd1dGYtOCcgfSkucmVwbGFjZSgvXFxyXFxuL2csICdcXG4nKTtcbiAgICAgIHRoZW1lSnNvbkNvbnRlbnRzW3RoZW1lTmFtZV0gPSB0aGVtZUpzb25Db250ZW50O1xuICAgICAgY29uc3QgdGhlbWVKc29uT2JqZWN0ID0gSlNPTi5wYXJzZSh0aGVtZUpzb25Db250ZW50KTtcbiAgICAgIGlmICh0aGVtZUpzb25PYmplY3QucGFyZW50KSB7XG4gICAgICAgIGNvbGxlY3RUaGVtZUpzb25zSW5Gcm9udGVuZCh0aGVtZUpzb25Db250ZW50cywgdGhlbWVKc29uT2JqZWN0LnBhcmVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBuYW1lOiAndmFhZGluOnN0YXRzJyxcbiAgICBlbmZvcmNlOiAncG9zdCcsXG4gICAgYXN5bmMgd3JpdGVCdW5kbGUob3B0aW9uczogT3V0cHV0T3B0aW9ucywgYnVuZGxlOiB7IFtmaWxlTmFtZTogc3RyaW5nXTogQXNzZXRJbmZvIHwgQ2h1bmtJbmZvIH0pIHtcbiAgICAgIGNvbnN0IG1vZHVsZXMgPSBPYmplY3QudmFsdWVzKGJ1bmRsZSkuZmxhdE1hcCgoYikgPT4gKGIubW9kdWxlcyA/IE9iamVjdC5rZXlzKGIubW9kdWxlcykgOiBbXSkpO1xuICAgICAgY29uc3Qgbm9kZU1vZHVsZXNGb2xkZXJzID0gbW9kdWxlc1xuICAgICAgICAubWFwKChpZCkgPT4gaWQucmVwbGFjZSgvXFxcXC9nLCAnLycpKVxuICAgICAgICAuZmlsdGVyKChpZCkgPT4gaWQuc3RhcnRzV2l0aChub2RlTW9kdWxlc0ZvbGRlci5yZXBsYWNlKC9cXFxcL2csICcvJykpKVxuICAgICAgICAubWFwKChpZCkgPT4gaWQuc3Vic3RyaW5nKG5vZGVNb2R1bGVzRm9sZGVyLmxlbmd0aCArIDEpKTtcbiAgICAgIGNvbnN0IG5wbU1vZHVsZXMgPSBub2RlTW9kdWxlc0ZvbGRlcnNcbiAgICAgICAgLm1hcCgoaWQpID0+IGlkLnJlcGxhY2UoL1xcXFwvZywgJy8nKSlcbiAgICAgICAgLm1hcCgoaWQpID0+IHtcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IGlkLnNwbGl0KCcvJyk7XG4gICAgICAgICAgaWYgKGlkLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnRzWzBdICsgJy8nICsgcGFydHNbMV07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJ0c1swXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5zb3J0KClcbiAgICAgICAgLmZpbHRlcigodmFsdWUsIGluZGV4LCBzZWxmKSA9PiBzZWxmLmluZGV4T2YodmFsdWUpID09PSBpbmRleCk7XG4gICAgICBjb25zdCBucG1Nb2R1bGVBbmRWZXJzaW9uID0gT2JqZWN0LmZyb21FbnRyaWVzKG5wbU1vZHVsZXMubWFwKChtb2R1bGUpID0+IFttb2R1bGUsIGdldFZlcnNpb24obW9kdWxlKV0pKTtcbiAgICAgIGNvbnN0IGN2ZGxzID0gT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgICBucG1Nb2R1bGVzXG4gICAgICAgICAgLmZpbHRlcigobW9kdWxlKSA9PiBnZXRDdmRsTmFtZShtb2R1bGUpICE9IG51bGwpXG4gICAgICAgICAgLm1hcCgobW9kdWxlKSA9PiBbbW9kdWxlLCB7IG5hbWU6IGdldEN2ZGxOYW1lKG1vZHVsZSksIHZlcnNpb246IGdldFZlcnNpb24obW9kdWxlKSB9XSlcbiAgICAgICk7XG5cbiAgICAgIG1rZGlyU3luYyhwYXRoLmRpcm5hbWUoc3RhdHNGaWxlKSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICBjb25zdCBwcm9qZWN0UGFja2FnZUpzb24gPSBKU09OLnBhcnNlKHJlYWRGaWxlU3luYyhwcm9qZWN0UGFja2FnZUpzb25GaWxlLCB7IGVuY29kaW5nOiAndXRmLTgnIH0pKTtcblxuICAgICAgY29uc3QgZW50cnlTY3JpcHRzID0gT2JqZWN0LnZhbHVlcyhidW5kbGUpXG4gICAgICAgIC5maWx0ZXIoKGJ1bmRsZSkgPT4gYnVuZGxlLmlzRW50cnkpXG4gICAgICAgIC5tYXAoKGJ1bmRsZSkgPT4gYnVuZGxlLmZpbGVOYW1lKTtcblxuICAgICAgY29uc3QgZ2VuZXJhdGVkSW5kZXhIdG1sID0gcGF0aC5yZXNvbHZlKGJ1aWxkT3V0cHV0Rm9sZGVyLCAnaW5kZXguaHRtbCcpO1xuICAgICAgY29uc3QgY3VzdG9tSW5kZXhEYXRhOiBzdHJpbmcgPSByZWFkRmlsZVN5bmMocHJvamVjdEluZGV4SHRtbCwgeyBlbmNvZGluZzogJ3V0Zi04JyB9KTtcbiAgICAgIGNvbnN0IGdlbmVyYXRlZEluZGV4RGF0YTogc3RyaW5nID0gcmVhZEZpbGVTeW5jKGdlbmVyYXRlZEluZGV4SHRtbCwge1xuICAgICAgICBlbmNvZGluZzogJ3V0Zi04J1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGN1c3RvbUluZGV4Um93cyA9IG5ldyBTZXQoY3VzdG9tSW5kZXhEYXRhLnNwbGl0KC9bXFxyXFxuXS8pLmZpbHRlcigocm93KSA9PiByb3cudHJpbSgpICE9PSAnJykpO1xuICAgICAgY29uc3QgZ2VuZXJhdGVkSW5kZXhSb3dzID0gZ2VuZXJhdGVkSW5kZXhEYXRhLnNwbGl0KC9bXFxyXFxuXS8pLmZpbHRlcigocm93KSA9PiByb3cudHJpbSgpICE9PSAnJyk7XG5cbiAgICAgIGNvbnN0IHJvd3NHZW5lcmF0ZWQ6IHN0cmluZ1tdID0gW107XG4gICAgICBnZW5lcmF0ZWRJbmRleFJvd3MuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICAgIGlmICghY3VzdG9tSW5kZXhSb3dzLmhhcyhyb3cpKSB7XG4gICAgICAgICAgcm93c0dlbmVyYXRlZC5wdXNoKHJvdyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvL0FmdGVyIGRldi1idW5kbGUgYnVpbGQgYWRkIHVzZWQgRmxvdyBmcm9udGVuZCBpbXBvcnRzIEpzTW9kdWxlL0phdmFTY3JpcHQvQ3NzSW1wb3J0XG5cbiAgICAgIGNvbnN0IHBhcnNlSW1wb3J0cyA9IChmaWxlbmFtZTogc3RyaW5nLCByZXN1bHQ6IFNldDxzdHJpbmc+KTogdm9pZCA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQ6IHN0cmluZyA9IHJlYWRGaWxlU3luYyhmaWxlbmFtZSwgeyBlbmNvZGluZzogJ3V0Zi04JyB9KTtcbiAgICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICAgICAgY29uc3Qgc3RhdGljSW1wb3J0cyA9IGxpbmVzXG4gICAgICAgICAgLmZpbHRlcigobGluZSkgPT4gbGluZS5zdGFydHNXaXRoKCdpbXBvcnQgJykpXG4gICAgICAgICAgLm1hcCgobGluZSkgPT4gbGluZS5zdWJzdHJpbmcobGluZS5pbmRleE9mKFwiJ1wiKSArIDEsIGxpbmUubGFzdEluZGV4T2YoXCInXCIpKSlcbiAgICAgICAgICAubWFwKChsaW5lKSA9PiAobGluZS5pbmNsdWRlcygnPycpID8gbGluZS5zdWJzdHJpbmcoMCwgbGluZS5sYXN0SW5kZXhPZignPycpKSA6IGxpbmUpKTtcbiAgICAgICAgY29uc3QgZHluYW1pY0ltcG9ydHMgPSBsaW5lc1xuICAgICAgICAgIC5maWx0ZXIoKGxpbmUpID0+IGxpbmUuaW5jbHVkZXMoJ2ltcG9ydCgnKSlcbiAgICAgICAgICAubWFwKChsaW5lKSA9PiBsaW5lLnJlcGxhY2UoLy4qaW1wb3J0XFwoLywgJycpKVxuICAgICAgICAgIC5tYXAoKGxpbmUpID0+IGxpbmUuc3BsaXQoLycvKVsxXSlcbiAgICAgICAgICAubWFwKChsaW5lKSA9PiAobGluZS5pbmNsdWRlcygnPycpID8gbGluZS5zdWJzdHJpbmcoMCwgbGluZS5sYXN0SW5kZXhPZignPycpKSA6IGxpbmUpKTtcblxuICAgICAgICBzdGF0aWNJbXBvcnRzLmZvckVhY2goKHN0YXRpY0ltcG9ydCkgPT4gcmVzdWx0LmFkZChzdGF0aWNJbXBvcnQpKTtcblxuICAgICAgICBkeW5hbWljSW1wb3J0cy5tYXAoKGR5bmFtaWNJbXBvcnQpID0+IHtcbiAgICAgICAgICBjb25zdCBpbXBvcnRlZEZpbGUgPSBwYXRoLnJlc29sdmUocGF0aC5kaXJuYW1lKGZpbGVuYW1lKSwgZHluYW1pY0ltcG9ydCk7XG4gICAgICAgICAgcGFyc2VJbXBvcnRzKGltcG9ydGVkRmlsZSwgcmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBjb25zdCBnZW5lcmF0ZWRJbXBvcnRzU2V0ID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgICBwYXJzZUltcG9ydHMoXG4gICAgICAgIHBhdGgucmVzb2x2ZSh0aGVtZU9wdGlvbnMuZnJvbnRlbmRHZW5lcmF0ZWRGb2xkZXIsICdmbG93JywgJ2dlbmVyYXRlZC1mbG93LWltcG9ydHMuanMnKSxcbiAgICAgICAgZ2VuZXJhdGVkSW1wb3J0c1NldFxuICAgICAgKTtcbiAgICAgIGNvbnN0IGdlbmVyYXRlZEltcG9ydHMgPSBBcnJheS5mcm9tKGdlbmVyYXRlZEltcG9ydHNTZXQpLnNvcnQoKTtcblxuICAgICAgY29uc3QgZnJvbnRlbmRGaWxlczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9O1xuICAgICAgZnJvbnRlbmRGaWxlc1snaW5kZXguaHRtbCddID0gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGN1c3RvbUluZGV4RGF0YS5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpLCAndXRmOCcpLmRpZ2VzdCgnaGV4Jyk7XG5cbiAgICAgIGNvbnN0IHByb2plY3RGaWxlRXh0ZW5zaW9ucyA9IFsnLmpzJywgJy5qcy5tYXAnLCAnLnRzJywgJy50cy5tYXAnLCAnLnRzeCcsICcudHN4Lm1hcCcsICcuY3NzJywgJy5jc3MubWFwJ107XG5cbiAgICAgIGNvbnN0IGlzVGhlbWVDb21wb25lbnRzUmVzb3VyY2UgPSAoaWQ6IHN0cmluZykgPT5cbiAgICAgICAgICBpZC5zdGFydHNXaXRoKHRoZW1lT3B0aW9ucy5mcm9udGVuZEdlbmVyYXRlZEZvbGRlci5yZXBsYWNlKC9cXFxcL2csICcvJykpXG4gICAgICAgICAgICAgICYmIGlkLm1hdGNoKC8uKlxcL2phci1yZXNvdXJjZXNcXC90aGVtZXNcXC9bXlxcL10rXFwvY29tcG9uZW50c1xcLy8pO1xuXG4gICAgICBjb25zdCBpc0dlbmVyYXRlZFdlYkNvbXBvbmVudFJlc291cmNlID0gKGlkOiBzdHJpbmcpID0+XG4gICAgICAgICAgaWQuc3RhcnRzV2l0aCh0aGVtZU9wdGlvbnMuZnJvbnRlbmRHZW5lcmF0ZWRGb2xkZXIucmVwbGFjZSgvXFxcXC9nLCAnLycpKVxuICAgICAgICAgICAgICAmJiBpZC5tYXRjaCgvLipcXC9mbG93XFwvd2ViLWNvbXBvbmVudHNcXC8vKTtcblxuICAgICAgY29uc3QgaXNGcm9udGVuZFJlc291cmNlQ29sbGVjdGVkID0gKGlkOiBzdHJpbmcpID0+XG4gICAgICAgICAgIWlkLnN0YXJ0c1dpdGgodGhlbWVPcHRpb25zLmZyb250ZW5kR2VuZXJhdGVkRm9sZGVyLnJlcGxhY2UoL1xcXFwvZywgJy8nKSlcbiAgICAgICAgICB8fCBpc1RoZW1lQ29tcG9uZW50c1Jlc291cmNlKGlkKVxuICAgICAgICAgIHx8IGlzR2VuZXJhdGVkV2ViQ29tcG9uZW50UmVzb3VyY2UoaWQpO1xuXG4gICAgICAvLyBjb2xsZWN0cyBwcm9qZWN0J3MgZnJvbnRlbmQgcmVzb3VyY2VzIGluIGZyb250ZW5kIGZvbGRlciwgZXhjbHVkaW5nXG4gICAgICAvLyAnZ2VuZXJhdGVkJyBzdWItZm9sZGVyLCBleGNlcHQgZm9yIGxlZ2FjeSBzaGFkb3cgRE9NIHN0eWxlc2hlZXRzXG4gICAgICAvLyBwYWNrYWdlZCBpbiBgdGhlbWUvY29tcG9uZW50cy9gIGZvbGRlclxuICAgICAgLy8gYW5kIGdlbmVyYXRlZCB3ZWIgY29tcG9uZW50IHJlc291cmNlcyBpbiBgZmxvdy93ZWItY29tcG9uZW50c2AgZm9sZGVyLlxuICAgICAgbW9kdWxlc1xuICAgICAgICAubWFwKChpZCkgPT4gaWQucmVwbGFjZSgvXFxcXC9nLCAnLycpKVxuICAgICAgICAuZmlsdGVyKChpZCkgPT4gaWQuc3RhcnRzV2l0aChmcm9udGVuZEZvbGRlci5yZXBsYWNlKC9cXFxcL2csICcvJykpKVxuICAgICAgICAuZmlsdGVyKGlzRnJvbnRlbmRSZXNvdXJjZUNvbGxlY3RlZClcbiAgICAgICAgLm1hcCgoaWQpID0+IGlkLnN1YnN0cmluZyhmcm9udGVuZEZvbGRlci5sZW5ndGggKyAxKSlcbiAgICAgICAgLm1hcCgobGluZTogc3RyaW5nKSA9PiAobGluZS5pbmNsdWRlcygnPycpID8gbGluZS5zdWJzdHJpbmcoMCwgbGluZS5sYXN0SW5kZXhPZignPycpKSA6IGxpbmUpKVxuICAgICAgICAuZm9yRWFjaCgobGluZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgLy8gXFxyXFxuIGZyb20gd2luZG93cyBtYWRlIGZpbGVzIG1heSBiZSB1c2VkIHNvIGNoYW5nZSB0byBcXG5cbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGgucmVzb2x2ZShmcm9udGVuZEZvbGRlciwgbGluZSk7XG4gICAgICAgICAgaWYgKHByb2plY3RGaWxlRXh0ZW5zaW9ucy5pbmNsdWRlcyhwYXRoLmV4dG5hbWUoZmlsZVBhdGgpKSkge1xuICAgICAgICAgICAgY29uc3QgZmlsZUJ1ZmZlciA9IHJlYWRGaWxlU3luYyhmaWxlUGF0aCwgeyBlbmNvZGluZzogJ3V0Zi04JyB9KS5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpO1xuICAgICAgICAgICAgZnJvbnRlbmRGaWxlc1tsaW5lXSA9IGNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShmaWxlQnVmZmVyLCAndXRmOCcpLmRpZ2VzdCgnaGV4Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgLy8gY29sbGVjdHMgZnJvbnRlbmQgcmVzb3VyY2VzIGZyb20gdGhlIEpBUnNcbiAgICAgIGdlbmVyYXRlZEltcG9ydHNcbiAgICAgICAgLmZpbHRlcigobGluZTogc3RyaW5nKSA9PiBsaW5lLmluY2x1ZGVzKCdnZW5lcmF0ZWQvamFyLXJlc291cmNlcycpKVxuICAgICAgICAuZm9yRWFjaCgobGluZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgbGV0IGZpbGVuYW1lID0gbGluZS5zdWJzdHJpbmcobGluZS5pbmRleE9mKCdnZW5lcmF0ZWQnKSk7XG4gICAgICAgICAgLy8gXFxyXFxuIGZyb20gd2luZG93cyBtYWRlIGZpbGVzIG1heSBiZSB1c2VkIHJvIHJlbW92ZSB0byBiZSBvbmx5IFxcblxuICAgICAgICAgIGNvbnN0IGZpbGVCdWZmZXIgPSByZWFkRmlsZVN5bmMocGF0aC5yZXNvbHZlKGZyb250ZW5kRm9sZGVyLCBmaWxlbmFtZSksIHsgZW5jb2Rpbmc6ICd1dGYtOCcgfSkucmVwbGFjZShcbiAgICAgICAgICAgIC9cXHJcXG4vZyxcbiAgICAgICAgICAgICdcXG4nXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBoYXNoID0gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGZpbGVCdWZmZXIsICd1dGY4JykuZGlnZXN0KCdoZXgnKTtcblxuICAgICAgICAgIGNvbnN0IGZpbGVLZXkgPSBsaW5lLnN1YnN0cmluZyhsaW5lLmluZGV4T2YoJ2phci1yZXNvdXJjZXMvJykgKyAxNCk7XG4gICAgICAgICAgZnJvbnRlbmRGaWxlc1tmaWxlS2V5XSA9IGhhc2g7XG4gICAgICAgIH0pO1xuICAgICAgLy8gY29sbGVjdHMgYW5kIGhhc2ggcmVzdCBvZiB0aGUgRnJvbnRlbmQgcmVzb3VyY2VzIGV4Y2x1ZGluZyBmaWxlcyBpbiAvZ2VuZXJhdGVkLyBhbmQgL3RoZW1lcy9cbiAgICAgIC8vIGFuZCBmaWxlcyBhbHJlYWR5IGluIGZyb250ZW5kRmlsZXMuXG4gICAgICBsZXQgZnJvbnRlbmRGb2xkZXJBbGlhcyA9IFwiRnJvbnRlbmRcIjtcbiAgICAgIGdlbmVyYXRlZEltcG9ydHNcbiAgICAgICAgLmZpbHRlcigobGluZTogc3RyaW5nKSA9PiBsaW5lLnN0YXJ0c1dpdGgoZnJvbnRlbmRGb2xkZXJBbGlhcyArICcvJykpXG4gICAgICAgIC5maWx0ZXIoKGxpbmU6IHN0cmluZykgPT4gIWxpbmUuc3RhcnRzV2l0aChmcm9udGVuZEZvbGRlckFsaWFzICsgJy9nZW5lcmF0ZWQvJykpXG4gICAgICAgIC5maWx0ZXIoKGxpbmU6IHN0cmluZykgPT4gIWxpbmUuc3RhcnRzV2l0aChmcm9udGVuZEZvbGRlckFsaWFzICsgJy90aGVtZXMvJykpXG4gICAgICAgIC5tYXAoKGxpbmUpID0+IGxpbmUuc3Vic3RyaW5nKGZyb250ZW5kRm9sZGVyQWxpYXMubGVuZ3RoICsgMSkpXG4gICAgICAgIC5maWx0ZXIoKGxpbmU6IHN0cmluZykgPT4gIWZyb250ZW5kRmlsZXNbbGluZV0pXG4gICAgICAgIC5mb3JFYWNoKChsaW5lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGgucmVzb2x2ZShmcm9udGVuZEZvbGRlciwgbGluZSk7XG4gICAgICAgICAgaWYgKHByb2plY3RGaWxlRXh0ZW5zaW9ucy5pbmNsdWRlcyhwYXRoLmV4dG5hbWUoZmlsZVBhdGgpKSAmJiBleGlzdHNTeW5jKGZpbGVQYXRoKSkge1xuICAgICAgICAgICAgY29uc3QgZmlsZUJ1ZmZlciA9IHJlYWRGaWxlU3luYyhmaWxlUGF0aCwgeyBlbmNvZGluZzogJ3V0Zi04JyB9KS5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpO1xuICAgICAgICAgICAgZnJvbnRlbmRGaWxlc1tsaW5lXSA9IGNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShmaWxlQnVmZmVyLCAndXRmOCcpLmRpZ2VzdCgnaGV4Jyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIC8vIElmIGEgaW5kZXgudHMgZXhpc3RzIGhhc2ggaXQgdG8gYmUgYWJsZSB0byBzZWUgaWYgaXQgY2hhbmdlcy5cbiAgICAgIGlmIChleGlzdHNTeW5jKHBhdGgucmVzb2x2ZShmcm9udGVuZEZvbGRlciwgJ2luZGV4LnRzJykpKSB7XG4gICAgICAgIGNvbnN0IGZpbGVCdWZmZXIgPSByZWFkRmlsZVN5bmMocGF0aC5yZXNvbHZlKGZyb250ZW5kRm9sZGVyLCAnaW5kZXgudHMnKSwgeyBlbmNvZGluZzogJ3V0Zi04JyB9KS5yZXBsYWNlKFxuICAgICAgICAgIC9cXHJcXG4vZyxcbiAgICAgICAgICAnXFxuJ1xuICAgICAgICApO1xuICAgICAgICBmcm9udGVuZEZpbGVzW2BpbmRleC50c2BdID0gY3JlYXRlSGFzaCgnc2hhMjU2JykudXBkYXRlKGZpbGVCdWZmZXIsICd1dGY4JykuZGlnZXN0KCdoZXgnKTtcbiAgICAgIH1cbiAgICAgIGlmIChoYXNDb21tZXJjaWFsQmFubmVyKSB7XG4gICAgICAgIGNvbnN0IGZpbGVCdWZmZXIgPSByZWFkRmlsZVN5bmMoY29tbWVyY2lhbEJhbm5lckNvbXBvbmVudCwgeyBlbmNvZGluZzogJ3V0Zi04JyB9KS5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpO1xuICAgICAgICBmcm9udGVuZEZpbGVzW3NldHRpbmdzLmdlbmVyYXRlZEZvbGRlciArICcvY29tbWVyY2lhbC1iYW5uZXIuanMnXSA9IGNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShmaWxlQnVmZmVyLCAndXRmOCcpLmRpZ2VzdCgnaGV4Jyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRoZW1lSnNvbkNvbnRlbnRzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICAgICBjb25zdCB0aGVtZXNGb2xkZXIgPSBwYXRoLnJlc29sdmUoamFyUmVzb3VyY2VzRm9sZGVyLCAndGhlbWVzJyk7XG4gICAgICBpZiAoZXhpc3RzU3luYyh0aGVtZXNGb2xkZXIpKSB7XG4gICAgICAgIHJlYWRkaXJTeW5jKHRoZW1lc0ZvbGRlcikuZm9yRWFjaCgodGhlbWVGb2xkZXIpID0+IHtcbiAgICAgICAgICBjb25zdCB0aGVtZUpzb24gPSBwYXRoLnJlc29sdmUodGhlbWVzRm9sZGVyLCB0aGVtZUZvbGRlciwgJ3RoZW1lLmpzb24nKTtcbiAgICAgICAgICBpZiAoZXhpc3RzU3luYyh0aGVtZUpzb24pKSB7XG4gICAgICAgICAgICB0aGVtZUpzb25Db250ZW50c1twYXRoLmJhc2VuYW1lKHRoZW1lRm9sZGVyKV0gPSByZWFkRmlsZVN5bmModGhlbWVKc29uLCB7IGVuY29kaW5nOiAndXRmLTgnIH0pLnJlcGxhY2UoXG4gICAgICAgICAgICAgIC9cXHJcXG4vZyxcbiAgICAgICAgICAgICAgJ1xcbidcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29sbGVjdFRoZW1lSnNvbnNJbkZyb250ZW5kKHRoZW1lSnNvbkNvbnRlbnRzLCBzZXR0aW5ncy50aGVtZU5hbWUpO1xuXG4gICAgICBsZXQgd2ViQ29tcG9uZW50czogc3RyaW5nW10gPSBbXTtcbiAgICAgIGlmICh3ZWJDb21wb25lbnRUYWdzKSB7XG4gICAgICAgIHdlYkNvbXBvbmVudHMgPSB3ZWJDb21wb25lbnRUYWdzLnNwbGl0KCc7Jyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHN0YXRzID0ge1xuICAgICAgICBwYWNrYWdlSnNvbkRlcGVuZGVuY2llczogcHJvamVjdFBhY2thZ2VKc29uLmRlcGVuZGVuY2llcyxcbiAgICAgICAgbnBtTW9kdWxlczogbnBtTW9kdWxlQW5kVmVyc2lvbixcbiAgICAgICAgYnVuZGxlSW1wb3J0czogZ2VuZXJhdGVkSW1wb3J0cyxcbiAgICAgICAgZnJvbnRlbmRIYXNoZXM6IGZyb250ZW5kRmlsZXMsXG4gICAgICAgIHRoZW1lSnNvbkNvbnRlbnRzOiB0aGVtZUpzb25Db250ZW50cyxcbiAgICAgICAgZW50cnlTY3JpcHRzLFxuICAgICAgICB3ZWJDb21wb25lbnRzLFxuICAgICAgICBjdmRsTW9kdWxlczogY3ZkbHMsXG4gICAgICAgIHBhY2thZ2VKc29uSGFzaDogcHJvamVjdFBhY2thZ2VKc29uPy52YWFkaW4/Lmhhc2gsXG4gICAgICAgIGluZGV4SHRtbEdlbmVyYXRlZDogcm93c0dlbmVyYXRlZFxuICAgICAgfTtcbiAgICAgIHdyaXRlRmlsZVN5bmMoc3RhdHNGaWxlLCBKU09OLnN0cmluZ2lmeShzdGF0cywgbnVsbCwgMSkpO1xuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIHZhYWRpbkJ1bmRsZXNQbHVnaW4oKTogUGx1Z2luT3B0aW9uIHtcbiAgdHlwZSBFeHBvcnRJbmZvID1cbiAgICB8IHN0cmluZ1xuICAgIHwge1xuICAgICAgICBuYW1lc3BhY2U/OiBzdHJpbmc7XG4gICAgICAgIHNvdXJjZTogc3RyaW5nO1xuICAgICAgfTtcblxuICB0eXBlIEV4cG9zZUluZm8gPSB7XG4gICAgZXhwb3J0czogRXhwb3J0SW5mb1tdO1xuICB9O1xuXG4gIHR5cGUgUGFja2FnZUluZm8gPSB7XG4gICAgdmVyc2lvbjogc3RyaW5nO1xuICAgIGV4cG9zZXM6IFJlY29yZDxzdHJpbmcsIEV4cG9zZUluZm8+O1xuICB9O1xuXG4gIHR5cGUgQnVuZGxlSnNvbiA9IHtcbiAgICBwYWNrYWdlczogUmVjb3JkPHN0cmluZywgUGFja2FnZUluZm8+O1xuICB9O1xuXG4gIGNvbnN0IGRpc2FibGVkTWVzc2FnZSA9ICdWYWFkaW4gY29tcG9uZW50IGRlcGVuZGVuY3kgYnVuZGxlcyBhcmUgZGlzYWJsZWQuJztcblxuICBjb25zdCBtb2R1bGVzRGlyZWN0b3J5ID0gbm9kZU1vZHVsZXNGb2xkZXIucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xuXG4gIGxldCB2YWFkaW5CdW5kbGVKc29uOiBCdW5kbGVKc29uO1xuXG4gIGZ1bmN0aW9uIHBhcnNlTW9kdWxlSWQoaWQ6IHN0cmluZyk6IHsgcGFja2FnZU5hbWU6IHN0cmluZzsgbW9kdWxlUGF0aDogc3RyaW5nIH0ge1xuICAgIGNvbnN0IFtzY29wZSwgc2NvcGVkUGFja2FnZU5hbWVdID0gaWQuc3BsaXQoJy8nLCAzKTtcbiAgICBjb25zdCBwYWNrYWdlTmFtZSA9IHNjb3BlLnN0YXJ0c1dpdGgoJ0AnKSA/IGAke3Njb3BlfS8ke3Njb3BlZFBhY2thZ2VOYW1lfWAgOiBzY29wZTtcbiAgICBjb25zdCBtb2R1bGVQYXRoID0gYC4ke2lkLnN1YnN0cmluZyhwYWNrYWdlTmFtZS5sZW5ndGgpfWA7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhY2thZ2VOYW1lLFxuICAgICAgbW9kdWxlUGF0aFxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBnZXRFeHBvcnRzKGlkOiBzdHJpbmcpOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCB7XG4gICAgY29uc3QgeyBwYWNrYWdlTmFtZSwgbW9kdWxlUGF0aCB9ID0gcGFyc2VNb2R1bGVJZChpZCk7XG4gICAgY29uc3QgcGFja2FnZUluZm8gPSB2YWFkaW5CdW5kbGVKc29uLnBhY2thZ2VzW3BhY2thZ2VOYW1lXTtcblxuICAgIGlmICghcGFja2FnZUluZm8pIHJldHVybjtcblxuICAgIGNvbnN0IGV4cG9zZUluZm86IEV4cG9zZUluZm8gPSBwYWNrYWdlSW5mby5leHBvc2VzW21vZHVsZVBhdGhdO1xuICAgIGlmICghZXhwb3NlSW5mbykgcmV0dXJuO1xuXG4gICAgY29uc3QgZXhwb3J0c1NldCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGZvciAoY29uc3QgZSBvZiBleHBvc2VJbmZvLmV4cG9ydHMpIHtcbiAgICAgIGlmICh0eXBlb2YgZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZXhwb3J0c1NldC5hZGQoZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB7IG5hbWVzcGFjZSwgc291cmNlIH0gPSBlO1xuICAgICAgICBpZiAobmFtZXNwYWNlKSB7XG4gICAgICAgICAgZXhwb3J0c1NldC5hZGQobmFtZXNwYWNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBzb3VyY2VFeHBvcnRzID0gZ2V0RXhwb3J0cyhzb3VyY2UpO1xuICAgICAgICAgIGlmIChzb3VyY2VFeHBvcnRzKSB7XG4gICAgICAgICAgICBzb3VyY2VFeHBvcnRzLmZvckVhY2goKGUpID0+IGV4cG9ydHNTZXQuYWRkKGUpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIEFycmF5LmZyb20oZXhwb3J0c1NldCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRFeHBvcnRCaW5kaW5nKGJpbmRpbmc6IHN0cmluZykge1xuICAgIHJldHVybiBiaW5kaW5nID09PSAnZGVmYXVsdCcgPyAnX2RlZmF1bHQgYXMgZGVmYXVsdCcgOiBiaW5kaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW1wb3J0QXNzaWdtZW50KGJpbmRpbmc6IHN0cmluZykge1xuICAgIHJldHVybiBiaW5kaW5nID09PSAnZGVmYXVsdCcgPyAnZGVmYXVsdDogX2RlZmF1bHQnIDogYmluZGluZztcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbmFtZTogJ3ZhYWRpbjpidW5kbGVzJyxcbiAgICBlbmZvcmNlOiAncHJlJyxcbiAgICBhcHBseShjb25maWcsIHsgY29tbWFuZCB9KSB7XG4gICAgICBpZiAoY29tbWFuZCAhPT0gJ3NlcnZlJykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCB2YWFkaW5CdW5kbGVKc29uUGF0aCA9IHJlcXVpcmUucmVzb2x2ZSgnQHZhYWRpbi9idW5kbGVzL3ZhYWRpbi1idW5kbGUuanNvbicpO1xuICAgICAgICB2YWFkaW5CdW5kbGVKc29uID0gSlNPTi5wYXJzZShyZWFkRmlsZVN5bmModmFhZGluQnVuZGxlSnNvblBhdGgsIHsgZW5jb2Rpbmc6ICd1dGY4JyB9KSk7XG4gICAgICB9IGNhdGNoIChlOiB1bmtub3duKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZSA9PT0gJ29iamVjdCcgJiYgKGUgYXMgeyBjb2RlOiBzdHJpbmcgfSkuY29kZSA9PT0gJ01PRFVMRV9OT1RfRk9VTkQnKSB7XG4gICAgICAgICAgdmFhZGluQnVuZGxlSnNvbiA9IHsgcGFja2FnZXM6IHt9IH07XG4gICAgICAgICAgY29uc29sZS5pbmZvKGBAdmFhZGluL2J1bmRsZXMgbnBtIHBhY2thZ2UgaXMgbm90IGZvdW5kLCAke2Rpc2FibGVkTWVzc2FnZX1gKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB2ZXJzaW9uTWlzbWF0Y2hlczogQXJyYXk8eyBuYW1lOiBzdHJpbmc7IGJ1bmRsZWRWZXJzaW9uOiBzdHJpbmc7IGluc3RhbGxlZFZlcnNpb246IHN0cmluZyB9PiA9IFtdO1xuICAgICAgZm9yIChjb25zdCBbbmFtZSwgcGFja2FnZUluZm9dIG9mIE9iamVjdC5lbnRyaWVzKHZhYWRpbkJ1bmRsZUpzb24ucGFja2FnZXMpKSB7XG4gICAgICAgIGxldCBpbnN0YWxsZWRWZXJzaW9uOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgeyB2ZXJzaW9uOiBidW5kbGVkVmVyc2lvbiB9ID0gcGFja2FnZUluZm87XG4gICAgICAgICAgY29uc3QgaW5zdGFsbGVkUGFja2FnZUpzb25GaWxlID0gcGF0aC5yZXNvbHZlKG1vZHVsZXNEaXJlY3RvcnksIG5hbWUsICdwYWNrYWdlLmpzb24nKTtcbiAgICAgICAgICBjb25zdCBwYWNrYWdlSnNvbiA9IEpTT04ucGFyc2UocmVhZEZpbGVTeW5jKGluc3RhbGxlZFBhY2thZ2VKc29uRmlsZSwgeyBlbmNvZGluZzogJ3V0ZjgnIH0pKTtcbiAgICAgICAgICBpbnN0YWxsZWRWZXJzaW9uID0gcGFja2FnZUpzb24udmVyc2lvbjtcbiAgICAgICAgICBpZiAoaW5zdGFsbGVkVmVyc2lvbiAmJiBpbnN0YWxsZWRWZXJzaW9uICE9PSBidW5kbGVkVmVyc2lvbikge1xuICAgICAgICAgICAgdmVyc2lvbk1pc21hdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgIGJ1bmRsZWRWZXJzaW9uLFxuICAgICAgICAgICAgICBpbnN0YWxsZWRWZXJzaW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKF8pIHtcbiAgICAgICAgICAvLyBpZ25vcmUgcGFja2FnZSBub3QgZm91bmRcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaGVzLmxlbmd0aCkge1xuICAgICAgICBjb25zb2xlLmluZm8oYEB2YWFkaW4vYnVuZGxlcyBoYXMgdmVyc2lvbiBtaXNtYXRjaGVzIHdpdGggaW5zdGFsbGVkIHBhY2thZ2VzLCAke2Rpc2FibGVkTWVzc2FnZX1gKTtcbiAgICAgICAgY29uc29sZS5pbmZvKGBQYWNrYWdlcyB3aXRoIHZlcnNpb24gbWlzbWF0Y2hlczogJHtKU09OLnN0cmluZ2lmeSh2ZXJzaW9uTWlzbWF0Y2hlcywgdW5kZWZpbmVkLCAyKX1gKTtcbiAgICAgICAgdmFhZGluQnVuZGxlSnNvbiA9IHsgcGFja2FnZXM6IHt9IH07XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBhc3luYyBjb25maWcoY29uZmlnKSB7XG4gICAgICByZXR1cm4gbWVyZ2VDb25maWcoXG4gICAgICAgIHtcbiAgICAgICAgICBvcHRpbWl6ZURlcHM6IHtcbiAgICAgICAgICAgIGV4Y2x1ZGU6IFtcbiAgICAgICAgICAgICAgLy8gVmFhZGluIGJ1bmRsZVxuICAgICAgICAgICAgICAnQHZhYWRpbi9idW5kbGVzJyxcbiAgICAgICAgICAgICAgLi4uT2JqZWN0LmtleXModmFhZGluQnVuZGxlSnNvbi5wYWNrYWdlcyksXG4gICAgICAgICAgICAgICdAdmFhZGluL3ZhYWRpbi1tYXRlcmlhbC1zdHlsZXMnXG4gICAgICAgICAgICBdXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBjb25maWdcbiAgICAgICk7XG4gICAgfSxcbiAgICBsb2FkKHJhd0lkKSB7XG4gICAgICBjb25zdCBbcGF0aCwgcGFyYW1zXSA9IHJhd0lkLnNwbGl0KCc/Jyk7XG4gICAgICBpZiAoIXBhdGguc3RhcnRzV2l0aChtb2R1bGVzRGlyZWN0b3J5KSkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBpZCA9IHBhdGguc3Vic3RyaW5nKG1vZHVsZXNEaXJlY3RvcnkubGVuZ3RoICsgMSk7XG4gICAgICBjb25zdCBiaW5kaW5ncyA9IGdldEV4cG9ydHMoaWQpO1xuICAgICAgaWYgKGJpbmRpbmdzID09PSB1bmRlZmluZWQpIHJldHVybjtcblxuICAgICAgY29uc3QgY2FjaGVTdWZmaXggPSBwYXJhbXMgPyBgPyR7cGFyYW1zfWAgOiAnJztcbiAgICAgIGNvbnN0IGJ1bmRsZVBhdGggPSBgQHZhYWRpbi9idW5kbGVzL3ZhYWRpbi5qcyR7Y2FjaGVTdWZmaXh9YDtcblxuICAgICAgcmV0dXJuIGBpbXBvcnQgeyBpbml0IGFzIFZhYWRpbkJ1bmRsZUluaXQsIGdldCBhcyBWYWFkaW5CdW5kbGVHZXQgfSBmcm9tICcke2J1bmRsZVBhdGh9JztcbmF3YWl0IFZhYWRpbkJ1bmRsZUluaXQoJ2RlZmF1bHQnKTtcbmNvbnN0IHsgJHtiaW5kaW5ncy5tYXAoZ2V0SW1wb3J0QXNzaWdtZW50KS5qb2luKCcsICcpfSB9ID0gKGF3YWl0IFZhYWRpbkJ1bmRsZUdldCgnLi9ub2RlX21vZHVsZXMvJHtpZH0nKSkoKTtcbmV4cG9ydCB7ICR7YmluZGluZ3MubWFwKGdldEV4cG9ydEJpbmRpbmcpLmpvaW4oJywgJyl9IH07YDtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRoZW1lUGx1Z2luKG9wdHM6IHsgZGV2TW9kZTogYm9vbGVhbiB9KTogUGx1Z2luT3B0aW9uIHtcbiAgY29uc3QgZnVsbFRoZW1lT3B0aW9ucyA9IHsgLi4udGhlbWVPcHRpb25zLCBkZXZNb2RlOiBvcHRzLmRldk1vZGUgfTtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiAndmFhZGluOnRoZW1lJyxcbiAgICBjb25maWcoKSB7XG4gICAgICBwcm9jZXNzVGhlbWVSZXNvdXJjZXMoZnVsbFRoZW1lT3B0aW9ucywgY29uc29sZSk7XG4gICAgfSxcbiAgICBjb25maWd1cmVTZXJ2ZXIoc2VydmVyKSB7XG4gICAgICBmdW5jdGlvbiBoYW5kbGVUaGVtZUZpbGVDcmVhdGVEZWxldGUodGhlbWVGaWxlOiBzdHJpbmcsIHN0YXRzPzogU3RhdHMpIHtcbiAgICAgICAgaWYgKHRoZW1lRmlsZS5zdGFydHNXaXRoKHRoZW1lRm9sZGVyKSkge1xuICAgICAgICAgIGNvbnN0IGNoYW5nZWQgPSBwYXRoLnJlbGF0aXZlKHRoZW1lRm9sZGVyLCB0aGVtZUZpbGUpO1xuICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1RoZW1lIGZpbGUgJyArICghIXN0YXRzID8gJ2NyZWF0ZWQnIDogJ2RlbGV0ZWQnKSwgY2hhbmdlZCk7XG4gICAgICAgICAgcHJvY2Vzc1RoZW1lUmVzb3VyY2VzKGZ1bGxUaGVtZU9wdGlvbnMsIGNvbnNvbGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzZXJ2ZXIud2F0Y2hlci5vbignYWRkJywgaGFuZGxlVGhlbWVGaWxlQ3JlYXRlRGVsZXRlKTtcbiAgICAgIHNlcnZlci53YXRjaGVyLm9uKCd1bmxpbmsnLCBoYW5kbGVUaGVtZUZpbGVDcmVhdGVEZWxldGUpO1xuICAgIH0sXG4gICAgaGFuZGxlSG90VXBkYXRlKGNvbnRleHQpIHtcbiAgICAgIGNvbnN0IGNvbnRleHRQYXRoID0gcGF0aC5yZXNvbHZlKGNvbnRleHQuZmlsZSk7XG4gICAgICBjb25zdCB0aGVtZVBhdGggPSBwYXRoLnJlc29sdmUodGhlbWVGb2xkZXIpO1xuICAgICAgaWYgKGNvbnRleHRQYXRoLnN0YXJ0c1dpdGgodGhlbWVQYXRoKSkge1xuICAgICAgICBjb25zdCBjaGFuZ2VkID0gcGF0aC5yZWxhdGl2ZSh0aGVtZVBhdGgsIGNvbnRleHRQYXRoKTtcblxuICAgICAgICBjb25zb2xlLmRlYnVnKCdUaGVtZSBmaWxlIGNoYW5nZWQnLCBjaGFuZ2VkKTtcblxuICAgICAgICBpZiAoY2hhbmdlZC5zdGFydHNXaXRoKHNldHRpbmdzLnRoZW1lTmFtZSkpIHtcbiAgICAgICAgICBwcm9jZXNzVGhlbWVSZXNvdXJjZXMoZnVsbFRoZW1lT3B0aW9ucywgY29uc29sZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGFzeW5jIHJlc29sdmVJZChpZCwgaW1wb3J0ZXIpIHtcbiAgICAgIC8vIGZvcmNlIHRoZW1lIGdlbmVyYXRpb24gaWYgZ2VuZXJhdGVkIHRoZW1lIHNvdXJjZXMgZG9lcyBub3QgeWV0IGV4aXN0XG4gICAgICAvLyB0aGlzIG1heSBoYXBwZW4gZm9yIGV4YW1wbGUgZHVyaW5nIEphdmEgaG90IHJlbG9hZCB3aGVuIHVwZGF0aW5nXG4gICAgICAvLyBAVGhlbWUgYW5ub3RhdGlvbiB2YWx1ZVxuICAgICAgaWYgKFxuICAgICAgICBwYXRoLnJlc29sdmUodGhlbWVPcHRpb25zLmZyb250ZW5kR2VuZXJhdGVkRm9sZGVyLCAndGhlbWUuanMnKSA9PT0gaW1wb3J0ZXIgJiZcbiAgICAgICAgIWV4aXN0c1N5bmMocGF0aC5yZXNvbHZlKHRoZW1lT3B0aW9ucy5mcm9udGVuZEdlbmVyYXRlZEZvbGRlciwgaWQpKVxuICAgICAgKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ0dlbmVyYXRlIHRoZW1lIGZpbGUgJyArIGlkICsgJyBub3QgZXhpc3RpbmcuIFByb2Nlc3NpbmcgdGhlbWUgcmVzb3VyY2UnKTtcbiAgICAgICAgcHJvY2Vzc1RoZW1lUmVzb3VyY2VzKGZ1bGxUaGVtZU9wdGlvbnMsIGNvbnNvbGUpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIWlkLnN0YXJ0c1dpdGgoc2V0dGluZ3MudGhlbWVGb2xkZXIpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgbG9jYXRpb24gb2YgW3RoZW1lUmVzb3VyY2VGb2xkZXIsIGZyb250ZW5kRm9sZGVyXSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJlc29sdmUocGF0aC5yZXNvbHZlKGxvY2F0aW9uLCBpZCkpO1xuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgYXN5bmMgdHJhbnNmb3JtKHJhdywgaWQsIG9wdGlvbnMpIHtcbiAgICAgIC8vIHJld3JpdGUgdXJscyBmb3IgdGhlIGFwcGxpY2F0aW9uIHRoZW1lIGNzcyBmaWxlc1xuICAgICAgY29uc3QgW2JhcmVJZCwgcXVlcnldID0gaWQuc3BsaXQoJz8nKTtcbiAgICAgIGlmIChcbiAgICAgICAgKCFiYXJlSWQ/LnN0YXJ0c1dpdGgodGhlbWVGb2xkZXIpICYmICFiYXJlSWQ/LnN0YXJ0c1dpdGgodGhlbWVPcHRpb25zLnRoZW1lUmVzb3VyY2VGb2xkZXIpKSB8fFxuICAgICAgICAhYmFyZUlkPy5lbmRzV2l0aCgnLmNzcycpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzb3VyY2VUaGVtZUZvbGRlciA9IGJhcmVJZC5zdGFydHNXaXRoKHRoZW1lRm9sZGVyKSA/IHRoZW1lRm9sZGVyIDogdGhlbWVPcHRpb25zLnRoZW1lUmVzb3VyY2VGb2xkZXI7XG4gICAgICBjb25zdCBbdGhlbWVOYW1lXSA9ICBiYXJlSWQuc3Vic3RyaW5nKHJlc291cmNlVGhlbWVGb2xkZXIubGVuZ3RoICsgMSkuc3BsaXQoJy8nKTtcbiAgICAgIHJldHVybiByZXdyaXRlQ3NzVXJscyhyYXcsIHBhdGguZGlybmFtZShiYXJlSWQpLCBwYXRoLnJlc29sdmUocmVzb3VyY2VUaGVtZUZvbGRlciwgdGhlbWVOYW1lKSwgY29uc29sZSwgb3B0cyk7XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBydW5XYXRjaERvZyh3YXRjaERvZ1BvcnQ6IG51bWJlciwgd2F0Y2hEb2dIb3N0OiBzdHJpbmcgfCB1bmRlZmluZWQpIHtcbiAgY29uc3QgY2xpZW50ID0gbmV3IG5ldC5Tb2NrZXQoKTtcbiAgY2xpZW50LnNldEVuY29kaW5nKCd1dGY4Jyk7XG4gIGNsaWVudC5vbignZXJyb3InLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgY29uc29sZS5sb2coJ1dhdGNoZG9nIGNvbm5lY3Rpb24gZXJyb3IuIFRlcm1pbmF0aW5nIHZpdGUgcHJvY2Vzcy4uLicsIGVycik7XG4gICAgY2xpZW50LmRlc3Ryb3koKTtcbiAgICBwcm9jZXNzLmV4aXQoMCk7XG4gIH0pO1xuICBjbGllbnQub24oJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xuICAgIGNsaWVudC5kZXN0cm95KCk7XG4gICAgcnVuV2F0Y2hEb2cod2F0Y2hEb2dQb3J0LCB3YXRjaERvZ0hvc3QpO1xuICB9KTtcblxuICBjbGllbnQuY29ubmVjdCh3YXRjaERvZ1BvcnQsIHdhdGNoRG9nSG9zdCB8fCAnbG9jYWxob3N0Jyk7XG59XG5cbmNvbnN0IGFsbG93ZWRGcm9udGVuZEZvbGRlcnMgPSBbZnJvbnRlbmRGb2xkZXIsIG5vZGVNb2R1bGVzRm9sZGVyXTtcblxuZnVuY3Rpb24gc2hvd1JlY29tcGlsZVJlYXNvbigpOiBQbHVnaW5PcHRpb24ge1xuICByZXR1cm4ge1xuICAgIG5hbWU6ICd2YWFkaW46d2h5LXlvdS1jb21waWxlJyxcbiAgICBoYW5kbGVIb3RVcGRhdGUoY29udGV4dCkge1xuICAgICAgY29uc29sZS5sb2coJ1JlY29tcGlsaW5nIGJlY2F1c2UnLCBjb250ZXh0LmZpbGUsICdjaGFuZ2VkJyk7XG4gICAgfVxuICB9O1xufVxuXG5jb25zdCBERVZfTU9ERV9TVEFSVF9SRUdFWFAgPSAvXFwvXFwqW1xcKiFdXFxzK3ZhYWRpbi1kZXYtbW9kZTpzdGFydC87XG5jb25zdCBERVZfTU9ERV9DT0RFX1JFR0VYUCA9IC9cXC9cXCpbXFwqIV1cXHMrdmFhZGluLWRldi1tb2RlOnN0YXJ0KFtcXHNcXFNdKil2YWFkaW4tZGV2LW1vZGU6ZW5kXFxzK1xcKlxcKlxcLy9pO1xuXG5mdW5jdGlvbiBwcmVzZXJ2ZVVzYWdlU3RhdHMoKSB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogJ3ZhYWRpbjpwcmVzZXJ2ZS11c2FnZS1zdGF0cycsXG5cbiAgICB0cmFuc2Zvcm0oc3JjOiBzdHJpbmcsIGlkOiBzdHJpbmcpIHtcbiAgICAgIGlmIChpZC5pbmNsdWRlcygndmFhZGluLXVzYWdlLXN0YXRpc3RpY3MnKSkge1xuICAgICAgICBpZiAoc3JjLmluY2x1ZGVzKCd2YWFkaW4tZGV2LW1vZGU6c3RhcnQnKSkge1xuICAgICAgICAgIGNvbnN0IG5ld1NyYyA9IHNyYy5yZXBsYWNlKERFVl9NT0RFX1NUQVJUX1JFR0VYUCwgJy8qISB2YWFkaW4tZGV2LW1vZGU6c3RhcnQnKTtcbiAgICAgICAgICBpZiAobmV3U3JjID09PSBzcmMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvbW1lbnQgcmVwbGFjZW1lbnQgZmFpbGVkIHRvIGNoYW5nZSBhbnl0aGluZycpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoIW5ld1NyYy5tYXRjaChERVZfTU9ERV9DT0RFX1JFR0VYUCkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05ldyBjb21tZW50IGZhaWxzIHRvIG1hdGNoIG9yaWdpbmFsIHJlZ2V4cCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4geyBjb2RlOiBuZXdTcmMgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgY29kZTogc3JjIH07XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgY29uc3QgdmFhZGluQ29uZmlnOiBVc2VyQ29uZmlnRm4gPSAoZW52KSA9PiB7XG4gIGNvbnN0IGRldk1vZGUgPSBlbnYubW9kZSA9PT0gJ2RldmVsb3BtZW50JztcbiAgY29uc3QgcHJvZHVjdGlvbk1vZGUgPSAhZGV2TW9kZSAmJiAhZGV2QnVuZGxlXG4gIGNvbnN0IGNvbW1lcmNpYWxCYW5uZXIgPSBwcm9kdWN0aW9uTW9kZSAmJiBoYXNDb21tZXJjaWFsQmFubmVyO1xuXG4gIGlmIChkZXZNb2RlICYmIHByb2Nlc3MuZW52LndhdGNoRG9nUG9ydCkge1xuICAgIC8vIE9wZW4gYSBjb25uZWN0aW9uIHdpdGggdGhlIEphdmEgZGV2LW1vZGUgaGFuZGxlciBpbiBvcmRlciB0byBmaW5pc2hcbiAgICAvLyB2aXRlIHdoZW4gaXQgZXhpdHMgb3IgY3Jhc2hlcy5cbiAgICBydW5XYXRjaERvZyhwYXJzZUludChwcm9jZXNzLmVudi53YXRjaERvZ1BvcnQpLCBwcm9jZXNzLmVudi53YXRjaERvZ0hvc3QpO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICByb290OiBmcm9udGVuZEZvbGRlcixcbiAgICBiYXNlOiAnJyxcbiAgICBwdWJsaWNEaXI6IGZhbHNlLFxuICAgIHJlc29sdmU6IHtcbiAgICAgIGFsaWFzOiB7XG4gICAgICAgICdAdmFhZGluL2Zsb3ctZnJvbnRlbmQnOiBqYXJSZXNvdXJjZXNGb2xkZXIsXG4gICAgICAgIEZyb250ZW5kOiBmcm9udGVuZEZvbGRlclxuICAgICAgfSxcbiAgICAgIHByZXNlcnZlU3ltbGlua3M6IHRydWVcbiAgICB9LFxuICAgIGRlZmluZToge1xuICAgICAgT0ZGTElORV9QQVRIOiBzZXR0aW5ncy5vZmZsaW5lUGF0aCxcbiAgICAgIFZJVEVfRU5BQkxFRDogJ3RydWUnXG4gICAgfSxcbiAgICBzZXJ2ZXI6IHtcbiAgICAgIGhvc3Q6ICcxMjcuMC4wLjEnLFxuICAgICAgc3RyaWN0UG9ydDogdHJ1ZSxcbiAgICAgIGZzOiB7XG4gICAgICAgIGFsbG93OiBhbGxvd2VkRnJvbnRlbmRGb2xkZXJzXG4gICAgICB9XG4gICAgfSxcbiAgICBidWlsZDoge1xuICAgICAgbWluaWZ5OiBwcm9kdWN0aW9uTW9kZSxcbiAgICAgIG91dERpcjogYnVpbGRPdXRwdXRGb2xkZXIsXG4gICAgICBlbXB0eU91dERpcjogZGV2QnVuZGxlLFxuICAgICAgYXNzZXRzRGlyOiAnVkFBRElOL2J1aWxkJyxcbiAgICAgIHRhcmdldCxcbiAgICAgIHJvbGx1cE9wdGlvbnM6IHtcbiAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICBpbmRleGh0bWw6IHByb2plY3RJbmRleEh0bWwsXG5cbiAgICAgICAgICAuLi4oaGFzRXhwb3J0ZWRXZWJDb21wb25lbnRzID8geyB3ZWJjb21wb25lbnRodG1sOiBwYXRoLnJlc29sdmUoZnJvbnRlbmRGb2xkZXIsICd3ZWItY29tcG9uZW50Lmh0bWwnKSB9IDoge30pXG4gICAgICAgIH0sXG4gICAgICAgIG91dHB1dDoge1xuICAgICAgICAgIC8vIFdvcmthcm91bmQgdG8gZW5hYmxlIGR5bmFtaWMgaW1wb3J0cyB3aXRoIHRvcC1sZXZlbCBhd2FpdCBmb3JcbiAgICAgICAgICAvLyBjb21tb25qcyBtb2R1bGVzLCBzdWNoIGFzIFwiYXRtb3NwaGVyZS5qc1wiIGluIEhpbGxhLiBFeHRyYWN0aW5nXG4gICAgICAgICAgLy8gUm9sbHVwJ3MgY29tbW9uanMgaGVscGVycyBpbnRvIHNlcGFyYXRlIG1hbnVhbCBjaHVuayBhdm9pZHNcbiAgICAgICAgICAvLyBjaXJjdWxhciBkZXBlbmRlbmNpZXMgaW4gdGhpcyBjYXNlLiBDYXVzZWRcbiAgICAgICAgICAvLyAgIC0gaHR0cHM6Ly9naXRodWIuY29tL3ZpdGVqcy92aXRlL2lzc3Vlcy8xMDk5NVxuICAgICAgICAgIC8vICAgLSBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvNTg4NFxuICAgICAgICAgIC8vICAgLSBodHRwczovL2dpdGh1Yi5jb20vdml0ZWpzL3ZpdGUvaXNzdWVzLzE5Njk1XG4gICAgICAgICAgLy8gICAtIGh0dHBzOi8vZ2l0aHViLmNvbS92aXRlanMvdml0ZS9pc3N1ZXMvMTIyMDlcbiAgICAgICAgICBtYW51YWxDaHVua3M6IChpZDogc3RyaW5nKSA9PiBpZC5zdGFydHNXaXRoKCdcXDBjb21tb25qc0hlbHBlcnMuanMnKSA/ICdjb21tb25qc0hlbHBlcnMnIDogbnVsbFxuICAgICAgICB9LFxuICAgICAgICBvbndhcm46ICh3YXJuaW5nOiByb2xsdXAuUm9sbHVwTG9nLCBkZWZhdWx0SGFuZGxlcjogcm9sbHVwLkxvZ2dpbmdGdW5jdGlvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGlnbm9yZUV2YWxXYXJuaW5nID0gW1xuICAgICAgICAgICAgJ2dlbmVyYXRlZC9qYXItcmVzb3VyY2VzL0Zsb3dDbGllbnQuanMnLFxuICAgICAgICAgICAgJ2dlbmVyYXRlZC9qYXItcmVzb3VyY2VzL3ZhYWRpbi1zcHJlYWRzaGVldC9zcHJlYWRzaGVldC1leHBvcnQuanMnLFxuICAgICAgICAgICAgJ0B2YWFkaW4vY2hhcnRzL3NyYy9oZWxwZXJzLmpzJ1xuICAgICAgICAgIF07XG4gICAgICAgICAgaWYgKHdhcm5pbmcuY29kZSA9PT0gJ0VWQUwnICYmIHdhcm5pbmcuaWQgJiYgISFpZ25vcmVFdmFsV2FybmluZy5maW5kKChpZCkgPT4gd2FybmluZy5pZD8uZW5kc1dpdGgoaWQpKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0SGFuZGxlcih3YXJuaW5nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgb3B0aW1pemVEZXBzOiB7XG4gICAgICBlc2J1aWxkT3B0aW9uczoge1xuICAgICAgICB0YXJnZXQsXG4gICAgICB9LFxuICAgICAgZW50cmllczogW1xuICAgICAgICAvLyBQcmUtc2NhbiBlbnRyeXBvaW50cyBpbiBWaXRlIHRvIGF2b2lkIHJlbG9hZGluZyBvbiBmaXJzdCBvcGVuXG4gICAgICAgICdnZW5lcmF0ZWQvdmFhZGluLnRzJ1xuICAgICAgXSxcbiAgICAgIGV4Y2x1ZGU6IFtcbiAgICAgICAgJ0B2YWFkaW4vcm91dGVyJyxcbiAgICAgICAgJ0B2YWFkaW4vdmFhZGluLWxpY2Vuc2UtY2hlY2tlcicsXG4gICAgICAgICdAdmFhZGluL3ZhYWRpbi11c2FnZS1zdGF0aXN0aWNzJyxcbiAgICAgICAgJ3dvcmtib3gtY29yZScsXG4gICAgICAgICd3b3JrYm94LXByZWNhY2hpbmcnLFxuICAgICAgICAnd29ya2JveC1yb3V0aW5nJyxcbiAgICAgICAgJ3dvcmtib3gtc3RyYXRlZ2llcydcbiAgICAgIF1cbiAgICB9LFxuICAgIHBsdWdpbnM6IFtcbiAgICAgIHByb2R1Y3Rpb25Nb2RlICYmIGJyb3RsaSgpLFxuICAgICAgZGV2TW9kZSAmJiB2YWFkaW5CdW5kbGVzUGx1Z2luKCksXG4gICAgICBkZXZNb2RlICYmIHNob3dSZWNvbXBpbGVSZWFzb24oKSxcbiAgICAgIHNldHRpbmdzLm9mZmxpbmVFbmFibGVkICYmIHNlcnZpY2VXb3JrZXJQbHVnaW4oe1xuICAgICAgICBzcmNQYXRoOiBzZXR0aW5ncy5jbGllbnRTZXJ2aWNlV29ya2VyU291cmNlLFxuICAgICAgfSksXG4gICAgICAhZGV2TW9kZSAmJiBzdGF0c0V4dHJhY3RlclBsdWdpbigpLFxuICAgICAgIXByb2R1Y3Rpb25Nb2RlICYmIHByZXNlcnZlVXNhZ2VTdGF0cygpLFxuICAgICAgdGhlbWVQbHVnaW4oeyBkZXZNb2RlIH0pLFxuICAgICAgcG9zdGNzc0xpdCh7XG4gICAgICAgIGluY2x1ZGU6IFsnKiovKi5jc3MnLCAvLipcXC8uKlxcLmNzc1xcPy4qL10sXG4gICAgICAgIGV4Y2x1ZGU6IFtcbiAgICAgICAgICBgJHt0aGVtZUZvbGRlcn0vKiovKi5jc3NgLFxuICAgICAgICAgIG5ldyBSZWdFeHAoYCR7dGhlbWVGb2xkZXJ9Ly4qLy4qXFxcXC5jc3NcXFxcPy4qYCksXG4gICAgICAgICAgYCR7dGhlbWVSZXNvdXJjZUZvbGRlcn0vKiovKi5jc3NgLFxuICAgICAgICAgIG5ldyBSZWdFeHAoYCR7dGhlbWVSZXNvdXJjZUZvbGRlcn0vLiovLipcXFxcLmNzc1xcXFw/LipgKSxcbiAgICAgICAgICBuZXcgUmVnRXhwKCcuKi8uKlxcXFw/aHRtbC1wcm94eS4qJylcbiAgICAgICAgXVxuICAgICAgfSksXG4gICAgICAvLyBUaGUgUmVhY3QgcGx1Z2luIHByb3ZpZGVzIGZhc3QgcmVmcmVzaCBhbmQgZGVidWcgc291cmNlIGluZm9cbiAgICAgIHJlYWN0UGx1Z2luKHtcbiAgICAgICAgaW5jbHVkZTogJyoqLyoudHN4JyxcbiAgICAgICAgYmFiZWw6IHtcbiAgICAgICAgICAvLyBXZSBuZWVkIHRvIHVzZSBiYWJlbCB0byBwcm92aWRlIHRoZSBzb3VyY2UgaW5mb3JtYXRpb24gZm9yIGl0IHRvIGJlIGNvcnJlY3RcbiAgICAgICAgICAvLyAob3RoZXJ3aXNlIEJhYmVsIHdpbGwgc2xpZ2h0bHkgcmV3cml0ZSB0aGUgc291cmNlIGZpbGUgYW5kIGVzYnVpbGQgZ2VuZXJhdGUgc291cmNlIGluZm8gZm9yIHRoZSBtb2RpZmllZCBmaWxlKVxuICAgICAgICAgIHByZXNldHM6IFtcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgJ0BiYWJlbC9wcmVzZXQtcmVhY3QnLFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcnVudGltZTogJ2F1dG9tYXRpYycsXG4gICAgICAgICAgICAgICAgaW1wb3J0U291cmNlOiBwcm9kdWN0aW9uTW9kZSA/ICdyZWFjdCcgOiAnRnJvbnRlbmQvZ2VuZXJhdGVkL2pzeC1kZXYtdHJhbnNmb3JtJyxcbiAgICAgICAgICAgICAgICBkZXZlbG9wbWVudDogIXByb2R1Y3Rpb25Nb2RlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICBdLFxuICAgICAgICAgIC8vIFJlYWN0IHdyaXRlcyB0aGUgc291cmNlIGxvY2F0aW9uIGZvciB3aGVyZSBjb21wb25lbnRzIGFyZSB1c2VkLCB0aGlzIHdyaXRlcyBmb3Igd2hlcmUgdGhleSBhcmUgZGVmaW5lZFxuICAgICAgICAgIHBsdWdpbnM6IFtcbiAgICAgICAgICAgICFwcm9kdWN0aW9uTW9kZSAmJiBhZGRGdW5jdGlvbkNvbXBvbmVudFNvdXJjZUxvY2F0aW9uQmFiZWwoKSxcbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgJ21vZHVsZTpAcHJlYWN0L3NpZ25hbHMtcmVhY3QtdHJhbnNmb3JtJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1vZGU6ICdhbGwnIC8vIE5lZWRlZCB0byBpbmNsdWRlIHRyYW5zbGF0aW9ucyB3aGljaCBkbyBub3QgdXNlIHNvbWV0aGluZy52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgXS5maWx0ZXIoQm9vbGVhbilcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBwcm9kdWN0aW9uTW9kZSAmJiB2YWFkaW5JMThuKHtcbiAgICAgICAgY3dkOiBfX2Rpcm5hbWUsXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICBvdXRwdXQ6IHtcbiAgICAgICAgICAgIGRpcjogaTE4bkZvbGRlcixcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSksXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICd2YWFkaW46Zm9yY2UtcmVtb3ZlLWh0bWwtbWlkZGxld2FyZScsXG4gICAgICAgIGNvbmZpZ3VyZVNlcnZlcihzZXJ2ZXIpIHtcbiAgICAgICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICAgICAgc2VydmVyLm1pZGRsZXdhcmVzLnN0YWNrID0gc2VydmVyLm1pZGRsZXdhcmVzLnN0YWNrLmZpbHRlcigobXcpID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgaGFuZGxlTmFtZSA9IGAke213LmhhbmRsZX1gO1xuICAgICAgICAgICAgICByZXR1cm4gIWhhbmRsZU5hbWUuaW5jbHVkZXMoJ3ZpdGVIdG1sRmFsbGJhY2tNaWRkbGV3YXJlJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGhhc0V4cG9ydGVkV2ViQ29tcG9uZW50cyAmJiB7XG4gICAgICAgIG5hbWU6ICd2YWFkaW46aW5qZWN0LWVudHJ5cG9pbnRzLXRvLXdlYi1jb21wb25lbnQtaHRtbCcsXG4gICAgICAgIHRyYW5zZm9ybUluZGV4SHRtbDoge1xuICAgICAgICAgIG9yZGVyOiAncHJlJyxcbiAgICAgICAgICBoYW5kbGVyKF9odG1sLCB7IHBhdGgsIHNlcnZlciB9KSB7XG4gICAgICAgICAgICBpZiAocGF0aCAhPT0gJy93ZWItY29tcG9uZW50Lmh0bWwnKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdHMgPSBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0YWc6ICdzY3JpcHQnLFxuICAgICAgICAgICAgICAgIGF0dHJzOiB7IHR5cGU6ICdtb2R1bGUnLCBzcmM6IGAvZ2VuZXJhdGVkL3ZhYWRpbi13ZWItY29tcG9uZW50LnRzYCB9LFxuICAgICAgICAgICAgICAgIGluamVjdFRvOiAnaGVhZCdcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcbiAgICAgICAgICAgIGlmIChjb21tZXJjaWFsQmFubmVyKSB7XG4gICAgICAgICAgICAgIHNjcmlwdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgdGFnOiAnc2NyaXB0JyxcbiAgICAgICAgICAgICAgICBhdHRyczogeyB0eXBlOiAnbW9kdWxlJywgc3JjOiAnL2dlbmVyYXRlZC9jb21tZXJjaWFsLWJhbm5lci5qcycgfSxcbiAgICAgICAgICAgICAgICBpbmplY3RUbzogJ2hlYWQnXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNjcmlwdHM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAndmFhZGluOmluamVjdC1lbnRyeXBvaW50cy10by1pbmRleC1odG1sJyxcbiAgICAgICAgdHJhbnNmb3JtSW5kZXhIdG1sOiB7XG4gICAgICAgICAgb3JkZXI6ICdwcmUnLFxuICAgICAgICAgIGhhbmRsZXIoX2h0bWwsIHsgcGF0aCwgc2VydmVyIH0pIHtcbiAgICAgICAgICAgIGlmIChwYXRoICE9PSAnL2luZGV4Lmh0bWwnKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc2NyaXB0cyA9IFtdO1xuXG4gICAgICAgICAgICBpZiAoZGV2TW9kZSkge1xuICAgICAgICAgICAgICBzY3JpcHRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHRhZzogJ3NjcmlwdCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdHlwZTogJ21vZHVsZScsIHNyYzogYC9nZW5lcmF0ZWQvdml0ZS1kZXZtb2RlLnRzYCwgb25lcnJvcjogXCJkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQoKVwiIH0sXG4gICAgICAgICAgICAgICAgaW5qZWN0VG86ICdoZWFkJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNjcmlwdHMucHVzaCh7XG4gICAgICAgICAgICAgIHRhZzogJ3NjcmlwdCcsXG4gICAgICAgICAgICAgIGF0dHJzOiB7IHR5cGU6ICdtb2R1bGUnLCBzcmM6ICcvZ2VuZXJhdGVkL3ZhYWRpbi50cycgfSxcbiAgICAgICAgICAgICAgaW5qZWN0VG86ICdoZWFkJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY29tbWVyY2lhbEJhbm5lcikge1xuICAgICAgICAgICAgICBzY3JpcHRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHRhZzogJ3NjcmlwdCcsXG4gICAgICAgICAgICAgICAgYXR0cnM6IHsgdHlwZTogJ21vZHVsZScsIHNyYzogJy9nZW5lcmF0ZWQvY29tbWVyY2lhbC1iYW5uZXIuanMnIH0sXG4gICAgICAgICAgICAgICAgaW5qZWN0VG86ICdoZWFkJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzY3JpcHRzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFxuICAgICAgY2hlY2tlcih7XG4gICAgICAgIHR5cGVzY3JpcHQ6IHRydWVcbiAgICAgIH0pLFxuICAgICAgcHJvZHVjdGlvbk1vZGUgJiYgdmlzdWFsaXplcih7IGJyb3RsaVNpemU6IHRydWUsIGZpbGVuYW1lOiBidW5kbGVTaXplRmlsZSB9KVxuICAgIF1cbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBvdmVycmlkZVZhYWRpbkNvbmZpZyA9IChjdXN0b21Db25maWc6IFVzZXJDb25maWdGbikgPT4ge1xuICByZXR1cm4gZGVmaW5lQ29uZmlnKChlbnYpID0+IG1lcmdlQ29uZmlnKHZhYWRpbkNvbmZpZyhlbnYpLCBjdXN0b21Db25maWcoZW52KSkpO1xufTtcbmZ1bmN0aW9uIGdldFZlcnNpb24obW9kdWxlOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBwYWNrYWdlSnNvbiA9IHBhdGgucmVzb2x2ZShub2RlTW9kdWxlc0ZvbGRlciwgbW9kdWxlLCAncGFja2FnZS5qc29uJyk7XG4gIHJldHVybiBKU09OLnBhcnNlKHJlYWRGaWxlU3luYyhwYWNrYWdlSnNvbiwgeyBlbmNvZGluZzogJ3V0Zi04JyB9KSkudmVyc2lvbjtcbn1cbmZ1bmN0aW9uIGdldEN2ZGxOYW1lKG1vZHVsZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgcGFja2FnZUpzb24gPSBwYXRoLnJlc29sdmUobm9kZU1vZHVsZXNGb2xkZXIsIG1vZHVsZSwgJ3BhY2thZ2UuanNvbicpO1xuICByZXR1cm4gSlNPTi5wYXJzZShyZWFkRmlsZVN5bmMocGFja2FnZUpzb24sIHsgZW5jb2Rpbmc6ICd1dGYtOCcgfSkpLmN2ZGxOYW1lO1xufVxuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSBIT01FL2hvbWVfVmFhZGluL3RhcmdldC9wbHVnaW5zL2FwcGxpY2F0aW9uLXRoZW1lLXBsdWdpblwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpbi90YXJnZXQvcGx1Z2lucy9hcHBsaWNhdGlvbi10aGVtZS1wbHVnaW4vdGhlbWUtaGFuZGxlLmpzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9ob21lL3dvcmtzcGFjZS9EU3F1YXJlJTIwSE9NRS9ob21lX1ZhYWRpbi90YXJnZXQvcGx1Z2lucy9hcHBsaWNhdGlvbi10aGVtZS1wbHVnaW4vdGhlbWUtaGFuZGxlLmpzXCI7LypcbiAqIENvcHlyaWdodCAyMDAwLTIwMjUgVmFhZGluIEx0ZC5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdFxuICogdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2ZcbiAqIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUXG4gKiBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuIFNlZSB0aGVcbiAqIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zIHVuZGVyXG4gKiB0aGUgTGljZW5zZS5cbiAqL1xuXG4vKipcbiAqIFRoaXMgZmlsZSBjb250YWlucyBmdW5jdGlvbnMgZm9yIGxvb2sgdXAgYW5kIGhhbmRsZSB0aGUgdGhlbWUgcmVzb3VyY2VzXG4gKiBmb3IgYXBwbGljYXRpb24gdGhlbWUgcGx1Z2luLlxuICovXG5pbXBvcnQgeyBleGlzdHNTeW5jLCByZWFkRmlsZVN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyB3cml0ZVRoZW1lRmlsZXMgfSBmcm9tICcuL3RoZW1lLWdlbmVyYXRvci5qcyc7XG5pbXBvcnQgeyBjb3B5U3RhdGljQXNzZXRzLCBjb3B5VGhlbWVSZXNvdXJjZXMgfSBmcm9tICcuL3RoZW1lLWNvcHkuanMnO1xuXG4vLyBtYXRjaGVzIHRoZW1lIG5hbWUgaW4gJy4vdGhlbWUtbXktdGhlbWUuZ2VuZXJhdGVkLmpzJ1xuY29uc3QgbmFtZVJlZ2V4ID0gL3RoZW1lLSguKilcXC5nZW5lcmF0ZWRcXC5qcy87XG5cbmxldCBwcmV2VGhlbWVOYW1lID0gdW5kZWZpbmVkO1xubGV0IGZpcnN0VGhlbWVOYW1lID0gdW5kZWZpbmVkO1xuXG4vKipcbiAqIExvb2tzIHVwIGZvciBhIHRoZW1lIHJlc291cmNlcyBpbiBhIGN1cnJlbnQgcHJvamVjdCBhbmQgaW4gamFyIGRlcGVuZGVuY2llcyxcbiAqIGNvcGllcyB0aGUgZm91bmQgcmVzb3VyY2VzIGFuZCBnZW5lcmF0ZXMvdXBkYXRlcyBtZXRhIGRhdGEgZm9yIHdlYnBhY2tcbiAqIGNvbXBpbGF0aW9uLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIGFwcGxpY2F0aW9uIHRoZW1lIHBsdWdpbiBtYW5kYXRvcnkgb3B0aW9ucyxcbiAqIEBzZWUge0BsaW5rIEFwcGxpY2F0aW9uVGhlbWVQbHVnaW59XG4gKlxuICogQHBhcmFtIGxvZ2dlciBhcHBsaWNhdGlvbiB0aGVtZSBwbHVnaW4gbG9nZ2VyXG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NUaGVtZVJlc291cmNlcyhvcHRpb25zLCBsb2dnZXIpIHtcbiAgY29uc3QgdGhlbWVOYW1lID0gZXh0cmFjdFRoZW1lTmFtZShvcHRpb25zLmZyb250ZW5kR2VuZXJhdGVkRm9sZGVyKTtcbiAgaWYgKHRoZW1lTmFtZSkge1xuICAgIGlmICghcHJldlRoZW1lTmFtZSAmJiAhZmlyc3RUaGVtZU5hbWUpIHtcbiAgICAgIGZpcnN0VGhlbWVOYW1lID0gdGhlbWVOYW1lO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICAocHJldlRoZW1lTmFtZSAmJiBwcmV2VGhlbWVOYW1lICE9PSB0aGVtZU5hbWUgJiYgZmlyc3RUaGVtZU5hbWUgIT09IHRoZW1lTmFtZSkgfHxcbiAgICAgICghcHJldlRoZW1lTmFtZSAmJiBmaXJzdFRoZW1lTmFtZSAhPT0gdGhlbWVOYW1lKVxuICAgICkge1xuICAgICAgLy8gV2FybmluZyBtZXNzYWdlIGlzIHNob3duIHRvIHRoZSBkZXZlbG9wZXIgd2hlbjpcbiAgICAgIC8vIDEuIEhlIGlzIHN3aXRjaGluZyB0byBhbnkgdGhlbWUsIHdoaWNoIGlzIGRpZmZlciBmcm9tIG9uZSBiZWluZyBzZXQgdXBcbiAgICAgIC8vIG9uIGFwcGxpY2F0aW9uIHN0YXJ0dXAsIGJ5IGNoYW5naW5nIHRoZW1lIG5hbWUgaW4gYEBUaGVtZSgpYFxuICAgICAgLy8gMi4gSGUgcmVtb3ZlcyBvciBjb21tZW50cyBvdXQgYEBUaGVtZSgpYCB0byBzZWUgaG93IHRoZSBhcHBcbiAgICAgIC8vIGxvb2tzIGxpa2Ugd2l0aG91dCB0aGVtaW5nLCBhbmQgdGhlbiBhZ2FpbiBicmluZ3MgYEBUaGVtZSgpYCBiYWNrXG4gICAgICAvLyB3aXRoIGEgdGhlbWVOYW1lIHdoaWNoIGlzIGRpZmZlciBmcm9tIG9uZSBiZWluZyBzZXQgdXAgb24gYXBwbGljYXRpb25cbiAgICAgIC8vIHN0YXJ0dXAuXG4gICAgICBjb25zdCB3YXJuaW5nID0gYEF0dGVudGlvbjogQWN0aXZlIHRoZW1lIGlzIHN3aXRjaGVkIHRvICcke3RoZW1lTmFtZX0nLmA7XG4gICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGBcbiAgICAgIE5vdGUgdGhhdCBhZGRpbmcgbmV3IHN0eWxlIHNoZWV0IGZpbGVzIHRvICcvdGhlbWVzLyR7dGhlbWVOYW1lfS9jb21wb25lbnRzJywgXG4gICAgICBtYXkgbm90IGJlIHRha2VuIGludG8gZWZmZWN0IHVudGlsIHRoZSBuZXh0IGFwcGxpY2F0aW9uIHJlc3RhcnQuXG4gICAgICBDaGFuZ2VzIHRvIGFscmVhZHkgZXhpc3Rpbmcgc3R5bGUgc2hlZXQgZmlsZXMgYXJlIGJlaW5nIHJlbG9hZGVkIGFzIGJlZm9yZS5gO1xuICAgICAgbG9nZ2VyLndhcm4oJyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKionKTtcbiAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcpO1xuICAgICAgbG9nZ2VyLndhcm4oZGVzY3JpcHRpb24pO1xuICAgICAgbG9nZ2VyLndhcm4oJyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKionKTtcbiAgICB9XG4gICAgcHJldlRoZW1lTmFtZSA9IHRoZW1lTmFtZTtcblxuICAgIGZpbmRUaGVtZUZvbGRlckFuZEhhbmRsZVRoZW1lKHRoZW1lTmFtZSwgb3B0aW9ucywgbG9nZ2VyKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBUaGlzIGlzIG5lZWRlZCBpbiB0aGUgc2l0dWF0aW9uIHRoYXQgdGhlIHVzZXIgZGVjaWRlcyB0byBjb21tZW50IG9yXG4gICAgLy8gcmVtb3ZlIHRoZSBAVGhlbWUoLi4uKSBjb21wbGV0ZWx5IHRvIHNlZSBob3cgdGhlIGFwcGxpY2F0aW9uIGxvb2tzXG4gICAgLy8gd2l0aG91dCBhbnkgdGhlbWUuIFRoZW4gd2hlbiB0aGUgdXNlciBicmluZ3MgYmFjayBvbmUgb2YgdGhlIHRoZW1lcyxcbiAgICAvLyB0aGUgcHJldmlvdXMgdGhlbWUgc2hvdWxkIGJlIHVuZGVmaW5lZCB0byBlbmFibGUgdXMgdG8gZGV0ZWN0IHRoZSBjaGFuZ2UuXG4gICAgcHJldlRoZW1lTmFtZSA9IHVuZGVmaW5lZDtcbiAgICBsb2dnZXIuZGVidWcoJ1NraXBwaW5nIFZhYWRpbiBhcHBsaWNhdGlvbiB0aGVtZSBoYW5kbGluZy4nKTtcbiAgICBsb2dnZXIudHJhY2UoJ01vc3QgbGlrZWx5IG5vIEBUaGVtZSBhbm5vdGF0aW9uIGZvciBhcHBsaWNhdGlvbiBvciBvbmx5IHRoZW1lQ2xhc3MgdXNlZC4nKTtcbiAgfVxufVxuXG4vKipcbiAqIFNlYXJjaCBmb3IgdGhlIGdpdmVuIHRoZW1lIGluIHRoZSBwcm9qZWN0IGFuZCByZXNvdXJjZSBmb2xkZXJzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aGVtZU5hbWUgbmFtZSBvZiB0aGVtZSB0byBmaW5kXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyBhcHBsaWNhdGlvbiB0aGVtZSBwbHVnaW4gbWFuZGF0b3J5IG9wdGlvbnMsXG4gKiBAc2VlIHtAbGluayBBcHBsaWNhdGlvblRoZW1lUGx1Z2lufVxuICogQHBhcmFtIGxvZ2dlciBhcHBsaWNhdGlvbiB0aGVtZSBwbHVnaW4gbG9nZ2VyXG4gKiBAcmV0dXJuIHRydWUgb3IgZmFsc2UgZm9yIGlmIHRoZW1lIHdhcyBmb3VuZFxuICovXG5mdW5jdGlvbiBmaW5kVGhlbWVGb2xkZXJBbmRIYW5kbGVUaGVtZSh0aGVtZU5hbWUsIG9wdGlvbnMsIGxvZ2dlcikge1xuICBsZXQgdGhlbWVGb3VuZCA9IGZhbHNlO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG9wdGlvbnMudGhlbWVQcm9qZWN0Rm9sZGVycy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHRoZW1lUHJvamVjdEZvbGRlciA9IG9wdGlvbnMudGhlbWVQcm9qZWN0Rm9sZGVyc1tpXTtcbiAgICBpZiAoZXhpc3RzU3luYyh0aGVtZVByb2plY3RGb2xkZXIpKSB7XG4gICAgICBsb2dnZXIuZGVidWcoXCJTZWFyY2hpbmcgdGhlbWVzIGZvbGRlciAnXCIgKyB0aGVtZVByb2plY3RGb2xkZXIgKyBcIicgZm9yIHRoZW1lICdcIiArIHRoZW1lTmFtZSArIFwiJ1wiKTtcbiAgICAgIGNvbnN0IGhhbmRsZWQgPSBoYW5kbGVUaGVtZXModGhlbWVOYW1lLCB0aGVtZVByb2plY3RGb2xkZXIsIG9wdGlvbnMsIGxvZ2dlcik7XG4gICAgICBpZiAoaGFuZGxlZCkge1xuICAgICAgICBpZiAodGhlbWVGb3VuZCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIFwiRm91bmQgdGhlbWUgZmlsZXMgaW4gJ1wiICtcbiAgICAgICAgICAgICAgdGhlbWVQcm9qZWN0Rm9sZGVyICtcbiAgICAgICAgICAgICAgXCInIGFuZCAnXCIgK1xuICAgICAgICAgICAgICB0aGVtZUZvdW5kICtcbiAgICAgICAgICAgICAgXCInLiBUaGVtZSBzaG91bGQgb25seSBiZSBhdmFpbGFibGUgaW4gb25lIGZvbGRlclwiXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIuZGVidWcoXCJGb3VuZCB0aGVtZSBmaWxlcyBmcm9tICdcIiArIHRoZW1lUHJvamVjdEZvbGRlciArIFwiJ1wiKTtcbiAgICAgICAgdGhlbWVGb3VuZCA9IHRoZW1lUHJvamVjdEZvbGRlcjtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoZXhpc3RzU3luYyhvcHRpb25zLnRoZW1lUmVzb3VyY2VGb2xkZXIpKSB7XG4gICAgaWYgKHRoZW1lRm91bmQgJiYgZXhpc3RzU3luYyhyZXNvbHZlKG9wdGlvbnMudGhlbWVSZXNvdXJjZUZvbGRlciwgdGhlbWVOYW1lKSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJUaGVtZSAnXCIgK1xuICAgICAgICAgIHRoZW1lTmFtZSArXG4gICAgICAgICAgXCInc2hvdWxkIG5vdCBleGlzdCBpbnNpZGUgYSBqYXIgYW5kIGluIHRoZSBwcm9qZWN0IGF0IHRoZSBzYW1lIHRpbWVcXG5cIiArXG4gICAgICAgICAgJ0V4dGVuZGluZyBhbm90aGVyIHRoZW1lIGlzIHBvc3NpYmxlIGJ5IGFkZGluZyB7IFwicGFyZW50XCI6IFwibXktcGFyZW50LXRoZW1lXCIgfSBlbnRyeSB0byB0aGUgdGhlbWUuanNvbiBmaWxlIGluc2lkZSB5b3VyIHRoZW1lIGZvbGRlci4nXG4gICAgICApO1xuICAgIH1cbiAgICBsb2dnZXIuZGVidWcoXG4gICAgICBcIlNlYXJjaGluZyB0aGVtZSBqYXIgcmVzb3VyY2UgZm9sZGVyICdcIiArIG9wdGlvbnMudGhlbWVSZXNvdXJjZUZvbGRlciArIFwiJyBmb3IgdGhlbWUgJ1wiICsgdGhlbWVOYW1lICsgXCInXCJcbiAgICApO1xuICAgIGhhbmRsZVRoZW1lcyh0aGVtZU5hbWUsIG9wdGlvbnMudGhlbWVSZXNvdXJjZUZvbGRlciwgb3B0aW9ucywgbG9nZ2VyKTtcbiAgICB0aGVtZUZvdW5kID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gdGhlbWVGb3VuZDtcbn1cblxuLyoqXG4gKiBDb3BpZXMgc3RhdGljIHJlc291cmNlcyBmb3IgdGhlbWUgYW5kIGdlbmVyYXRlcy93cml0ZXMgdGhlXG4gKiBbdGhlbWUtbmFtZV0uZ2VuZXJhdGVkLmpzIGZvciB3ZWJwYWNrIHRvIGhhbmRsZS5cbiAqXG4gKiBOb3RlISBJZiBhIHBhcmVudCB0aGVtZSBpcyBkZWZpbmVkIGl0IHdpbGwgYWxzbyBiZSBoYW5kbGVkIGhlcmUgc28gdGhhdCB0aGUgcGFyZW50IHRoZW1lIGdlbmVyYXRlZCBmaWxlIGlzXG4gKiBnZW5lcmF0ZWQgaW4gYWR2YW5jZSBvZiB0aGUgdGhlbWUgZ2VuZXJhdGVkIGZpbGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRoZW1lTmFtZSBuYW1lIG9mIHRoZW1lIHRvIGhhbmRsZVxuICogQHBhcmFtIHtzdHJpbmd9IHRoZW1lc0ZvbGRlciBmb2xkZXIgY29udGFpbmluZyBhcHBsaWNhdGlvbiB0aGVtZSBmb2xkZXJzXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyBhcHBsaWNhdGlvbiB0aGVtZSBwbHVnaW4gbWFuZGF0b3J5IG9wdGlvbnMsXG4gKiBAc2VlIHtAbGluayBBcHBsaWNhdGlvblRoZW1lUGx1Z2lufVxuICogQHBhcmFtIHtvYmplY3R9IGxvZ2dlciBwbHVnaW4gbG9nZ2VyIGluc3RhbmNlXG4gKlxuICogQHRocm93cyBFcnJvciBpZiBwYXJlbnQgdGhlbWUgZGVmaW5lZCwgYnV0IGNhbid0IGxvY2F0ZSBwYXJlbnQgdGhlbWVcbiAqXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZW1lIHdhcyBmb3VuZCBlbHNlIGZhbHNlLlxuICovXG5mdW5jdGlvbiBoYW5kbGVUaGVtZXModGhlbWVOYW1lLCB0aGVtZXNGb2xkZXIsIG9wdGlvbnMsIGxvZ2dlcikge1xuICBjb25zdCB0aGVtZUZvbGRlciA9IHJlc29sdmUodGhlbWVzRm9sZGVyLCB0aGVtZU5hbWUpO1xuICBpZiAoZXhpc3RzU3luYyh0aGVtZUZvbGRlcikpIHtcbiAgICBsb2dnZXIuZGVidWcoJ0ZvdW5kIHRoZW1lICcsIHRoZW1lTmFtZSwgJyBpbiBmb2xkZXIgJywgdGhlbWVGb2xkZXIpO1xuXG4gICAgY29uc3QgdGhlbWVQcm9wZXJ0aWVzID0gZ2V0VGhlbWVQcm9wZXJ0aWVzKHRoZW1lRm9sZGVyKTtcblxuICAgIC8vIElmIHRoZW1lIGhhcyBwYXJlbnQgaGFuZGxlIHBhcmVudCB0aGVtZSBpbW1lZGlhdGVseS5cbiAgICBpZiAodGhlbWVQcm9wZXJ0aWVzLnBhcmVudCkge1xuICAgICAgY29uc3QgZm91bmQgPSBmaW5kVGhlbWVGb2xkZXJBbmRIYW5kbGVUaGVtZSh0aGVtZVByb3BlcnRpZXMucGFyZW50LCBvcHRpb25zLCBsb2dnZXIpO1xuICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgXCJDb3VsZCBub3QgbG9jYXRlIGZpbGVzIGZvciBkZWZpbmVkIHBhcmVudCB0aGVtZSAnXCIgK1xuICAgICAgICAgICAgdGhlbWVQcm9wZXJ0aWVzLnBhcmVudCArXG4gICAgICAgICAgICBcIicuXFxuXCIgK1xuICAgICAgICAgICAgJ1BsZWFzZSB2ZXJpZnkgdGhhdCBkZXBlbmRlbmN5IGlzIGFkZGVkIG9yIHRoZW1lIGZvbGRlciBleGlzdHMuJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBjb3B5U3RhdGljQXNzZXRzKHRoZW1lTmFtZSwgdGhlbWVQcm9wZXJ0aWVzLCBvcHRpb25zLnByb2plY3RTdGF0aWNBc3NldHNPdXRwdXRGb2xkZXIsIGxvZ2dlcik7XG4gICAgY29weVRoZW1lUmVzb3VyY2VzKHRoZW1lRm9sZGVyLCBvcHRpb25zLnByb2plY3RTdGF0aWNBc3NldHNPdXRwdXRGb2xkZXIsIGxvZ2dlcik7XG5cbiAgICB3cml0ZVRoZW1lRmlsZXModGhlbWVGb2xkZXIsIHRoZW1lTmFtZSwgdGhlbWVQcm9wZXJ0aWVzLCBvcHRpb25zKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGdldFRoZW1lUHJvcGVydGllcyh0aGVtZUZvbGRlcikge1xuICBjb25zdCB0aGVtZVByb3BlcnR5RmlsZSA9IHJlc29sdmUodGhlbWVGb2xkZXIsICd0aGVtZS5qc29uJyk7XG4gIGlmICghZXhpc3RzU3luYyh0aGVtZVByb3BlcnR5RmlsZSkpIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgY29uc3QgdGhlbWVQcm9wZXJ0eUZpbGVBc1N0cmluZyA9IHJlYWRGaWxlU3luYyh0aGVtZVByb3BlcnR5RmlsZSk7XG4gIGlmICh0aGVtZVByb3BlcnR5RmlsZUFzU3RyaW5nLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuICByZXR1cm4gSlNPTi5wYXJzZSh0aGVtZVByb3BlcnR5RmlsZUFzU3RyaW5nKTtcbn1cblxuLyoqXG4gKiBFeHRyYWN0cyBjdXJyZW50IHRoZW1lIG5hbWUgZnJvbSBhdXRvLWdlbmVyYXRlZCAndGhlbWUuanMnIGZpbGUgbG9jYXRlZCBvbiBhXG4gKiBnaXZlbiBmb2xkZXIuXG4gKiBAcGFyYW0gZnJvbnRlbmRHZW5lcmF0ZWRGb2xkZXIgZm9sZGVyIGluIHByb2plY3QgY29udGFpbmluZyAndGhlbWUuanMnIGZpbGVcbiAqIEByZXR1cm5zIHtzdHJpbmd9IGN1cnJlbnQgdGhlbWUgbmFtZVxuICovXG5mdW5jdGlvbiBleHRyYWN0VGhlbWVOYW1lKGZyb250ZW5kR2VuZXJhdGVkRm9sZGVyKSB7XG4gIGlmICghZnJvbnRlbmRHZW5lcmF0ZWRGb2xkZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIkNvdWxkbid0IGV4dHJhY3QgdGhlbWUgbmFtZSBmcm9tICd0aGVtZS5qcycsXCIgK1xuICAgICAgICAnIGJlY2F1c2UgdGhlIHBhdGggdG8gZm9sZGVyIGNvbnRhaW5pbmcgdGhpcyBmaWxlIGlzIGVtcHR5LiBQbGVhc2Ugc2V0JyArXG4gICAgICAgICcgdGhlIGEgY29ycmVjdCBmb2xkZXIgcGF0aCBpbiBBcHBsaWNhdGlvblRoZW1lUGx1Z2luIGNvbnN0cnVjdG9yJyArXG4gICAgICAgICcgcGFyYW1ldGVycy4nXG4gICAgKTtcbiAgfVxuICBjb25zdCBnZW5lcmF0ZWRUaGVtZUZpbGUgPSByZXNvbHZlKGZyb250ZW5kR2VuZXJhdGVkRm9sZGVyLCAndGhlbWUuanMnKTtcbiAgaWYgKGV4aXN0c1N5bmMoZ2VuZXJhdGVkVGhlbWVGaWxlKSkge1xuICAgIC8vIHJlYWQgdGhlbWUgbmFtZSBmcm9tIHRoZSAnZ2VuZXJhdGVkL3RoZW1lLmpzJyBhcyB0aGVyZSB3ZSBhbHdheXNcbiAgICAvLyBtYXJrIHRoZSB1c2VkIHRoZW1lIGZvciB3ZWJwYWNrIHRvIGhhbmRsZS5cbiAgICBjb25zdCB0aGVtZU5hbWUgPSBuYW1lUmVnZXguZXhlYyhyZWFkRmlsZVN5bmMoZ2VuZXJhdGVkVGhlbWVGaWxlLCB7IGVuY29kaW5nOiAndXRmOCcgfSkpWzFdO1xuICAgIGlmICghdGhlbWVOYW1lKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBwYXJzZSB0aGVtZSBuYW1lIGZyb20gJ1wiICsgZ2VuZXJhdGVkVGhlbWVGaWxlICsgXCInLlwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoZW1lTmFtZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbn1cblxuLyoqXG4gKiBGaW5kcyBhbGwgdGhlIHBhcmVudCB0aGVtZXMgbG9jYXRlZCBpbiB0aGUgcHJvamVjdCB0aGVtZXMgZm9sZGVycyBhbmQgaW5cbiAqIHRoZSBKQVIgZGVwZW5kZW5jaWVzIHdpdGggcmVzcGVjdCB0byB0aGUgZ2l2ZW4gY3VzdG9tIHRoZW1lIHdpdGhcbiAqIHtAY29kZSB0aGVtZU5hbWV9LlxuICogQHBhcmFtIHtzdHJpbmd9IHRoZW1lTmFtZSBnaXZlbiBjdXN0b20gdGhlbWUgbmFtZSB0byBsb29rIHBhcmVudHMgZm9yXG4gKiBAcGFyYW0ge29iamVjdH0gb3B0aW9ucyBhcHBsaWNhdGlvbiB0aGVtZSBwbHVnaW4gbWFuZGF0b3J5IG9wdGlvbnMsXG4gKiBAc2VlIHtAbGluayBBcHBsaWNhdGlvblRoZW1lUGx1Z2lufVxuICogQHJldHVybnMge3N0cmluZ1tdfSBhcnJheSBvZiBwYXRocyB0byBmb3VuZCBwYXJlbnQgdGhlbWVzIHdpdGggcmVzcGVjdCB0byB0aGVcbiAqIGdpdmVuIGN1c3RvbSB0aGVtZVxuICovXG5mdW5jdGlvbiBmaW5kUGFyZW50VGhlbWVzKHRoZW1lTmFtZSwgb3B0aW9ucykge1xuICBjb25zdCBleGlzdGluZ1RoZW1lRm9sZGVycyA9IFtvcHRpb25zLnRoZW1lUmVzb3VyY2VGb2xkZXIsIC4uLm9wdGlvbnMudGhlbWVQcm9qZWN0Rm9sZGVyc10uZmlsdGVyKChmb2xkZXIpID0+XG4gICAgZXhpc3RzU3luYyhmb2xkZXIpXG4gICk7XG4gIHJldHVybiBjb2xsZWN0UGFyZW50VGhlbWVzKHRoZW1lTmFtZSwgZXhpc3RpbmdUaGVtZUZvbGRlcnMsIGZhbHNlKTtcbn1cblxuZnVuY3Rpb24gY29sbGVjdFBhcmVudFRoZW1lcyh0aGVtZU5hbWUsIHRoZW1lRm9sZGVycywgaXNQYXJlbnQpIHtcbiAgbGV0IGZvdW5kUGFyZW50VGhlbWVzID0gW107XG4gIHRoZW1lRm9sZGVycy5mb3JFYWNoKChmb2xkZXIpID0+IHtcbiAgICBjb25zdCB0aGVtZUZvbGRlciA9IHJlc29sdmUoZm9sZGVyLCB0aGVtZU5hbWUpO1xuICAgIGlmIChleGlzdHNTeW5jKHRoZW1lRm9sZGVyKSkge1xuICAgICAgY29uc3QgdGhlbWVQcm9wZXJ0aWVzID0gZ2V0VGhlbWVQcm9wZXJ0aWVzKHRoZW1lRm9sZGVyKTtcblxuICAgICAgaWYgKHRoZW1lUHJvcGVydGllcy5wYXJlbnQpIHtcbiAgICAgICAgZm91bmRQYXJlbnRUaGVtZXMucHVzaCguLi5jb2xsZWN0UGFyZW50VGhlbWVzKHRoZW1lUHJvcGVydGllcy5wYXJlbnQsIHRoZW1lRm9sZGVycywgdHJ1ZSkpO1xuICAgICAgICBpZiAoIWZvdW5kUGFyZW50VGhlbWVzLmxlbmd0aCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIFwiQ291bGQgbm90IGxvY2F0ZSBmaWxlcyBmb3IgZGVmaW5lZCBwYXJlbnQgdGhlbWUgJ1wiICtcbiAgICAgICAgICAgICAgdGhlbWVQcm9wZXJ0aWVzLnBhcmVudCArXG4gICAgICAgICAgICAgIFwiJy5cXG5cIiArXG4gICAgICAgICAgICAgICdQbGVhc2UgdmVyaWZ5IHRoYXQgZGVwZW5kZW5jeSBpcyBhZGRlZCBvciB0aGVtZSBmb2xkZXIgZXhpc3RzLidcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBBZGQgYSB0aGVtZSBwYXRoIHRvIHJlc3VsdCBjb2xsZWN0aW9uIG9ubHkgaWYgYSBnaXZlbiB0aGVtZU5hbWVcbiAgICAgIC8vIGlzIHN1cHBvc2VkIHRvIGJlIGEgcGFyZW50IHRoZW1lXG4gICAgICBpZiAoaXNQYXJlbnQpIHtcbiAgICAgICAgZm91bmRQYXJlbnRUaGVtZXMucHVzaCh0aGVtZUZvbGRlcik7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGZvdW5kUGFyZW50VGhlbWVzO1xufVxuXG5leHBvcnQgeyBwcm9jZXNzVGhlbWVSZXNvdXJjZXMsIGV4dHJhY3RUaGVtZU5hbWUsIGZpbmRQYXJlbnRUaGVtZXMgfTtcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpbi90YXJnZXQvcGx1Z2lucy9hcHBsaWNhdGlvbi10aGVtZS1wbHVnaW5cIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIi9ob21lL3dvcmtzcGFjZS9EU3F1YXJlIEhPTUUvaG9tZV9WYWFkaW4vdGFyZ2V0L3BsdWdpbnMvYXBwbGljYXRpb24tdGhlbWUtcGx1Z2luL3RoZW1lLWdlbmVyYXRvci5qc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSUyMEhPTUUvaG9tZV9WYWFkaW4vdGFyZ2V0L3BsdWdpbnMvYXBwbGljYXRpb24tdGhlbWUtcGx1Z2luL3RoZW1lLWdlbmVyYXRvci5qc1wiOy8qXG4gKiBDb3B5cmlnaHQgMjAwMC0yMDI1IFZhYWRpbiBMdGQuXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3RcbiAqIHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mXG4gKiB0aGUgTGljZW5zZSBhdFxuICpcbiAqIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVFxuICogV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlXG4gKiBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlclxuICogdGhlIExpY2Vuc2UuXG4gKi9cblxuLyoqXG4gKiBUaGlzIGZpbGUgaGFuZGxlcyB0aGUgZ2VuZXJhdGlvbiBvZiB0aGUgJ1t0aGVtZS1uYW1lXS5qcycgdG9cbiAqIHRoZSB0aGVtZXMvW3RoZW1lLW5hbWVdIGZvbGRlciBhY2NvcmRpbmcgdG8gcHJvcGVydGllcyBmcm9tICd0aGVtZS5qc29uJy5cbiAqL1xuaW1wb3J0IHsgZ2xvYlN5bmMgfSBmcm9tICdnbG9iJztcbmltcG9ydCB7IHJlc29sdmUsIGJhc2VuYW1lIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBleGlzdHNTeW5jLCByZWFkRmlsZVN5bmMsIHdyaXRlRmlsZVN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgeyBjaGVja01vZHVsZXMgfSBmcm9tICcuL3RoZW1lLWNvcHkuanMnO1xuXG4vLyBTcGVjaWFsIGZvbGRlciBpbnNpZGUgYSB0aGVtZSBmb3IgY29tcG9uZW50IHRoZW1lcyB0aGF0IGdvIGluc2lkZSB0aGUgY29tcG9uZW50IHNoYWRvdyByb290XG5jb25zdCB0aGVtZUNvbXBvbmVudHNGb2xkZXIgPSAnY29tcG9uZW50cyc7XG4vLyBUaGUgY29udGVudHMgb2YgYSBnbG9iYWwgQ1NTIGZpbGUgd2l0aCB0aGlzIG5hbWUgaW4gYSB0aGVtZSBpcyBhbHdheXMgYWRkZWQgdG9cbi8vIHRoZSBkb2N1bWVudC4gRS5nLiBAZm9udC1mYWNlIG11c3QgYmUgaW4gdGhpc1xuY29uc3QgZG9jdW1lbnRDc3NGaWxlbmFtZSA9ICdkb2N1bWVudC5jc3MnO1xuLy8gc3R5bGVzLmNzcyBpcyB0aGUgb25seSBlbnRyeXBvaW50IGNzcyBmaWxlIHdpdGggZG9jdW1lbnQuY3NzLiBFdmVyeXRoaW5nIGVsc2Ugc2hvdWxkIGJlIGltcG9ydGVkIHVzaW5nIGNzcyBAaW1wb3J0XG5jb25zdCBzdHlsZXNDc3NGaWxlbmFtZSA9ICdzdHlsZXMuY3NzJztcblxuY29uc3QgQ1NTSU1QT1JUX0NPTU1FTlQgPSAnQ1NTSW1wb3J0IGVuZCc7XG5jb25zdCBoZWFkZXJJbXBvcnQgPSBgaW1wb3J0ICdjb25zdHJ1Y3Qtc3R5bGUtc2hlZXRzLXBvbHlmaWxsJztcbmA7XG5cbi8qKlxuICogR2VuZXJhdGUgdGhlIFt0aGVtZU5hbWVdLmpzIGZpbGUgZm9yIHRoZW1lRm9sZGVyIHdoaWNoIGNvbGxlY3RzIGFsbCByZXF1aXJlZCBpbmZvcm1hdGlvbiBmcm9tIHRoZSBmb2xkZXIuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRoZW1lRm9sZGVyIGZvbGRlciBvZiB0aGUgdGhlbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aGVtZU5hbWUgbmFtZSBvZiB0aGUgaGFuZGxlZCB0aGVtZVxuICogQHBhcmFtIHtKU09OfSB0aGVtZVByb3BlcnRpZXMgY29udGVudCBvZiB0aGVtZS5qc29uXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyBidWlsZCBvcHRpb25zIChlLmcuIHByb2Qgb3IgZGV2IG1vZGUpXG4gKiBAcmV0dXJucyB7c3RyaW5nfSB0aGVtZSBmaWxlIGNvbnRlbnRcbiAqL1xuZnVuY3Rpb24gd3JpdGVUaGVtZUZpbGVzKHRoZW1lRm9sZGVyLCB0aGVtZU5hbWUsIHRoZW1lUHJvcGVydGllcywgb3B0aW9ucykge1xuICBjb25zdCBwcm9kdWN0aW9uTW9kZSA9ICFvcHRpb25zLmRldk1vZGU7XG4gIGNvbnN0IHVzZURldlNlcnZlck9ySW5Qcm9kdWN0aW9uTW9kZSA9ICFvcHRpb25zLnVzZURldkJ1bmRsZTtcbiAgY29uc3Qgb3V0cHV0Rm9sZGVyID0gb3B0aW9ucy5mcm9udGVuZEdlbmVyYXRlZEZvbGRlcjtcbiAgY29uc3Qgc3R5bGVzID0gcmVzb2x2ZSh0aGVtZUZvbGRlciwgc3R5bGVzQ3NzRmlsZW5hbWUpO1xuICBjb25zdCBkb2N1bWVudENzc0ZpbGUgPSByZXNvbHZlKHRoZW1lRm9sZGVyLCBkb2N1bWVudENzc0ZpbGVuYW1lKTtcbiAgY29uc3QgYXV0b0luamVjdENvbXBvbmVudHMgPSB0aGVtZVByb3BlcnRpZXMuYXV0b0luamVjdENvbXBvbmVudHMgPz8gdHJ1ZTtcbiAgY29uc3QgYXV0b0luamVjdEdsb2JhbENzc0ltcG9ydHMgPSB0aGVtZVByb3BlcnRpZXMuYXV0b0luamVjdEdsb2JhbENzc0ltcG9ydHMgPz8gZmFsc2U7XG4gIGNvbnN0IGdsb2JhbEZpbGVuYW1lID0gJ3RoZW1lLScgKyB0aGVtZU5hbWUgKyAnLmdsb2JhbC5nZW5lcmF0ZWQuanMnO1xuICBjb25zdCBjb21wb25lbnRzRmlsZW5hbWUgPSAndGhlbWUtJyArIHRoZW1lTmFtZSArICcuY29tcG9uZW50cy5nZW5lcmF0ZWQuanMnO1xuICBjb25zdCB0aGVtZUZpbGVuYW1lID0gJ3RoZW1lLScgKyB0aGVtZU5hbWUgKyAnLmdlbmVyYXRlZC5qcyc7XG5cbiAgbGV0IHRoZW1lRmlsZUNvbnRlbnQgPSBoZWFkZXJJbXBvcnQ7XG4gIGxldCBnbG9iYWxJbXBvcnRDb250ZW50ID0gJy8vIFdoZW4gdGhpcyBmaWxlIGlzIGltcG9ydGVkLCBnbG9iYWwgc3R5bGVzIGFyZSBhdXRvbWF0aWNhbGx5IGFwcGxpZWRcXG4nO1xuICBsZXQgY29tcG9uZW50c0ZpbGVDb250ZW50ID0gJyc7XG4gIHZhciBjb21wb25lbnRzRmlsZXM7XG5cbiAgaWYgKGF1dG9JbmplY3RDb21wb25lbnRzKSB7XG4gICAgY29tcG9uZW50c0ZpbGVzID0gZ2xvYlN5bmMoJyouY3NzJywge1xuICAgICAgY3dkOiByZXNvbHZlKHRoZW1lRm9sZGVyLCB0aGVtZUNvbXBvbmVudHNGb2xkZXIpLFxuICAgICAgbm9kaXI6IHRydWVcbiAgICB9KTtcblxuICAgIGlmIChjb21wb25lbnRzRmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgY29tcG9uZW50c0ZpbGVDb250ZW50ICs9XG4gICAgICAgIFwiaW1wb3J0IHsgdW5zYWZlQ1NTLCByZWdpc3RlclN0eWxlcyB9IGZyb20gJ0B2YWFkaW4vdmFhZGluLXRoZW1hYmxlLW1peGluL3JlZ2lzdGVyLXN0eWxlcyc7XFxuXCI7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRoZW1lUHJvcGVydGllcy5wYXJlbnQpIHtcbiAgICB0aGVtZUZpbGVDb250ZW50ICs9IGBpbXBvcnQgeyBhcHBseVRoZW1lIGFzIGFwcGx5QmFzZVRoZW1lIH0gZnJvbSAnLi90aGVtZS0ke3RoZW1lUHJvcGVydGllcy5wYXJlbnR9LmdlbmVyYXRlZC5qcyc7XFxuYDtcbiAgfVxuXG4gIHRoZW1lRmlsZUNvbnRlbnQgKz0gYGltcG9ydCB7IGluamVjdEdsb2JhbENzcyB9IGZyb20gJ0Zyb250ZW5kL2dlbmVyYXRlZC9qYXItcmVzb3VyY2VzL3RoZW1lLXV0aWwuanMnO1xcbmA7XG4gIHRoZW1lRmlsZUNvbnRlbnQgKz0gYGltcG9ydCB7IHdlYmNvbXBvbmVudEdsb2JhbENzc0luamVjdG9yIH0gZnJvbSAnRnJvbnRlbmQvZ2VuZXJhdGVkL2phci1yZXNvdXJjZXMvdGhlbWUtdXRpbC5qcyc7XFxuYDtcbiAgdGhlbWVGaWxlQ29udGVudCArPSBgaW1wb3J0ICcuLyR7Y29tcG9uZW50c0ZpbGVuYW1lfSc7XFxuYDtcblxuICB0aGVtZUZpbGVDb250ZW50ICs9IGBsZXQgbmVlZHNSZWxvYWRPbkNoYW5nZXMgPSBmYWxzZTtcXG5gO1xuICBjb25zdCBpbXBvcnRzID0gW107XG4gIGNvbnN0IGNvbXBvbmVudENzc0ltcG9ydHMgPSBbXTtcbiAgY29uc3QgZ2xvYmFsRmlsZUNvbnRlbnQgPSBbXTtcbiAgY29uc3QgZ2xvYmFsQ3NzQ29kZSA9IFtdO1xuICBjb25zdCBzaGFkb3dPbmx5Q3NzID0gW107XG4gIGNvbnN0IGNvbXBvbmVudENzc0NvZGUgPSBbXTtcbiAgY29uc3QgcGFyZW50VGhlbWUgPSB0aGVtZVByb3BlcnRpZXMucGFyZW50ID8gJ2FwcGx5QmFzZVRoZW1lKHRhcmdldCk7XFxuJyA6ICcnO1xuICBjb25zdCBwYXJlbnRUaGVtZUdsb2JhbEltcG9ydCA9IHRoZW1lUHJvcGVydGllcy5wYXJlbnRcbiAgICA/IGBpbXBvcnQgJy4vdGhlbWUtJHt0aGVtZVByb3BlcnRpZXMucGFyZW50fS5nbG9iYWwuZ2VuZXJhdGVkLmpzJztcXG5gXG4gICAgOiAnJztcblxuICBjb25zdCB0aGVtZUlkZW50aWZpZXIgPSAnX3ZhYWRpbnRoZW1lXycgKyB0aGVtZU5hbWUgKyAnXyc7XG4gIGNvbnN0IGx1bW9Dc3NGbGFnID0gJ192YWFkaW50aGVtZWx1bW9pbXBvcnRzXyc7XG4gIGNvbnN0IGdsb2JhbENzc0ZsYWcgPSB0aGVtZUlkZW50aWZpZXIgKyAnZ2xvYmFsQ3NzJztcbiAgY29uc3QgY29tcG9uZW50Q3NzRmxhZyA9IHRoZW1lSWRlbnRpZmllciArICdjb21wb25lbnRDc3MnO1xuXG4gIGlmICghZXhpc3RzU3luYyhzdHlsZXMpKSB7XG4gICAgaWYgKHByb2R1Y3Rpb25Nb2RlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHN0eWxlcy5jc3MgZmlsZSBpcyBtaXNzaW5nIGFuZCBpcyBuZWVkZWQgZm9yICcke3RoZW1lTmFtZX0nIGluIGZvbGRlciAnJHt0aGVtZUZvbGRlcn0nYCk7XG4gICAgfVxuICAgIHdyaXRlRmlsZVN5bmMoXG4gICAgICBzdHlsZXMsXG4gICAgICAnLyogSW1wb3J0IHlvdXIgYXBwbGljYXRpb24gZ2xvYmFsIGNzcyBmaWxlcyBoZXJlIG9yIGFkZCB0aGUgc3R5bGVzIGRpcmVjdGx5IHRvIHRoaXMgZmlsZSAqLycsXG4gICAgICAndXRmOCdcbiAgICApO1xuICB9XG5cbiAgLy8gc3R5bGVzLmNzcyB3aWxsIGFsd2F5cyBiZSBhdmFpbGFibGUgYXMgd2Ugd3JpdGUgb25lIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gIGxldCBmaWxlbmFtZSA9IGJhc2VuYW1lKHN0eWxlcyk7XG4gIGxldCB2YXJpYWJsZSA9IGNhbWVsQ2FzZShmaWxlbmFtZSk7XG5cbiAgLyogTFVNTyAqL1xuICBjb25zdCBsdW1vSW1wb3J0cyA9IHRoZW1lUHJvcGVydGllcy5sdW1vSW1wb3J0cyB8fCBbJ3R5cG9ncmFwaHknLCAnY29sb3InLCAnc3BhY2luZycsICdiYWRnZScsICd1dGlsaXR5J10gO1xuICBpZiAobHVtb0ltcG9ydHMpIHtcbiAgICBsdW1vSW1wb3J0cy5mb3JFYWNoKChsdW1vSW1wb3J0KSA9PiB7XG4gICAgICBpbXBvcnRzLnB1c2goYGltcG9ydCB7ICR7bHVtb0ltcG9ydH0gfSBmcm9tICdAdmFhZGluL3ZhYWRpbi1sdW1vLXN0eWxlcy8ke2x1bW9JbXBvcnR9LmpzJztcXG5gKTtcbiAgICAgIGlmIChsdW1vSW1wb3J0ID09PSAndXRpbGl0eScgfHwgbHVtb0ltcG9ydCA9PT0gJ2JhZGdlJyB8fCBsdW1vSW1wb3J0ID09PSAndHlwb2dyYXBoeScgfHwgbHVtb0ltcG9ydCA9PT0gJ2NvbG9yJykge1xuICAgICAgICAvLyBJbmplY3QgaW50byBtYWluIGRvY3VtZW50IHRoZSBzYW1lIHdheSBhcyBvdGhlciBMdW1vIHN0eWxlcyBhcmUgaW5qZWN0ZWRcbiAgICAgICAgLy8gTHVtbyBpbXBvcnRzIGdvIHRvIHRoZSB0aGVtZSBnbG9iYWwgaW1wb3J0cyBmaWxlIHRvIHByZXZlbnQgc3R5bGUgbGVha3NcbiAgICAgICAgLy8gd2hlbiB0aGUgdGhlbWUgaXMgYXBwbGllZCB0byBhbiBlbWJlZGRlZCBjb21wb25lbnRcbiAgICAgICAgZ2xvYmFsRmlsZUNvbnRlbnQucHVzaChgaW1wb3J0ICdAdmFhZGluL3ZhYWRpbi1sdW1vLXN0eWxlcy8ke2x1bW9JbXBvcnR9LWdsb2JhbC5qcyc7XFxuYCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBsdW1vSW1wb3J0cy5mb3JFYWNoKChsdW1vSW1wb3J0KSA9PiB7XG4gICAgICAvLyBMdW1vIGlzIGluamVjdGVkIHRvIHRoZSBkb2N1bWVudCBieSBMdW1vIGl0c2VsZlxuICAgICAgc2hhZG93T25seUNzcy5wdXNoKGByZW1vdmVycy5wdXNoKGluamVjdEdsb2JhbENzcygke2x1bW9JbXBvcnR9LmNzc1RleHQsICcnLCB0YXJnZXQsIHRydWUpKTtcXG5gKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qIFRoZW1lICovXG4gIGdsb2JhbEZpbGVDb250ZW50LnB1c2gocGFyZW50VGhlbWVHbG9iYWxJbXBvcnQpO1xuICBpZiAodXNlRGV2U2VydmVyT3JJblByb2R1Y3Rpb25Nb2RlKSB7XG4gICAgZ2xvYmFsRmlsZUNvbnRlbnQucHVzaChgaW1wb3J0ICd0aGVtZXMvJHt0aGVtZU5hbWV9LyR7ZmlsZW5hbWV9JztcXG5gKTtcblxuICAgIGltcG9ydHMucHVzaChgaW1wb3J0ICR7dmFyaWFibGV9IGZyb20gJ3RoZW1lcy8ke3RoZW1lTmFtZX0vJHtmaWxlbmFtZX0/aW5saW5lJztcXG5gKTtcbiAgICBzaGFkb3dPbmx5Q3NzLnB1c2goYHJlbW92ZXJzLnB1c2goaW5qZWN0R2xvYmFsQ3NzKCR7dmFyaWFibGV9LnRvU3RyaW5nKCksICcnLCB0YXJnZXQpKTtcXG4gICAgYCk7XG4gIH1cbiAgaWYgKGV4aXN0c1N5bmMoZG9jdW1lbnRDc3NGaWxlKSkge1xuICAgIGZpbGVuYW1lID0gYmFzZW5hbWUoZG9jdW1lbnRDc3NGaWxlKTtcbiAgICB2YXJpYWJsZSA9IGNhbWVsQ2FzZShmaWxlbmFtZSk7XG5cbiAgICBpZiAodXNlRGV2U2VydmVyT3JJblByb2R1Y3Rpb25Nb2RlKSB7XG4gICAgICBnbG9iYWxGaWxlQ29udGVudC5wdXNoKGBpbXBvcnQgJ3RoZW1lcy8ke3RoZW1lTmFtZX0vJHtmaWxlbmFtZX0nO1xcbmApO1xuXG4gICAgICBpbXBvcnRzLnB1c2goYGltcG9ydCAke3ZhcmlhYmxlfSBmcm9tICd0aGVtZXMvJHt0aGVtZU5hbWV9LyR7ZmlsZW5hbWV9P2lubGluZSc7XFxuYCk7XG4gICAgICBzaGFkb3dPbmx5Q3NzLnB1c2goYHJlbW92ZXJzLnB1c2goaW5qZWN0R2xvYmFsQ3NzKCR7dmFyaWFibGV9LnRvU3RyaW5nKCksJycsIGRvY3VtZW50KSk7XFxuICAgIGApO1xuICAgIH1cbiAgfVxuXG4gIGxldCBpID0gMDtcbiAgaWYgKHRoZW1lUHJvcGVydGllcy5kb2N1bWVudENzcykge1xuICAgIGNvbnN0IG1pc3NpbmdNb2R1bGVzID0gY2hlY2tNb2R1bGVzKHRoZW1lUHJvcGVydGllcy5kb2N1bWVudENzcyk7XG4gICAgaWYgKG1pc3NpbmdNb2R1bGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRocm93IEVycm9yKFxuICAgICAgICBcIk1pc3NpbmcgbnBtIG1vZHVsZXMgb3IgZmlsZXMgJ1wiICtcbiAgICAgICAgICBtaXNzaW5nTW9kdWxlcy5qb2luKFwiJywgJ1wiKSArXG4gICAgICAgICAgXCInIGZvciBkb2N1bWVudENzcyBtYXJrZWQgaW4gJ3RoZW1lLmpzb24nLlxcblwiICtcbiAgICAgICAgICBcIkluc3RhbGwgb3IgdXBkYXRlIHBhY2thZ2UocykgYnkgYWRkaW5nIGEgQE5wbVBhY2thZ2UgYW5ub3RhdGlvbiBvciBpbnN0YWxsIGl0IHVzaW5nICducG0vcG5wbS9idW4gaSdcIlxuICAgICAgKTtcbiAgICB9XG4gICAgdGhlbWVQcm9wZXJ0aWVzLmRvY3VtZW50Q3NzLmZvckVhY2goKGNzc0ltcG9ydCkgPT4ge1xuICAgICAgY29uc3QgdmFyaWFibGUgPSAnbW9kdWxlJyArIGkrKztcbiAgICAgIGltcG9ydHMucHVzaChgaW1wb3J0ICR7dmFyaWFibGV9IGZyb20gJyR7Y3NzSW1wb3J0fT9pbmxpbmUnO1xcbmApO1xuICAgICAgLy8gRHVlIHRvIGNocm9tZSBidWcgaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MzM2ODc2IGZvbnQtZmFjZSB3aWxsIG5vdCB3b3JrXG4gICAgICAvLyBpbnNpZGUgc2hhZG93Um9vdCBzbyB3ZSBuZWVkIHRvIGluamVjdCBpdCB0aGVyZSBhbHNvLlxuICAgICAgZ2xvYmFsQ3NzQ29kZS5wdXNoKGBpZih0YXJnZXQgIT09IGRvY3VtZW50KSB7XG4gICAgICAgIHJlbW92ZXJzLnB1c2goaW5qZWN0R2xvYmFsQ3NzKCR7dmFyaWFibGV9LnRvU3RyaW5nKCksICcnLCB0YXJnZXQpKTtcbiAgICB9XFxuICAgIGApO1xuICAgICAgZ2xvYmFsQ3NzQ29kZS5wdXNoKFxuICAgICAgICBgcmVtb3ZlcnMucHVzaChpbmplY3RHbG9iYWxDc3MoJHt2YXJpYWJsZX0udG9TdHJpbmcoKSwgJyR7Q1NTSU1QT1JUX0NPTU1FTlR9JywgZG9jdW1lbnQpKTtcXG4gICAgYFxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxuICBpZiAodGhlbWVQcm9wZXJ0aWVzLmltcG9ydENzcykge1xuICAgIGNvbnN0IG1pc3NpbmdNb2R1bGVzID0gY2hlY2tNb2R1bGVzKHRoZW1lUHJvcGVydGllcy5pbXBvcnRDc3MpO1xuICAgIGlmIChtaXNzaW5nTW9kdWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgXCJNaXNzaW5nIG5wbSBtb2R1bGVzIG9yIGZpbGVzICdcIiArXG4gICAgICAgICAgbWlzc2luZ01vZHVsZXMuam9pbihcIicsICdcIikgK1xuICAgICAgICAgIFwiJyBmb3IgaW1wb3J0Q3NzIG1hcmtlZCBpbiAndGhlbWUuanNvbicuXFxuXCIgK1xuICAgICAgICAgIFwiSW5zdGFsbCBvciB1cGRhdGUgcGFja2FnZShzKSBieSBhZGRpbmcgYSBATnBtUGFja2FnZSBhbm5vdGF0aW9uIG9yIGluc3RhbGwgaXQgdXNpbmcgJ25wbS9wbnBtL2J1biBpJ1wiXG4gICAgICApO1xuICAgIH1cbiAgICB0aGVtZVByb3BlcnRpZXMuaW1wb3J0Q3NzLmZvckVhY2goKGNzc1BhdGgpID0+IHtcbiAgICAgIGNvbnN0IHZhcmlhYmxlID0gJ21vZHVsZScgKyBpKys7XG4gICAgICBnbG9iYWxGaWxlQ29udGVudC5wdXNoKGBpbXBvcnQgJyR7Y3NzUGF0aH0nO1xcbmApO1xuICAgICAgaW1wb3J0cy5wdXNoKGBpbXBvcnQgJHt2YXJpYWJsZX0gZnJvbSAnJHtjc3NQYXRofT9pbmxpbmUnO1xcbmApO1xuICAgICAgc2hhZG93T25seUNzcy5wdXNoKGByZW1vdmVycy5wdXNoKGluamVjdEdsb2JhbENzcygke3ZhcmlhYmxlfS50b1N0cmluZygpLCAnJHtDU1NJTVBPUlRfQ09NTUVOVH0nLCB0YXJnZXQpKTtcXG5gKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChhdXRvSW5qZWN0Q29tcG9uZW50cykge1xuICAgIGNvbXBvbmVudHNGaWxlcy5mb3JFYWNoKChjb21wb25lbnRDc3MpID0+IHtcbiAgICAgIGNvbnN0IGZpbGVuYW1lID0gYmFzZW5hbWUoY29tcG9uZW50Q3NzKTtcbiAgICAgIGNvbnN0IHRhZyA9IGZpbGVuYW1lLnJlcGxhY2UoJy5jc3MnLCAnJyk7XG4gICAgICBjb25zdCB2YXJpYWJsZSA9IGNhbWVsQ2FzZShmaWxlbmFtZSk7XG4gICAgICBjb21wb25lbnRDc3NJbXBvcnRzLnB1c2goXG4gICAgICAgIGBpbXBvcnQgJHt2YXJpYWJsZX0gZnJvbSAndGhlbWVzLyR7dGhlbWVOYW1lfS8ke3RoZW1lQ29tcG9uZW50c0ZvbGRlcn0vJHtmaWxlbmFtZX0/aW5saW5lJztcXG5gXG4gICAgICApO1xuICAgICAgLy8gRG9uJ3QgZm9ybWF0IGFzIHRoZSBnZW5lcmF0ZWQgZmlsZSBmb3JtYXR0aW5nIHdpbGwgZ2V0IHdvbmt5IVxuICAgICAgY29uc3QgY29tcG9uZW50U3RyaW5nID0gYHJlZ2lzdGVyU3R5bGVzKFxuICAgICAgICAnJHt0YWd9JyxcbiAgICAgICAgdW5zYWZlQ1NTKCR7dmFyaWFibGV9LnRvU3RyaW5nKCkpXG4gICAgICApO1xuICAgICAgYDtcbiAgICAgIGNvbXBvbmVudENzc0NvZGUucHVzaChjb21wb25lbnRTdHJpbmcpO1xuICAgIH0pO1xuICB9XG5cbiAgdGhlbWVGaWxlQ29udGVudCArPSBpbXBvcnRzLmpvaW4oJycpO1xuXG4gIC8vIERvbid0IGZvcm1hdCBhcyB0aGUgZ2VuZXJhdGVkIGZpbGUgZm9ybWF0dGluZyB3aWxsIGdldCB3b25reSFcbiAgLy8gSWYgdGFyZ2V0cyBjaGVjayB0aGF0IHdlIG9ubHkgcmVnaXN0ZXIgdGhlIHN0eWxlIHBhcnRzIG9uY2UsIGNoZWNrcyBleGlzdCBmb3IgZ2xvYmFsIGNzcyBhbmQgY29tcG9uZW50IGNzc1xuICBjb25zdCB0aGVtZUZpbGVBcHBseSA9IGBcbiAgbGV0IHRoZW1lUmVtb3ZlcnMgPSBuZXcgV2Vha01hcCgpO1xuICBsZXQgdGFyZ2V0cyA9IFtdO1xuXG4gIGV4cG9ydCBjb25zdCBhcHBseVRoZW1lID0gKHRhcmdldCkgPT4ge1xuICAgIGNvbnN0IHJlbW92ZXJzID0gW107XG4gICAgaWYgKHRhcmdldCAhPT0gZG9jdW1lbnQpIHtcbiAgICAgICR7c2hhZG93T25seUNzcy5qb2luKCcnKX1cbiAgICAgICR7YXV0b0luamVjdEdsb2JhbENzc0ltcG9ydHMgPyBgXG4gICAgICAgIHdlYmNvbXBvbmVudEdsb2JhbENzc0luamVjdG9yKChjc3MpID0+IHtcbiAgICAgICAgICByZW1vdmVycy5wdXNoKGluamVjdEdsb2JhbENzcyhjc3MsICcnLCB0YXJnZXQpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGAgOiAnJ31cbiAgICB9XG4gICAgJHtwYXJlbnRUaGVtZX1cbiAgICAke2dsb2JhbENzc0NvZGUuam9pbignJyl9XG5cbiAgICBpZiAoaW1wb3J0Lm1ldGEuaG90KSB7XG4gICAgICB0YXJnZXRzLnB1c2gobmV3IFdlYWtSZWYodGFyZ2V0KSk7XG4gICAgICB0aGVtZVJlbW92ZXJzLnNldCh0YXJnZXQsIHJlbW92ZXJzKTtcbiAgICB9XG5cbiAgfVxuXG5gO1xuICBjb21wb25lbnRzRmlsZUNvbnRlbnQgKz0gYFxuJHtjb21wb25lbnRDc3NJbXBvcnRzLmpvaW4oJycpfVxuXG5pZiAoIWRvY3VtZW50Wycke2NvbXBvbmVudENzc0ZsYWd9J10pIHtcbiAgJHtjb21wb25lbnRDc3NDb2RlLmpvaW4oJycpfVxuICBkb2N1bWVudFsnJHtjb21wb25lbnRDc3NGbGFnfSddID0gdHJ1ZTtcbn1cblxuaWYgKGltcG9ydC5tZXRhLmhvdCkge1xuICBpbXBvcnQubWV0YS5ob3QuYWNjZXB0KChtb2R1bGUpID0+IHtcbiAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gIH0pO1xufVxuXG5gO1xuXG4gIHRoZW1lRmlsZUNvbnRlbnQgKz0gdGhlbWVGaWxlQXBwbHk7XG4gIHRoZW1lRmlsZUNvbnRlbnQgKz0gYFxuaWYgKGltcG9ydC5tZXRhLmhvdCkge1xuICBpbXBvcnQubWV0YS5ob3QuYWNjZXB0KChtb2R1bGUpID0+IHtcblxuICAgIGlmIChuZWVkc1JlbG9hZE9uQ2hhbmdlcykge1xuICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRzLmZvckVhY2godGFyZ2V0UmVmID0+IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gdGFyZ2V0UmVmLmRlcmVmKCk7XG4gICAgICAgIGlmICh0YXJnZXQpIHtcbiAgICAgICAgICB0aGVtZVJlbW92ZXJzLmdldCh0YXJnZXQpLmZvckVhY2gocmVtb3ZlciA9PiByZW1vdmVyKCkpXG4gICAgICAgICAgbW9kdWxlLmFwcGx5VGhlbWUodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9XG4gIH0pO1xuXG4gIGltcG9ydC5tZXRhLmhvdC5vbigndml0ZTphZnRlclVwZGF0ZScsICh1cGRhdGUpID0+IHtcbiAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgndmFhZGluLXRoZW1lLXVwZGF0ZWQnLCB7IGRldGFpbDogdXBkYXRlIH0pKTtcbiAgfSk7XG59XG5cbmA7XG5cbiAgZ2xvYmFsSW1wb3J0Q29udGVudCArPSBgXG4ke2dsb2JhbEZpbGVDb250ZW50LmpvaW4oJycpfVxuYDtcblxuICB3cml0ZUlmQ2hhbmdlZChyZXNvbHZlKG91dHB1dEZvbGRlciwgZ2xvYmFsRmlsZW5hbWUpLCBnbG9iYWxJbXBvcnRDb250ZW50KTtcbiAgd3JpdGVJZkNoYW5nZWQocmVzb2x2ZShvdXRwdXRGb2xkZXIsIHRoZW1lRmlsZW5hbWUpLCB0aGVtZUZpbGVDb250ZW50KTtcbiAgd3JpdGVJZkNoYW5nZWQocmVzb2x2ZShvdXRwdXRGb2xkZXIsIGNvbXBvbmVudHNGaWxlbmFtZSksIGNvbXBvbmVudHNGaWxlQ29udGVudCk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlSWZDaGFuZ2VkKGZpbGUsIGRhdGEpIHtcbiAgaWYgKCFleGlzdHNTeW5jKGZpbGUpIHx8IHJlYWRGaWxlU3luYyhmaWxlLCB7IGVuY29kaW5nOiAndXRmLTgnIH0pICE9PSBkYXRhKSB7XG4gICAgd3JpdGVGaWxlU3luYyhmaWxlLCBkYXRhKTtcbiAgfVxufVxuXG4vKipcbiAqIE1ha2UgZ2l2ZW4gc3RyaW5nIGludG8gY2FtZWxDYXNlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgc3RyaW5nIHRvIG1ha2UgaW50byBjYW1lQ2FzZVxuICogQHJldHVybnMge3N0cmluZ30gY2FtZWxDYXNlZCB2ZXJzaW9uXG4gKi9cbmZ1bmN0aW9uIGNhbWVsQ2FzZShzdHIpIHtcbiAgcmV0dXJuIHN0clxuICAgIC5yZXBsYWNlKC8oPzpeXFx3fFtBLVpdfFxcYlxcdykvZywgZnVuY3Rpb24gKHdvcmQsIGluZGV4KSB7XG4gICAgICByZXR1cm4gaW5kZXggPT09IDAgPyB3b3JkLnRvTG93ZXJDYXNlKCkgOiB3b3JkLnRvVXBwZXJDYXNlKCk7XG4gICAgfSlcbiAgICAucmVwbGFjZSgvXFxzKy9nLCAnJylcbiAgICAucmVwbGFjZSgvXFwufFxcLS9nLCAnJyk7XG59XG5cbmV4cG9ydCB7IHdyaXRlVGhlbWVGaWxlcyB9O1xuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSBIT01FL2hvbWVfVmFhZGluL3RhcmdldC9wbHVnaW5zL2FwcGxpY2F0aW9uLXRoZW1lLXBsdWdpblwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpbi90YXJnZXQvcGx1Z2lucy9hcHBsaWNhdGlvbi10aGVtZS1wbHVnaW4vdGhlbWUtY29weS5qc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSUyMEhPTUUvaG9tZV9WYWFkaW4vdGFyZ2V0L3BsdWdpbnMvYXBwbGljYXRpb24tdGhlbWUtcGx1Z2luL3RoZW1lLWNvcHkuanNcIjsvKlxuICogQ29weXJpZ2h0IDIwMDAtMjAyNSBWYWFkaW4gTHRkLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90XG4gKiB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZlxuICogdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVRcbiAqIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZVxuICogTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQgbGltaXRhdGlvbnMgdW5kZXJcbiAqIHRoZSBMaWNlbnNlLlxuICovXG5cbi8qKlxuICogVGhpcyBjb250YWlucyBmdW5jdGlvbnMgYW5kIGZlYXR1cmVzIHVzZWQgdG8gY29weSB0aGVtZSBmaWxlcy5cbiAqL1xuXG5pbXBvcnQgeyByZWFkZGlyU3luYywgc3RhdFN5bmMsIG1rZGlyU3luYywgZXhpc3RzU3luYywgY29weUZpbGVTeW5jIH0gZnJvbSAnZnMnO1xuaW1wb3J0IHsgcmVzb2x2ZSwgYmFzZW5hbWUsIHJlbGF0aXZlLCBleHRuYW1lIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBnbG9iU3luYyB9IGZyb20gJ2dsb2InO1xuXG5jb25zdCBpZ25vcmVkRmlsZUV4dGVuc2lvbnMgPSBbJy5jc3MnLCAnLmpzJywgJy5qc29uJ107XG5cbi8qKlxuICogQ29weSB0aGVtZSBzdGF0aWMgcmVzb3VyY2VzIHRvIHN0YXRpYyBhc3NldHMgZm9sZGVyLiBBbGwgZmlsZXMgaW4gdGhlIHRoZW1lXG4gKiBmb2xkZXIgd2lsbCBiZSBjb3BpZWQgZXhjbHVkaW5nIGNzcywganMgYW5kIGpzb24gZmlsZXMgdGhhdCB3aWxsIGJlXG4gKiBoYW5kbGVkIGJ5IHdlYnBhY2sgYW5kIG5vdCBiZSBzaGFyZWQgYXMgc3RhdGljIGZpbGVzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0aGVtZUZvbGRlciBGb2xkZXIgd2l0aCB0aGVtZSBmaWxlXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvamVjdFN0YXRpY0Fzc2V0c091dHB1dEZvbGRlciByZXNvdXJjZXMgb3V0cHV0IGZvbGRlclxuICogQHBhcmFtIHtvYmplY3R9IGxvZ2dlciBwbHVnaW4gbG9nZ2VyXG4gKi9cbmZ1bmN0aW9uIGNvcHlUaGVtZVJlc291cmNlcyh0aGVtZUZvbGRlciwgcHJvamVjdFN0YXRpY0Fzc2V0c091dHB1dEZvbGRlciwgbG9nZ2VyKSB7XG4gIGNvbnN0IHN0YXRpY0Fzc2V0c1RoZW1lRm9sZGVyID0gcmVzb2x2ZShwcm9qZWN0U3RhdGljQXNzZXRzT3V0cHV0Rm9sZGVyLCAndGhlbWVzJywgYmFzZW5hbWUodGhlbWVGb2xkZXIpKTtcbiAgY29uc3QgY29sbGVjdGlvbiA9IGNvbGxlY3RGb2xkZXJzKHRoZW1lRm9sZGVyLCBsb2dnZXIpO1xuXG4gIC8vIE9ubHkgY3JlYXRlIGFzc2V0cyBmb2xkZXIgaWYgdGhlcmUgYXJlIGZpbGVzIHRvIGNvcHkuXG4gIGlmIChjb2xsZWN0aW9uLmZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICBta2RpclN5bmMoc3RhdGljQXNzZXRzVGhlbWVGb2xkZXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgIC8vIGNyZWF0ZSBmb2xkZXJzIHdpdGhcbiAgICBjb2xsZWN0aW9uLmRpcmVjdG9yaWVzLmZvckVhY2goKGRpcmVjdG9yeSkgPT4ge1xuICAgICAgY29uc3QgcmVsYXRpdmVEaXJlY3RvcnkgPSByZWxhdGl2ZSh0aGVtZUZvbGRlciwgZGlyZWN0b3J5KTtcbiAgICAgIGNvbnN0IHRhcmdldERpcmVjdG9yeSA9IHJlc29sdmUoc3RhdGljQXNzZXRzVGhlbWVGb2xkZXIsIHJlbGF0aXZlRGlyZWN0b3J5KTtcblxuICAgICAgbWtkaXJTeW5jKHRhcmdldERpcmVjdG9yeSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgfSk7XG5cbiAgICBjb2xsZWN0aW9uLmZpbGVzLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICAgIGNvbnN0IHJlbGF0aXZlRmlsZSA9IHJlbGF0aXZlKHRoZW1lRm9sZGVyLCBmaWxlKTtcbiAgICAgIGNvbnN0IHRhcmdldEZpbGUgPSByZXNvbHZlKHN0YXRpY0Fzc2V0c1RoZW1lRm9sZGVyLCByZWxhdGl2ZUZpbGUpO1xuICAgICAgY29weUZpbGVJZkFic2VudE9yTmV3ZXIoZmlsZSwgdGFyZ2V0RmlsZSwgbG9nZ2VyKTtcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIENvbGxlY3QgYWxsIGZvbGRlcnMgd2l0aCBjb3B5YWJsZSBmaWxlcyBhbmQgYWxsIGZpbGVzIHRvIGJlIGNvcGllZC5cbiAqIEZvbGVkIHdpbGwgbm90IGJlIGFkZGVkIGlmIG5vIGZpbGVzIGluIGZvbGRlciBvciBzdWJmb2xkZXJzLlxuICpcbiAqIEZpbGVzIHdpbGwgbm90IGNvbnRhaW4gZmlsZXMgd2l0aCBpZ25vcmVkIGV4dGVuc2lvbnMgYW5kIGZvbGRlcnMgb25seSBjb250YWluaW5nIGlnbm9yZWQgZmlsZXMgd2lsbCBub3QgYmUgYWRkZWQuXG4gKlxuICogQHBhcmFtIGZvbGRlclRvQ29weSBmb2xkZXIgd2Ugd2lsbCBjb3B5IGZpbGVzIGZyb21cbiAqIEBwYXJhbSBsb2dnZXIgcGx1Z2luIGxvZ2dlclxuICogQHJldHVybiB7e2RpcmVjdG9yaWVzOiBbXSwgZmlsZXM6IFtdfX0gb2JqZWN0IGNvbnRhaW5pbmcgZGlyZWN0b3JpZXMgdG8gY3JlYXRlIGFuZCBmaWxlcyB0byBjb3B5XG4gKi9cbmZ1bmN0aW9uIGNvbGxlY3RGb2xkZXJzKGZvbGRlclRvQ29weSwgbG9nZ2VyKSB7XG4gIGNvbnN0IGNvbGxlY3Rpb24gPSB7IGRpcmVjdG9yaWVzOiBbXSwgZmlsZXM6IFtdIH07XG4gIGxvZ2dlci50cmFjZSgnZmlsZXMgaW4gZGlyZWN0b3J5JywgcmVhZGRpclN5bmMoZm9sZGVyVG9Db3B5KSk7XG4gIHJlYWRkaXJTeW5jKGZvbGRlclRvQ29weSkuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgIGNvbnN0IGZpbGVUb0NvcHkgPSByZXNvbHZlKGZvbGRlclRvQ29weSwgZmlsZSk7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChzdGF0U3luYyhmaWxlVG9Db3B5KS5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnR29pbmcgdGhyb3VnaCBkaXJlY3RvcnknLCBmaWxlVG9Db3B5KTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gY29sbGVjdEZvbGRlcnMoZmlsZVRvQ29weSwgbG9nZ2VyKTtcbiAgICAgICAgaWYgKHJlc3VsdC5maWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29sbGVjdGlvbi5kaXJlY3Rvcmllcy5wdXNoKGZpbGVUb0NvcHkpO1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnQWRkaW5nIGRpcmVjdG9yeScsIGZpbGVUb0NvcHkpO1xuICAgICAgICAgIGNvbGxlY3Rpb24uZGlyZWN0b3JpZXMucHVzaC5hcHBseShjb2xsZWN0aW9uLmRpcmVjdG9yaWVzLCByZXN1bHQuZGlyZWN0b3JpZXMpO1xuICAgICAgICAgIGNvbGxlY3Rpb24uZmlsZXMucHVzaC5hcHBseShjb2xsZWN0aW9uLmZpbGVzLCByZXN1bHQuZmlsZXMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFpZ25vcmVkRmlsZUV4dGVuc2lvbnMuaW5jbHVkZXMoZXh0bmFtZShmaWxlVG9Db3B5KSkpIHtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdBZGRpbmcgZmlsZScsIGZpbGVUb0NvcHkpO1xuICAgICAgICBjb2xsZWN0aW9uLmZpbGVzLnB1c2goZmlsZVRvQ29weSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGhhbmRsZU5vU3VjaEZpbGVFcnJvcihmaWxlVG9Db3B5LCBlcnJvciwgbG9nZ2VyKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gY29sbGVjdGlvbjtcbn1cblxuLyoqXG4gKiBDb3B5IGFueSBzdGF0aWMgbm9kZV9tb2R1bGVzIGFzc2V0cyBtYXJrZWQgaW4gdGhlbWUuanNvbiB0b1xuICogcHJvamVjdCBzdGF0aWMgYXNzZXRzIGZvbGRlci5cbiAqXG4gKiBUaGUgdGhlbWUuanNvbiBjb250ZW50IGZvciBhc3NldHMgaXMgc2V0IHVwIGFzOlxuICoge1xuICogICBhc3NldHM6IHtcbiAqICAgICBcIm5vZGVfbW9kdWxlIGlkZW50aWZpZXJcIjoge1xuICogICAgICAgXCJjb3B5LXJ1bGVcIjogXCJ0YXJnZXQvZm9sZGVyXCIsXG4gKiAgICAgfVxuICogICB9XG4gKiB9XG4gKlxuICogVGhpcyB3b3VsZCBtZWFuIHRoYXQgYW4gYXNzZXQgd291bGQgYmUgYnVpbHQgYXM6XG4gKiBcIkBmb3J0YXdlc29tZS9mb250YXdlc29tZS1mcmVlXCI6IHtcbiAqICAgXCJzdmdzL3JlZ3VsYXIvKipcIjogXCJmb3J0YXdlc29tZS9pY29uc1wiXG4gKiB9XG4gKiBXaGVyZSAnQGZvcnRhd2Vzb21lL2ZvbnRhd2Vzb21lLWZyZWUnIGlzIHRoZSBucG0gcGFja2FnZSwgJ3N2Z3MvcmVndWxhci8qKicgaXMgd2hhdCBzaG91bGQgYmUgY29waWVkXG4gKiBhbmQgJ2ZvcnRhd2Vzb21lL2ljb25zJyBpcyB0aGUgdGFyZ2V0IGRpcmVjdG9yeSB1bmRlciBwcm9qZWN0U3RhdGljQXNzZXRzT3V0cHV0Rm9sZGVyIHdoZXJlIHRoaW5nc1xuICogd2lsbCBnZXQgY29waWVkIHRvLlxuICpcbiAqIE5vdGUhIHRoZXJlIGNhbiBiZSBtdWx0aXBsZSBjb3B5LXJ1bGVzIHdpdGggdGFyZ2V0IGZvbGRlcnMgZm9yIG9uZSBucG0gcGFja2FnZSBhc3NldC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGhlbWVOYW1lIG5hbWUgb2YgdGhlIHRoZW1lIHdlIGFyZSBjb3B5aW5nIGFzc2V0cyBmb3JcbiAqIEBwYXJhbSB7anNvbn0gdGhlbWVQcm9wZXJ0aWVzIHRoZW1lIHByb3BlcnRpZXMganNvbiB3aXRoIGRhdGEgb24gYXNzZXRzXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvamVjdFN0YXRpY0Fzc2V0c091dHB1dEZvbGRlciBwcm9qZWN0IG91dHB1dCBmb2xkZXIgd2hlcmUgd2UgY29weSBhc3NldHMgdG8gdW5kZXIgdGhlbWUvW3RoZW1lTmFtZV1cbiAqIEBwYXJhbSB7b2JqZWN0fSBsb2dnZXIgcGx1Z2luIGxvZ2dlclxuICovXG5mdW5jdGlvbiBjb3B5U3RhdGljQXNzZXRzKHRoZW1lTmFtZSwgdGhlbWVQcm9wZXJ0aWVzLCBwcm9qZWN0U3RhdGljQXNzZXRzT3V0cHV0Rm9sZGVyLCBsb2dnZXIpIHtcbiAgY29uc3QgYXNzZXRzID0gdGhlbWVQcm9wZXJ0aWVzWydhc3NldHMnXTtcbiAgaWYgKCFhc3NldHMpIHtcbiAgICBsb2dnZXIuZGVidWcoJ25vIGFzc2V0cyB0byBoYW5kbGUgbm8gc3RhdGljIGFzc2V0cyB3ZXJlIGNvcGllZCcpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIG1rZGlyU3luYyhwcm9qZWN0U3RhdGljQXNzZXRzT3V0cHV0Rm9sZGVyLCB7XG4gICAgcmVjdXJzaXZlOiB0cnVlXG4gIH0pO1xuICBjb25zdCBtaXNzaW5nTW9kdWxlcyA9IGNoZWNrTW9kdWxlcyhPYmplY3Qua2V5cyhhc3NldHMpKTtcbiAgaWYgKG1pc3NpbmdNb2R1bGVzLmxlbmd0aCA+IDApIHtcbiAgICB0aHJvdyBFcnJvcihcbiAgICAgIFwiTWlzc2luZyBucG0gbW9kdWxlcyAnXCIgK1xuICAgICAgICBtaXNzaW5nTW9kdWxlcy5qb2luKFwiJywgJ1wiKSArXG4gICAgICAgIFwiJyBmb3IgYXNzZXRzIG1hcmtlZCBpbiAndGhlbWUuanNvbicuXFxuXCIgK1xuICAgICAgICBcIkluc3RhbGwgcGFja2FnZShzKSBieSBhZGRpbmcgYSBATnBtUGFja2FnZSBhbm5vdGF0aW9uIG9yIGluc3RhbGwgaXQgdXNpbmcgJ25wbS9wbnBtL2J1biBpJ1wiXG4gICAgKTtcbiAgfVxuICBPYmplY3Qua2V5cyhhc3NldHMpLmZvckVhY2goKG1vZHVsZSkgPT4ge1xuICAgIGNvbnN0IGNvcHlSdWxlcyA9IGFzc2V0c1ttb2R1bGVdO1xuICAgIE9iamVjdC5rZXlzKGNvcHlSdWxlcykuZm9yRWFjaCgoY29weVJ1bGUpID0+IHtcbiAgICAgIC8vIEdsb2IgZG9lc24ndCB3b3JrIHdpdGggd2luZG93cyBwYXRoIHNlcGFyYXRvciBzbyByZXBsYWNpbmcgaXQgaGVyZS5cbiAgICAgIGNvbnN0IG5vZGVTb3VyY2VzID0gcmVzb2x2ZSgnbm9kZV9tb2R1bGVzLycsIG1vZHVsZSwgY29weVJ1bGUpLnJlcGxhY2UoL1xcXFwvZywnLycpO1xuICAgICAgY29uc3QgZmlsZXMgPSBnbG9iU3luYyhub2RlU291cmNlcywgeyBub2RpcjogdHJ1ZSB9KTtcbiAgICAgIGNvbnN0IHRhcmdldEZvbGRlciA9IHJlc29sdmUocHJvamVjdFN0YXRpY0Fzc2V0c091dHB1dEZvbGRlciwgJ3RoZW1lcycsIHRoZW1lTmFtZSwgY29weVJ1bGVzW2NvcHlSdWxlXSk7XG5cbiAgICAgIG1rZGlyU3luYyh0YXJnZXRGb2xkZXIsIHtcbiAgICAgICAgcmVjdXJzaXZlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIGZpbGVzLmZvckVhY2goKGZpbGUpID0+IHtcbiAgICAgICAgY29uc3QgY29weVRhcmdldCA9IHJlc29sdmUodGFyZ2V0Rm9sZGVyLCBiYXNlbmFtZShmaWxlKSk7XG4gICAgICAgIGNvcHlGaWxlSWZBYnNlbnRPck5ld2VyKGZpbGUsIGNvcHlUYXJnZXQsIGxvZ2dlcik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNoZWNrTW9kdWxlcyhtb2R1bGVzKSB7XG4gIGNvbnN0IG1pc3NpbmcgPSBbXTtcblxuICBtb2R1bGVzLmZvckVhY2goKG1vZHVsZSkgPT4ge1xuICAgIGlmICghZXhpc3RzU3luYyhyZXNvbHZlKCdub2RlX21vZHVsZXMvJywgbW9kdWxlKSkpIHtcbiAgICAgIG1pc3NpbmcucHVzaChtb2R1bGUpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIG1pc3Npbmc7XG59XG5cbi8qKlxuICogQ29waWVzIGdpdmVuIGZpbGUgdG8gYSBnaXZlbiB0YXJnZXQgcGF0aCwgaWYgdGFyZ2V0IGZpbGUgZG9lc24ndCBleGlzdCBvciBpZlxuICogZmlsZSB0byBjb3B5IGlzIG5ld2VyLlxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVUb0NvcHkgcGF0aCBvZiB0aGUgZmlsZSB0byBjb3B5XG4gKiBAcGFyYW0ge3N0cmluZ30gY29weVRhcmdldCBwYXRoIG9mIHRoZSB0YXJnZXQgZmlsZVxuICogQHBhcmFtIHtvYmplY3R9IGxvZ2dlciBwbHVnaW4gbG9nZ2VyXG4gKi9cbmZ1bmN0aW9uIGNvcHlGaWxlSWZBYnNlbnRPck5ld2VyKGZpbGVUb0NvcHksIGNvcHlUYXJnZXQsIGxvZ2dlcikge1xuICB0cnkge1xuICAgIGlmICghZXhpc3RzU3luYyhjb3B5VGFyZ2V0KSB8fCBzdGF0U3luYyhjb3B5VGFyZ2V0KS5tdGltZSA8IHN0YXRTeW5jKGZpbGVUb0NvcHkpLm10aW1lKSB7XG4gICAgICBsb2dnZXIudHJhY2UoJ0NvcHlpbmc6ICcsIGZpbGVUb0NvcHksICc9PicsIGNvcHlUYXJnZXQpO1xuICAgICAgY29weUZpbGVTeW5jKGZpbGVUb0NvcHksIGNvcHlUYXJnZXQpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBoYW5kbGVOb1N1Y2hGaWxlRXJyb3IoZmlsZVRvQ29weSwgZXJyb3IsIGxvZ2dlcik7XG4gIH1cbn1cblxuLy8gSWdub3JlcyBlcnJvcnMgZHVlIHRvIGZpbGUgbWlzc2luZyBkdXJpbmcgdGhlbWUgcHJvY2Vzc2luZ1xuLy8gVGhpcyBtYXkgaGFwcGVuIGZvciBleGFtcGxlIHdoZW4gYW4gSURFIGNyZWF0ZXMgYSB0ZW1wb3JhcnkgZmlsZVxuLy8gYW5kIHRoZW4gaW1tZWRpYXRlbHkgZGVsZXRlcyBpdFxuZnVuY3Rpb24gaGFuZGxlTm9TdWNoRmlsZUVycm9yKGZpbGUsIGVycm9yLCBsb2dnZXIpIHtcbiAgaWYgKGVycm9yLmNvZGUgPT09ICdFTk9FTlQnKSB7XG4gICAgbG9nZ2VyLndhcm4oJ0lnbm9yaW5nIG5vdCBleGlzdGluZyBmaWxlICcgKyBmaWxlICsgJy4gRmlsZSBtYXkgaGF2ZSBiZWVuIGRlbGV0ZWQgZHVyaW5nIHRoZW1lIHByb2Nlc3NpbmcuJyk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuZXhwb3J0IHsgY2hlY2tNb2R1bGVzLCBjb3B5U3RhdGljQXNzZXRzLCBjb3B5VGhlbWVSZXNvdXJjZXMgfTtcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpbi90YXJnZXQvcGx1Z2lucy90aGVtZS1sb2FkZXJcIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIi9ob21lL3dvcmtzcGFjZS9EU3F1YXJlIEhPTUUvaG9tZV9WYWFkaW4vdGFyZ2V0L3BsdWdpbnMvdGhlbWUtbG9hZGVyL3RoZW1lLWxvYWRlci11dGlscy5qc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSUyMEhPTUUvaG9tZV9WYWFkaW4vdGFyZ2V0L3BsdWdpbnMvdGhlbWUtbG9hZGVyL3RoZW1lLWxvYWRlci11dGlscy5qc1wiO2ltcG9ydCB7IGV4aXN0c1N5bmMsIHJlYWRGaWxlU3luYyB9IGZyb20gJ2ZzJztcbmltcG9ydCB7IHJlc29sdmUsIGJhc2VuYW1lIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBnbG9iU3luYyB9IGZyb20gJ2dsb2InO1xuXG4vLyBDb2xsZWN0IGdyb3VwcyBbdXJsKF0gWyd8XCJdb3B0aW9uYWwgJy4vfC4uLycsIG90aGVyICcuLi8nIHNlZ21lbnRzIG9wdGlvbmFsLCBmaWxlIHBhcnQgYW5kIGVuZCBvZiB1cmxcbi8vIFRoZSBhZGRpdGlvbmFsIGRvdCBzZWdtZW50cyBjb3VsZCBiZSBVUkwgcmVmZXJlbmNpbmcgYXNzZXRzIGluIG5lc3RlZCBpbXBvcnRlZCBDU1Ncbi8vIFdoZW4gVml0ZSBpbmxpbmVzIENTUyBpbXBvcnQgaXQgZG9lcyBub3QgcmV3cml0ZSByZWxhdGl2ZSBVUkwgZm9yIG5vdC1yZXNvbHZhYmxlIHJlc291cmNlXG4vLyBzbyB0aGUgZmluYWwgQ1NTIGVuZHMgdXAgd2l0aCB3cm9uZyByZWxhdGl2ZSBVUkxzIChyLmcuIC4uLy4uL3BrZy9pY29uLnN2Zylcbi8vIElmIHRoZSBVUkwgaXMgcmVsYXRpdmUsIHdlIHNob3VsZCB0cnkgdG8gY2hlY2sgaWYgaXQgaXMgYW4gYXNzZXQgYnkgaWdub3JpbmcgdGhlIGFkZGl0aW9uYWwgZG90IHNlZ21lbnRzXG5jb25zdCB1cmxNYXRjaGVyID0gLyh1cmxcXChcXHMqKShcXCd8XFxcIik/KFxcLlxcL3xcXC5cXC5cXC8pKCg/OlxcMykqKT8oXFxTKikoXFwyXFxzKlxcKSkvZztcblxuZnVuY3Rpb24gYXNzZXRzQ29udGFpbnMoZmlsZVVybCwgdGhlbWVGb2xkZXIsIGxvZ2dlcikge1xuICBjb25zdCB0aGVtZVByb3BlcnRpZXMgPSBnZXRUaGVtZVByb3BlcnRpZXModGhlbWVGb2xkZXIpO1xuICBpZiAoIXRoZW1lUHJvcGVydGllcykge1xuICAgIGxvZ2dlci5kZWJ1ZygnTm8gdGhlbWUgcHJvcGVydGllcyBmb3VuZC4nKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgYXNzZXRzID0gdGhlbWVQcm9wZXJ0aWVzWydhc3NldHMnXTtcbiAgaWYgKCFhc3NldHMpIHtcbiAgICBsb2dnZXIuZGVidWcoJ05vIGRlZmluZWQgYXNzZXRzIGluIHRoZW1lIHByb3BlcnRpZXMnKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gR28gdGhyb3VnaCBlYWNoIGFzc2V0IG1vZHVsZVxuICBmb3IgKGxldCBtb2R1bGUgb2YgT2JqZWN0LmtleXMoYXNzZXRzKSkge1xuICAgIGNvbnN0IGNvcHlSdWxlcyA9IGFzc2V0c1ttb2R1bGVdO1xuICAgIC8vIEdvIHRocm91Z2ggZWFjaCBjb3B5IHJ1bGVcbiAgICBmb3IgKGxldCBjb3B5UnVsZSBvZiBPYmplY3Qua2V5cyhjb3B5UnVsZXMpKSB7XG4gICAgICAvLyBpZiBmaWxlIHN0YXJ0cyB3aXRoIGNvcHlSdWxlIHRhcmdldCBjaGVjayBpZiBmaWxlIHdpdGggcGF0aCBhZnRlciBjb3B5IHRhcmdldCBjYW4gYmUgZm91bmRcbiAgICAgIGlmIChmaWxlVXJsLnN0YXJ0c1dpdGgoY29weVJ1bGVzW2NvcHlSdWxlXSkpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0RmlsZSA9IGZpbGVVcmwucmVwbGFjZShjb3B5UnVsZXNbY29weVJ1bGVdLCAnJyk7XG4gICAgICAgIGNvbnN0IGZpbGVzID0gZ2xvYlN5bmMocmVzb2x2ZSgnbm9kZV9tb2R1bGVzLycsIG1vZHVsZSwgY29weVJ1bGUpLCB7IG5vZGlyOiB0cnVlIH0pO1xuXG4gICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgICAgICBpZiAoZmlsZS5lbmRzV2l0aCh0YXJnZXRGaWxlKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBnZXRUaGVtZVByb3BlcnRpZXModGhlbWVGb2xkZXIpIHtcbiAgY29uc3QgdGhlbWVQcm9wZXJ0eUZpbGUgPSByZXNvbHZlKHRoZW1lRm9sZGVyLCAndGhlbWUuanNvbicpO1xuICBpZiAoIWV4aXN0c1N5bmModGhlbWVQcm9wZXJ0eUZpbGUpKSB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIGNvbnN0IHRoZW1lUHJvcGVydHlGaWxlQXNTdHJpbmcgPSByZWFkRmlsZVN5bmModGhlbWVQcm9wZXJ0eUZpbGUpO1xuICBpZiAodGhlbWVQcm9wZXJ0eUZpbGVBc1N0cmluZy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4ge307XG4gIH1cbiAgcmV0dXJuIEpTT04ucGFyc2UodGhlbWVQcm9wZXJ0eUZpbGVBc1N0cmluZyk7XG59XG5cbmZ1bmN0aW9uIHJld3JpdGVDc3NVcmxzKHNvdXJjZSwgaGFuZGxlZFJlc291cmNlRm9sZGVyLCB0aGVtZUZvbGRlciwgbG9nZ2VyLCBvcHRpb25zKSB7XG4gIHNvdXJjZSA9IHNvdXJjZS5yZXBsYWNlKHVybE1hdGNoZXIsIGZ1bmN0aW9uIChtYXRjaCwgdXJsLCBxdW90ZU1hcmssIHJlcGxhY2UsIGFkZGl0aW9uYWxEb3RTZWdtZW50cywgZmlsZVVybCwgZW5kU3RyaW5nKSB7XG4gICAgbGV0IGFic29sdXRlUGF0aCA9IHJlc29sdmUoaGFuZGxlZFJlc291cmNlRm9sZGVyLCByZXBsYWNlLCBhZGRpdGlvbmFsRG90U2VnbWVudHMgfHwgJycsIGZpbGVVcmwpO1xuICAgIGxldCBleGlzdGluZ1RoZW1lUmVzb3VyY2UgPSBhYnNvbHV0ZVBhdGguc3RhcnRzV2l0aCh0aGVtZUZvbGRlcikgJiYgZXhpc3RzU3luYyhhYnNvbHV0ZVBhdGgpO1xuICAgIGlmICghZXhpc3RpbmdUaGVtZVJlc291cmNlICYmIGFkZGl0aW9uYWxEb3RTZWdtZW50cykge1xuICAgICAgLy8gVHJ5IHRvIHJlc29sdmUgcGF0aCB3aXRob3V0IGRvdCBzZWdtZW50cyBhcyBpdCBtYXkgYmUgYW4gdW5yZXNvbHZhYmxlXG4gICAgICAvLyByZWxhdGl2ZSBVUkwgZnJvbSBhbiBpbmxpbmVkIG5lc3RlZCBDU1NcbiAgICAgIGFic29sdXRlUGF0aCA9IHJlc29sdmUoaGFuZGxlZFJlc291cmNlRm9sZGVyLCByZXBsYWNlLCBmaWxlVXJsKTtcbiAgICAgIGV4aXN0aW5nVGhlbWVSZXNvdXJjZSA9IGFic29sdXRlUGF0aC5zdGFydHNXaXRoKHRoZW1lRm9sZGVyKSAmJiBleGlzdHNTeW5jKGFic29sdXRlUGF0aCk7XG4gICAgfVxuICAgIGNvbnN0IGlzQXNzZXQgPSBhc3NldHNDb250YWlucyhmaWxlVXJsLCB0aGVtZUZvbGRlciwgbG9nZ2VyKTtcbiAgICBpZiAoZXhpc3RpbmdUaGVtZVJlc291cmNlIHx8IGlzQXNzZXQpIHtcbiAgICAgIC8vIEFkZGluZyAuLyB3aWxsIHNraXAgY3NzLWxvYWRlciwgd2hpY2ggc2hvdWxkIGJlIGRvbmUgZm9yIGFzc2V0IGZpbGVzXG4gICAgICAvLyBJbiBhIHByb2R1Y3Rpb24gYnVpbGQsIHRoZSBjc3MgZmlsZSBpcyBpbiBWQUFESU4vYnVpbGQgYW5kIHN0YXRpYyBmaWxlcyBhcmUgaW4gVkFBRElOL3N0YXRpYywgc28gLi4vc3RhdGljIG5lZWRzIHRvIGJlIGFkZGVkXG4gICAgICBjb25zdCByZXBsYWNlbWVudCA9IG9wdGlvbnMuZGV2TW9kZSA/ICcuLycgOiAnLi4vc3RhdGljLyc7XG5cbiAgICAgIGNvbnN0IHNraXBMb2FkZXIgPSBleGlzdGluZ1RoZW1lUmVzb3VyY2UgPyAnJyA6IHJlcGxhY2VtZW50O1xuICAgICAgY29uc3QgZnJvbnRlbmRUaGVtZUZvbGRlciA9IHNraXBMb2FkZXIgKyAndGhlbWVzLycgKyBiYXNlbmFtZSh0aGVtZUZvbGRlcik7XG4gICAgICBsb2dnZXIubG9nKFxuICAgICAgICAnVXBkYXRpbmcgdXJsIGZvciBmaWxlJyxcbiAgICAgICAgXCInXCIgKyByZXBsYWNlICsgZmlsZVVybCArIFwiJ1wiLFxuICAgICAgICAndG8gdXNlJyxcbiAgICAgICAgXCInXCIgKyBmcm9udGVuZFRoZW1lRm9sZGVyICsgJy8nICsgZmlsZVVybCArIFwiJ1wiXG4gICAgICApO1xuICAgICAgLy8gYXNzZXRzIGFyZSBhbHdheXMgcmVsYXRpdmUgdG8gdGhlbWUgZm9sZGVyXG4gICAgICBjb25zdCBwYXRoUmVzb2x2ZWQgPSBpc0Fzc2V0ID8gJy8nICsgZmlsZVVybFxuICAgICAgICAgIDogYWJzb2x1dGVQYXRoLnN1YnN0cmluZyh0aGVtZUZvbGRlci5sZW5ndGgpLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcblxuICAgICAgLy8ga2VlcCB0aGUgdXJsIHRoZSBzYW1lIGV4Y2VwdCByZXBsYWNlIHRoZSAuLyBvciAuLi8gdG8gdGhlbWVzL1t0aGVtZUZvbGRlcl1cbiAgICAgIHJldHVybiB1cmwgKyAocXVvdGVNYXJrID8/ICcnKSArIGZyb250ZW5kVGhlbWVGb2xkZXIgKyBwYXRoUmVzb2x2ZWQgKyBlbmRTdHJpbmc7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmRldk1vZGUpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJObyByZXdyaXRlIGZvciAnXCIsIG1hdGNoLCBcIicgYXMgdGhlIGZpbGUgd2FzIG5vdCBmb3VuZC5cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEluIHByb2R1Y3Rpb24sIHRoZSBjc3MgaXMgaW4gVkFBRElOL2J1aWxkIGJ1dCB0aGUgdGhlbWUgZmlsZXMgYXJlIGluIC5cbiAgICAgIHJldHVybiB1cmwgKyAocXVvdGVNYXJrID8/ICcnKSArICcuLi8uLi8nICsgZmlsZVVybCArIGVuZFN0cmluZztcbiAgICB9XG4gICAgcmV0dXJuIG1hdGNoO1xuICB9KTtcbiAgcmV0dXJuIHNvdXJjZTtcbn1cblxuZXhwb3J0IHsgcmV3cml0ZUNzc1VybHMgfTtcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpbi90YXJnZXQvcGx1Z2lucy9yZWFjdC1mdW5jdGlvbi1sb2NhdGlvbi1wbHVnaW5cIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIi9ob21lL3dvcmtzcGFjZS9EU3F1YXJlIEhPTUUvaG9tZV9WYWFkaW4vdGFyZ2V0L3BsdWdpbnMvcmVhY3QtZnVuY3Rpb24tbG9jYXRpb24tcGx1Z2luL3JlYWN0LWZ1bmN0aW9uLWxvY2F0aW9uLXBsdWdpbi5qc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSUyMEhPTUUvaG9tZV9WYWFkaW4vdGFyZ2V0L3BsdWdpbnMvcmVhY3QtZnVuY3Rpb24tbG9jYXRpb24tcGx1Z2luL3JlYWN0LWZ1bmN0aW9uLWxvY2F0aW9uLXBsdWdpbi5qc1wiO2ltcG9ydCAqIGFzIHQgZnJvbSAnQGJhYmVsL3R5cGVzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEZ1bmN0aW9uQ29tcG9uZW50U291cmNlTG9jYXRpb25CYWJlbCgpIHtcbiAgZnVuY3Rpb24gaXNSZWFjdEZ1bmN0aW9uTmFtZShuYW1lKSB7XG4gICAgLy8gQSBSZWFjdCBjb21wb25lbnQgZnVuY3Rpb24gYWx3YXlzIHN0YXJ0cyB3aXRoIGEgQ2FwaXRhbCBsZXR0ZXJcbiAgICByZXR1cm4gbmFtZSAmJiBuYW1lLm1hdGNoKC9eW0EtWl0uKi8pO1xuICB9XG5cbiAgLyoqXG4gICAqIFdyaXRlcyBkZWJ1ZyBpbmZvIGFzIE5hbWUuX19kZWJ1Z1NvdXJjZURlZmluZT17Li4ufSBhZnRlciB0aGUgZ2l2ZW4gc3RhdGVtZW50IChcInBhdGhcIikuXG4gICAqIFRoaXMgaXMgdXNlZCB0byBtYWtlIHRoZSBzb3VyY2UgbG9jYXRpb24gb2YgdGhlIGZ1bmN0aW9uIChkZWZpbmVkIGJ5IHRoZSBsb2MgcGFyYW1ldGVyKSBhdmFpbGFibGUgaW4gdGhlIGJyb3dzZXIgaW4gZGV2ZWxvcG1lbnQgbW9kZS5cbiAgICogVGhlIG5hbWUgX19kZWJ1Z1NvdXJjZURlZmluZSBpcyBwcmVmaXhlZCBieSBfXyB0byBtYXJrIHRoaXMgaXMgbm90IGEgcHVibGljIEFQSS5cbiAgICovXG4gIGZ1bmN0aW9uIGFkZERlYnVnSW5mbyhwYXRoLCBuYW1lLCBmaWxlbmFtZSwgbG9jKSB7XG4gICAgY29uc3QgbGluZU51bWJlciA9IGxvYy5zdGFydC5saW5lO1xuICAgIGNvbnN0IGNvbHVtbk51bWJlciA9IGxvYy5zdGFydC5jb2x1bW4gKyAxO1xuICAgIGNvbnN0IGRlYnVnU291cmNlTWVtYmVyID0gdC5tZW1iZXJFeHByZXNzaW9uKHQuaWRlbnRpZmllcihuYW1lKSwgdC5pZGVudGlmaWVyKCdfX2RlYnVnU291cmNlRGVmaW5lJykpO1xuICAgIGNvbnN0IGRlYnVnU291cmNlRGVmaW5lID0gdC5vYmplY3RFeHByZXNzaW9uKFtcbiAgICAgIHQub2JqZWN0UHJvcGVydHkodC5pZGVudGlmaWVyKCdmaWxlTmFtZScpLCB0LnN0cmluZ0xpdGVyYWwoZmlsZW5hbWUpKSxcbiAgICAgIHQub2JqZWN0UHJvcGVydHkodC5pZGVudGlmaWVyKCdsaW5lTnVtYmVyJyksIHQubnVtZXJpY0xpdGVyYWwobGluZU51bWJlcikpLFxuICAgICAgdC5vYmplY3RQcm9wZXJ0eSh0LmlkZW50aWZpZXIoJ2NvbHVtbk51bWJlcicpLCB0Lm51bWVyaWNMaXRlcmFsKGNvbHVtbk51bWJlcikpXG4gICAgXSk7XG4gICAgY29uc3QgYXNzaWdubWVudCA9IHQuZXhwcmVzc2lvblN0YXRlbWVudCh0LmFzc2lnbm1lbnRFeHByZXNzaW9uKCc9JywgZGVidWdTb3VyY2VNZW1iZXIsIGRlYnVnU291cmNlRGVmaW5lKSk7XG4gICAgY29uc3QgY29uZGl0aW9uID0gdC5iaW5hcnlFeHByZXNzaW9uKFxuICAgICAgJz09PScsXG4gICAgICB0LnVuYXJ5RXhwcmVzc2lvbigndHlwZW9mJywgdC5pZGVudGlmaWVyKG5hbWUpKSxcbiAgICAgIHQuc3RyaW5nTGl0ZXJhbCgnZnVuY3Rpb24nKVxuICAgICk7XG4gICAgY29uc3QgaWZGdW5jdGlvbiA9IHQuaWZTdGF0ZW1lbnQoY29uZGl0aW9uLCB0LmJsb2NrU3RhdGVtZW50KFthc3NpZ25tZW50XSkpO1xuICAgIHBhdGguaW5zZXJ0QWZ0ZXIoaWZGdW5jdGlvbik7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHZpc2l0b3I6IHtcbiAgICAgIFZhcmlhYmxlRGVjbGFyYXRpb24ocGF0aCwgc3RhdGUpIHtcbiAgICAgICAgLy8gRmluZHMgZGVjbGFyYXRpb25zIHN1Y2ggYXNcbiAgICAgICAgLy8gY29uc3QgRm9vID0gKCkgPT4gPGRpdi8+XG4gICAgICAgIC8vIGV4cG9ydCBjb25zdCBCYXIgPSAoKSA9PiA8c3Bhbi8+XG5cbiAgICAgICAgLy8gYW5kIHdyaXRlcyBhIEZvby5fX2RlYnVnU291cmNlRGVmaW5lPSB7Li59IGFmdGVyIGl0LCByZWZlcnJpbmcgdG8gdGhlIHN0YXJ0IG9mIHRoZSBmdW5jdGlvbiBib2R5XG4gICAgICAgIHBhdGgubm9kZS5kZWNsYXJhdGlvbnMuZm9yRWFjaCgoZGVjbGFyYXRpb24pID0+IHtcbiAgICAgICAgICBpZiAoZGVjbGFyYXRpb24uaWQudHlwZSAhPT0gJ0lkZW50aWZpZXInKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IG5hbWUgPSBkZWNsYXJhdGlvbj8uaWQ/Lm5hbWU7XG4gICAgICAgICAgaWYgKCFpc1JlYWN0RnVuY3Rpb25OYW1lKG5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBzdGF0ZS5maWxlLm9wdHMuZmlsZW5hbWU7XG4gICAgICAgICAgaWYgKGRlY2xhcmF0aW9uPy5pbml0Py5ib2R5Py5sb2MpIHtcbiAgICAgICAgICAgIGFkZERlYnVnSW5mbyhwYXRoLCBuYW1lLCBmaWxlbmFtZSwgZGVjbGFyYXRpb24uaW5pdC5ib2R5LmxvYyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIEZ1bmN0aW9uRGVjbGFyYXRpb24ocGF0aCwgc3RhdGUpIHtcbiAgICAgICAgLy8gRmluZHMgZGVjbGFyYXRpb25zIHN1Y2ggYXNcbiAgICAgICAgLy8gZnVuY3RpbyBGb28oKSB7IHJldHVybiA8ZGl2Lz47IH1cbiAgICAgICAgLy8gZXhwb3J0IGZ1bmN0aW9uIEJhcigpIHsgcmV0dXJuIDxzcGFuPkhlbGxvPC9zcGFuPjt9XG5cbiAgICAgICAgLy8gYW5kIHdyaXRlcyBhIEZvby5fX2RlYnVnU291cmNlRGVmaW5lPSB7Li59IGFmdGVyIGl0LCByZWZlcnJpbmcgdG8gdGhlIHN0YXJ0IG9mIHRoZSBmdW5jdGlvbiBib2R5XG4gICAgICAgIGNvbnN0IG5vZGUgPSBwYXRoLm5vZGU7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBub2RlPy5pZD8ubmFtZTtcbiAgICAgICAgaWYgKCFpc1JlYWN0RnVuY3Rpb25OYW1lKG5hbWUpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZpbGVuYW1lID0gc3RhdGUuZmlsZS5vcHRzLmZpbGVuYW1lO1xuICAgICAgICBpZiAobm9kZS5ib2R5LmxvYykge1xuICAgICAgICAgIGFkZERlYnVnSW5mbyhwYXRoLCBuYW1lLCBmaWxlbmFtZSwgbm9kZS5ib2R5LmxvYyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG4iLCAie1xuICBcImZyb250ZW5kRm9sZGVyXCI6IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpbi8uL2Zyb250ZW5kXCIsXG4gIFwidGhlbWVGb2xkZXJcIjogXCJ0aGVtZXNcIixcbiAgXCJ0aGVtZVJlc291cmNlRm9sZGVyXCI6IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpbi8uL2Zyb250ZW5kL2dlbmVyYXRlZC9qYXItcmVzb3VyY2VzXCIsXG4gIFwic3RhdGljT3V0cHV0XCI6IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpbi90YXJnZXQvY2xhc3Nlcy9NRVRBLUlORi9WQUFESU4vd2ViYXBwL1ZBQURJTi9zdGF0aWNcIixcbiAgXCJnZW5lcmF0ZWRGb2xkZXJcIjogXCJnZW5lcmF0ZWRcIixcbiAgXCJzdGF0c091dHB1dFwiOiBcIi9ob21lL3dvcmtzcGFjZS9EU3F1YXJlIEhPTUUvaG9tZV9WYWFkaW4vdGFyZ2V0L2NsYXNzZXMvTUVUQS1JTkYvVkFBRElOL2NvbmZpZ1wiLFxuICBcImZyb250ZW5kQnVuZGxlT3V0cHV0XCI6IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpbi90YXJnZXQvY2xhc3Nlcy9NRVRBLUlORi9WQUFESU4vd2ViYXBwXCIsXG4gIFwiZGV2QnVuZGxlT3V0cHV0XCI6IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpbi90YXJnZXQvZGV2LWJ1bmRsZS93ZWJhcHBcIixcbiAgXCJkZXZCdW5kbGVTdGF0c091dHB1dFwiOiBcIi9ob21lL3dvcmtzcGFjZS9EU3F1YXJlIEhPTUUvaG9tZV9WYWFkaW4vdGFyZ2V0L2Rldi1idW5kbGUvY29uZmlnXCIsXG4gIFwiaTE4bk91dHB1dFwiOiBcInRhcmdldC9jbGFzc2VzL3ZhYWRpbi1pMThuXCIsXG4gIFwiamFyUmVzb3VyY2VzRm9sZGVyXCI6IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpbi8uL2Zyb250ZW5kL2dlbmVyYXRlZC9qYXItcmVzb3VyY2VzXCIsXG4gIFwidGhlbWVOYW1lXCI6IFwiZGFya1wiLFxuICBcImNsaWVudFNlcnZpY2VXb3JrZXJTb3VyY2VcIjogXCIvaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSBIT01FL2hvbWVfVmFhZGluL3RhcmdldC9zdy50c1wiLFxuICBcInB3YUVuYWJsZWRcIjogdHJ1ZSxcbiAgXCJvZmZsaW5lRW5hYmxlZFwiOiB0cnVlLFxuICBcIm9mZmxpbmVQYXRoXCI6IFwiJy4nXCJcbn0iLCAiY29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2Rpcm5hbWUgPSBcIi9ob21lL3dvcmtzcGFjZS9EU3F1YXJlIEhPTUUvaG9tZV9WYWFkaW4vdGFyZ2V0L3BsdWdpbnMvcm9sbHVwLXBsdWdpbi1wb3N0Y3NzLWxpdC1jdXN0b21cIjtjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZmlsZW5hbWUgPSBcIi9ob21lL3dvcmtzcGFjZS9EU3F1YXJlIEhPTUUvaG9tZV9WYWFkaW4vdGFyZ2V0L3BsdWdpbnMvcm9sbHVwLXBsdWdpbi1wb3N0Y3NzLWxpdC1jdXN0b20vcm9sbHVwLXBsdWdpbi1wb3N0Y3NzLWxpdC5qc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSUyMEhPTUUvaG9tZV9WYWFkaW4vdGFyZ2V0L3BsdWdpbnMvcm9sbHVwLXBsdWdpbi1wb3N0Y3NzLWxpdC1jdXN0b20vcm9sbHVwLXBsdWdpbi1wb3N0Y3NzLWxpdC5qc1wiOy8qKlxuICogTUlUIExpY2Vuc2VcblxuQ29weXJpZ2h0IChjKSAyMDE5IFVtYmVydG8gUGVwYXRvXG5cblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbmluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcblxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXG5jb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG5JTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU4gVEhFXG5TT0ZUV0FSRS5cbiAqL1xuLy8gVGhpcyBpcyBodHRwczovL2dpdGh1Yi5jb20vdW1ib3BlcGF0by9yb2xsdXAtcGx1Z2luLXBvc3Rjc3MtbGl0IDIuMC4wICsgaHR0cHM6Ly9naXRodWIuY29tL3VtYm9wZXBhdG8vcm9sbHVwLXBsdWdpbi1wb3N0Y3NzLWxpdC9wdWxsLzU0XG4vLyB0byBtYWtlIGl0IHdvcmsgd2l0aCBWaXRlIDNcbi8vIE9uY2UgLyBpZiBodHRwczovL2dpdGh1Yi5jb20vdW1ib3BlcGF0by9yb2xsdXAtcGx1Z2luLXBvc3Rjc3MtbGl0L3B1bGwvNTQgaXMgbWVyZ2VkIHRoaXMgc2hvdWxkIGJlIHJlbW92ZWQgYW5kIHJvbGx1cC1wbHVnaW4tcG9zdGNzcy1saXQgc2hvdWxkIGJlIHVzZWQgaW5zdGVhZFxuXG5pbXBvcnQgeyBjcmVhdGVGaWx0ZXIgfSBmcm9tICdAcm9sbHVwL3BsdWdpbnV0aWxzJztcbmltcG9ydCB0cmFuc2Zvcm1Bc3QgZnJvbSAndHJhbnNmb3JtLWFzdCc7XG5cbmNvbnN0IGFzc2V0VXJsUkUgPSAvX19WSVRFX0FTU0VUX18oW1xcdyRdKylfXyg/OlxcJF8oLio/KV9fKT8vZ1xuXG5jb25zdCBlc2NhcGUgPSAoc3RyKSA9PlxuICBzdHJcbiAgICAucmVwbGFjZShhc3NldFVybFJFLCAnJHt1bnNhZmVDU1NUYWcoXCJfX1ZJVEVfQVNTRVRfXyQxX18kMlwiKX0nKVxuICAgIC5yZXBsYWNlKC9gL2csICdcXFxcYCcpXG4gICAgLnJlcGxhY2UoL1xcXFwoPyFgKS9nLCAnXFxcXFxcXFwnKTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcG9zdGNzc0xpdChvcHRpb25zID0ge30pIHtcbiAgY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgaW5jbHVkZTogJyoqLyoue2Nzcyxzc3MscGNzcyxzdHlsLHN0eWx1cyxzYXNzLHNjc3MsbGVzc30nLFxuICAgIGV4Y2x1ZGU6IG51bGwsXG4gICAgaW1wb3J0UGFja2FnZTogJ2xpdCdcbiAgfTtcblxuICBjb25zdCBvcHRzID0geyAuLi5kZWZhdWx0T3B0aW9ucywgLi4ub3B0aW9ucyB9O1xuICBjb25zdCBmaWx0ZXIgPSBjcmVhdGVGaWx0ZXIob3B0cy5pbmNsdWRlLCBvcHRzLmV4Y2x1ZGUpO1xuXG4gIHJldHVybiB7XG4gICAgbmFtZTogJ3Bvc3Rjc3MtbGl0JyxcbiAgICBlbmZvcmNlOiAncG9zdCcsXG4gICAgdHJhbnNmb3JtKGNvZGUsIGlkKSB7XG4gICAgICBpZiAoIWZpbHRlcihpZCkpIHJldHVybjtcbiAgICAgIGNvbnN0IGFzdCA9IHRoaXMucGFyc2UoY29kZSwge30pO1xuICAgICAgLy8gZXhwb3J0IGRlZmF1bHQgY29uc3QgY3NzO1xuICAgICAgbGV0IGRlZmF1bHRFeHBvcnROYW1lO1xuXG4gICAgICAvLyBleHBvcnQgZGVmYXVsdCAnLi4uJztcbiAgICAgIGxldCBpc0RlY2xhcmF0aW9uTGl0ZXJhbCA9IGZhbHNlO1xuICAgICAgY29uc3QgbWFnaWNTdHJpbmcgPSB0cmFuc2Zvcm1Bc3QoY29kZSwgeyBhc3Q6IGFzdCB9LCAobm9kZSkgPT4ge1xuICAgICAgICBpZiAobm9kZS50eXBlID09PSAnRXhwb3J0RGVmYXVsdERlY2xhcmF0aW9uJykge1xuICAgICAgICAgIGRlZmF1bHRFeHBvcnROYW1lID0gbm9kZS5kZWNsYXJhdGlvbi5uYW1lO1xuXG4gICAgICAgICAgaXNEZWNsYXJhdGlvbkxpdGVyYWwgPSBub2RlLmRlY2xhcmF0aW9uLnR5cGUgPT09ICdMaXRlcmFsJztcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGlmICghZGVmYXVsdEV4cG9ydE5hbWUgJiYgIWlzRGVjbGFyYXRpb25MaXRlcmFsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIG1hZ2ljU3RyaW5nLndhbGsoKG5vZGUpID0+IHtcbiAgICAgICAgaWYgKGRlZmF1bHRFeHBvcnROYW1lICYmIG5vZGUudHlwZSA9PT0gJ1ZhcmlhYmxlRGVjbGFyYXRpb24nKSB7XG4gICAgICAgICAgY29uc3QgZXhwb3J0ZWRWYXIgPSBub2RlLmRlY2xhcmF0aW9ucy5maW5kKChkKSA9PiBkLmlkLm5hbWUgPT09IGRlZmF1bHRFeHBvcnROYW1lKTtcbiAgICAgICAgICBpZiAoZXhwb3J0ZWRWYXIpIHtcbiAgICAgICAgICAgIGV4cG9ydGVkVmFyLmluaXQuZWRpdC51cGRhdGUoYGNzc1RhZ1xcYCR7ZXNjYXBlKGV4cG9ydGVkVmFyLmluaXQudmFsdWUpfVxcYGApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc0RlY2xhcmF0aW9uTGl0ZXJhbCAmJiBub2RlLnR5cGUgPT09ICdFeHBvcnREZWZhdWx0RGVjbGFyYXRpb24nKSB7XG4gICAgICAgICAgbm9kZS5kZWNsYXJhdGlvbi5lZGl0LnVwZGF0ZShgY3NzVGFnXFxgJHtlc2NhcGUobm9kZS5kZWNsYXJhdGlvbi52YWx1ZSl9XFxgYCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbWFnaWNTdHJpbmcucHJlcGVuZChgaW1wb3J0IHtjc3MgYXMgY3NzVGFnLCB1bnNhZmVDU1MgYXMgdW5zYWZlQ1NTVGFnfSBmcm9tICcke29wdHMuaW1wb3J0UGFja2FnZX0nO1xcbmApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29kZTogbWFnaWNTdHJpbmcudG9TdHJpbmcoKSxcbiAgICAgICAgbWFwOiBtYWdpY1N0cmluZy5nZW5lcmF0ZU1hcCh7XG4gICAgICAgICAgaGlyZXM6IHRydWVcbiAgICAgICAgfSlcbiAgICAgIH07XG4gICAgfVxuICB9O1xufTtcbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpbi90YXJnZXQvcGx1Z2lucy9yb2xsdXAtcGx1Z2luLXZhYWRpbi1pMThuXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCIvaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSBIT01FL2hvbWVfVmFhZGluL3RhcmdldC9wbHVnaW5zL3JvbGx1cC1wbHVnaW4tdmFhZGluLWkxOG4vcm9sbHVwLXBsdWdpbi12YWFkaW4taTE4bi5qc1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSUyMEhPTUUvaG9tZV9WYWFkaW4vdGFyZ2V0L3BsdWdpbnMvcm9sbHVwLXBsdWdpbi12YWFkaW4taTE4bi9yb2xsdXAtcGx1Z2luLXZhYWRpbi1pMThuLmpzXCI7aW1wb3J0IHsgY3JlYXRlRmlsdGVyIH0gZnJvbSAnQHJvbGx1cC9wbHVnaW51dGlscyc7XG5pbXBvcnQgdHJhbnNmb3JtQXN0IGZyb20gJ3RyYW5zZm9ybS1hc3QnO1xuaW1wb3J0IE1hZ2ljU3RyaW5nIGZyb20gJ21hZ2ljLXN0cmluZyc7XG5cbmltcG9ydCBwcm9jZXNzIGZyb20gJ25vZGU6cHJvY2Vzcyc7XG5cbmltcG9ydCAqIGFzIHBhdGggZnJvbSAnbm9kZTpwYXRoJztcbmltcG9ydCAqIGFzIGZzUHJvbWlzZXMgZnJvbSAnbm9kZTpmcy9wcm9taXNlcyc7XG5cbmNvbnN0IGNodW5rTmFtZU1hcmtlciA9ICdfX1ZBQURJTl9JMThuX2NodW5rTmFtZV9fJztcbmNvbnN0IHJlZ2lzdGVyQ2h1bmtJbXBvcnQgPSBgaW1wb3J0IHsgaTE4biB9IGZyb20gJ0B2YWFkaW4vaGlsbGEtcmVhY3QtaTE4bic7XFxuYDtcbmNvbnN0IHJlZ2lzdGVyQ2h1bmtDYWxsID0gYGF3YWl0IGkxOG4ucmVnaXN0ZXJDaHVuaygnJHtjaHVua05hbWVNYXJrZXJ9Jyk7XFxuYDtcblxuXG4vKipcbiAqIFZhYWRpbiBSb2xsdXAvVml0ZSBwbHVnaW4gZm9yIGF1dG9tYXRpYyBzcGxpdHRpbmcgb2YgaTE4biBidW5kbGVzIGZvciBIaWxsYVxuICogYXBwcyBiYXNlZCBvbiB0aGUgY2h1bmtzIGluIHRoZSBKUyBidW5kbGUgb3V0cHV0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gdGhlIHBsdWdpbiBvcHRpb25zXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdGlvbnMuaW5jbHVkZSAtIHRoZSBpbnB1dCBtb2R1bGVzIGluY2x1ZGUgcGF0dGVyblxuICogQHBhcmFtIHtzdHJpbmc9fSBvcHRpb25zLmV4Y2x1ZGUgLSB0aGUgaW5wdXQgbW9kdWxlcyBleGNsdWRlIHBhdHRlcm5cbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0aW9ucy5jd2QgLSB0aGUgYmFzZSBkaXJlY3RvcnkgZm9yIHJlc29sdmluZyBkaXJlY3Rvcnkgb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zLm1ldGEgLSBidW5kbGUgSlNPTiBtZXRhZGF0YSBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMubWV0YS5vdXRwdXQgLSBidW5kbGUgSlNPTiBtZXRhZGF0YSBvdXRwdXQgb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zLm1ldGEub3V0cHV0LmRpciAtIGJ1bmRsZSBKU09OIG1ldGFkYXRhIG91dHB1dCBkaXJlY3RvcnlcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9ucy5tZXRhLm91dHB1dC5maWxlbmFtZSAtIGJ1bmRsZSBKU09OIG1ldGFkYXRhIGZpbGUgbmFtZSwgZGVmYXVsdHMgdG8gJ2kxOG4uanNvbidcbiAqXG4gKiBAcmV0dXJucyB0aGUgUm9sbHVwL1ZpdGUgcGx1Z2luIGluc3RhbmNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHZhYWRpbkkxOG4ob3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICAgIGluY2x1ZGU6ICcqKi8qLntqcyxqc3gsdHMsdHN4fScsXG4gICAgZXhjbHVkZTogbnVsbCxcbiAgICBjd2Q6IHByb2Nlc3MuY3dkKCksXG4gICAgbWV0YToge1xuICAgICAgb3V0cHV0OiB7XG4gICAgICAgIGRpcjogJycsXG4gICAgICAgIGZpbGVuYW1lOiAnaTE4bi5qc29uJ1xuICAgICAgfSxcbiAgICB9LFxuICB9O1xuXG4gIGNvbnN0IGZpbHRlciA9IGNyZWF0ZUZpbHRlcihvcHRpb25zPy5pbmNsdWRlID8/IGRlZmF1bHRPcHRpb25zLmluY2x1ZGUsIG9wdGlvbnM/LmV4Y2x1ZGUgPz8gZGVmYXVsdE9wdGlvbnMuZXhjbHVkZSk7XG5cbiAgY29uc3QgY3dkID0gb3B0aW9ucz8uY3dkID8/IGRlZmF1bHRPcHRpb25zLmN3ZDtcbiAgY29uc3QgbWV0YU91dHB1dERpciA9IHBhdGgucmVzb2x2ZShjd2QsIG9wdGlvbnM/Lm1ldGE/Lm91dHB1dD8uZGlyID8/IGRlZmF1bHRPcHRpb25zLm1ldGEub3V0cHV0LmRpcik7XG4gIGNvbnN0IG1ldGFPdXRwdXRGaWxlbmFtZSA9IHBhdGgucmVzb2x2ZShtZXRhT3V0cHV0RGlyLCBvcHRpb25zPy5tZXRhPy5vdXRwdXQ/LmZpbGVuYW1lID8/IGRlZmF1bHRPcHRpb25zLm1ldGEub3V0cHV0LmZpbGVuYW1lKTtcblxuICBjb25zdCBjaHVua0tleVNldHMgPSBuZXcgTWFwKCk7XG4gIGNvbnN0IG1haW5DaHVua0tleVNldCA9IG5ldyBTZXQoKTtcblxuICByZXR1cm4ge1xuICAgIG5hbWU6ICd2YWFkaW4taTE4bicsXG4gICAgYXN5bmMgdHJhbnNmb3JtKGNvZGUsIGlkKSB7XG4gICAgICBpZiAoIWZpbHRlcihpZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3Qga2V5VGFnQmluZGluZ3MgPSBuZXcgU2V0KCk7XG4gICAgICBjb25zdCB0cmFuc2xhdGVCaW5kaW5ncyA9IG5ldyBTZXQoKTtcbiAgICAgIGNvbnN0IGFzdCA9IHRoaXMucGFyc2UoY29kZSwge30pO1xuICAgICAgY29uc3QgbW9kdWxlS2V5U2V0ID0gbmV3IFNldCgpO1xuICAgICAgbGV0IGhhc0kxOG5JbXBvcnQgPSBmYWxzZTtcbiAgICAgIGNvbnN0IG1hZ2ljU3RyaW5nID0gdHJhbnNmb3JtQXN0KGNvZGUsIHsgYXN0IH0sIChub2RlKSA9PiB7XG4gICAgICAgIGlmIChub2RlLnR5cGUgPT09ICdJbXBvcnREZWNsYXJhdGlvbicgJiYgbm9kZS5zb3VyY2U/LnZhbHVlID09PSAnQHZhYWRpbi9oaWxsYS1yZWFjdC1pMThuJykge1xuICAgICAgICAgIGZvciAoY29uc3Qgc3BlYyBvZiBub2RlPy5zcGVjaWZpZXJzKSB7XG4gICAgICAgICAgICBpZiAoc3BlYy5pbXBvcnRlZD8ubmFtZSA9PT0gJ2tleScpIHtcbiAgICAgICAgICAgICAga2V5VGFnQmluZGluZ3MuYWRkKHNwZWMubG9jYWw/Lm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNwZWMuaW1wb3J0ZWQ/Lm5hbWUgPT09ICd0cmFuc2xhdGUnKSB7XG4gICAgICAgICAgICAgIHRyYW5zbGF0ZUJpbmRpbmdzLmFkZChzcGVjLmxvY2FsPy5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzcGVjLnR5cGUgPT09ICdJbXBvcnRTcGVjaWZpZXInICYmIHNwZWMuaW1wb3J0ZWQ/Lm5hbWUgPT09ICdpMThuJykge1xuICAgICAgICAgICAgICBoYXNJMThuSW1wb3J0ID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIG5vZGUudHlwZSA9PT0gJ1RhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbicgJiZcbiAgICAgICAgICBub2RlLnRhZy50eXBlID09PSAnSWRlbnRpZmllcicgJiZcbiAgICAgICAgICBrZXlUYWdCaW5kaW5ncy5oYXMobm9kZS50YWcubmFtZSkgJiZcbiAgICAgICAgICBub2RlLnF1YXNpICYmXG4gICAgICAgICAgbm9kZS5xdWFzaS50eXBlID09PSAnVGVtcGxhdGVMaXRlcmFsJyAmJlxuICAgICAgICAgIG5vZGUucXVhc2kucXVhc2lzLmxlbmd0aCA9PT0gMSAmJlxuICAgICAgICAgIHR5cGVvZiBub2RlLnF1YXNpLnF1YXNpc1swXS52YWx1ZS5yYXcgPT09ICdzdHJpbmcnXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIG5vZGUucGFyZW50ICYmXG4gICAgICAgICAgICBub2RlLnBhcmVudC50eXBlID09PSAnQ2FsbEV4cHJlc3Npb24nICYmXG4gICAgICAgICAgICBub2RlLnBhcmVudC5jYWxsZWUudHlwZSA9PT0gJ0lkZW50aWZpZXInICYmXG4gICAgICAgICAgICB0cmFuc2xhdGVCaW5kaW5ncy5oYXMobm9kZS5wYXJlbnQuY2FsbGVlLm5hbWUpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyB0cmFuc2xhdGUoa2V5YHNvbWV0aGluZ2ApIGdvZXMgdG8gdGhlIG1vZHVsZSBjaHVua1xuICAgICAgICAgICAgbW9kdWxlS2V5U2V0LmFkZChub2RlLnF1YXNpLnF1YXNpc1swXS52YWx1ZS5yYXcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBrZXlgc29tZXRoaW5nYCBnb2VzIHRvIHRoZSBtYWluIGNodW5rIChhc3N1bWUgVmlld0NvbmZpZylcbiAgICAgICAgICAgIG1haW5DaHVua0tleVNldC5hZGQobm9kZS5xdWFzaS5xdWFzaXNbMF0udmFsdWUucmF3KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAobW9kdWxlS2V5U2V0LnNpemUgPT09IDApIHtcbiAgICAgICAgLy8gTm8gSGlsbGEgaTE4biBrZXlzIGRldGVjdGVkOiByZXR1cm4gdGhlIG9yaWdpbmFsIG1vZHVsZVxuICAgICAgICAvLyByZXR1cm4geyBjb2RlLCBhc3QsIG1hcDogbnVsbCB9O1xuICAgICAgICByZXR1cm4ge2NvZGUsIG1hcDogbnVsbH07XG4gICAgICB9XG5cbiAgICAgIC8vIFByZXBlbmQgdGhlIGF1dG9tYXRpYyByZWdpc3RlckNodW5rIGNhbGxcbiAgICAgIGlmICghaGFzSTE4bkltcG9ydCkge1xuICAgICAgICBtYWdpY1N0cmluZy5wcmVwZW5kKHJlZ2lzdGVyQ2h1bmtJbXBvcnQpO1xuICAgICAgfVxuICAgICAgbWFnaWNTdHJpbmcucHJlcGVuZChyZWdpc3RlckNodW5rQ2FsbCk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGNvZGU6IG1hZ2ljU3RyaW5nLnRvU3RyaW5nKCksXG4gICAgICAgIG1hcDogbWFnaWNTdHJpbmcuZ2VuZXJhdGVNYXAoe2hpcmVzOiB0cnVlfSksXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICB2YWFkaW5JMThuOiB7XG4gICAgICAgICAgICBrZXlzOiBBcnJheS5mcm9tKG1vZHVsZUtleVNldCksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSxcbiAgICByZW5kZXJTdGFydCgpIHtcbiAgICAgIGNodW5rS2V5U2V0cy5jbGVhcigpO1xuICAgIH0sXG4gICAgYXN5bmMgZ2VuZXJhdGVCdW5kbGUoX29wdGlvbnMsIGJ1bmRsZSkge1xuICAgICAgZm9yIChjb25zdCBbZmlsZU5hbWUsIGNodW5rXSBvZiBPYmplY3QuZW50cmllcyhidW5kbGUpKSB7XG4gICAgICAgIGlmIChjaHVuay50eXBlID09PSAnY2h1bmsnKSB7XG4gICAgICAgICAgY29uc3QgbWFnaWNTdHJpbmcgPSBuZXcgTWFnaWNTdHJpbmcoY2h1bmsuY29kZSk7XG4gICAgICAgICAgLy8gRXh0cmEgaW1wb3J0cyBhcmUgcmVtb3ZlZCBhdXRvbWF0aWNhbGx5IGZyb20gdGhlIGZpbmFsIGNodW5rLCBidXRcbiAgICAgICAgICAvLyB0aGVyZSBtaWdodCBiZSBzdGlsbCBtdWx0aXBsZSByZWdpc3RlckNodW5rIGNhbGxzIG9yaWdpbmF0aW5nIGZyb21cbiAgICAgICAgICAvLyB0aGUgbW9kdWxlcyB1c2luZyBIaWxsYSBpMThuLiBPbmUgc3VjaCBjYWxsIHBlciBjaHVuayBpcyBlbm91Z2hcbiAgICAgICAgICAvLyB0byBsb2FkIGFsbCB0aGUgdHJhbnNsYXRpb25zIGZvciB0aGUgY29kZSBiZWxvdyBpdCwgc28gbGV0IHVzXG4gICAgICAgICAgLy8gcmVtb3ZlIHRoZSBkdXBsaWNhdGUgY2FsbHMuXG4gICAgICAgICAgbGV0IGlkeCA9IDA7XG4gICAgICAgICAgbGV0IGZpcnN0SWR4ID0gLTE7XG4gICAgICAgICAgbGV0IHNlYXJjaElkeCA9IDA7XG4gICAgICAgICAgd2hpbGUgKChpZHggPSBtYWdpY1N0cmluZy50b1N0cmluZygpLmluZGV4T2YocmVnaXN0ZXJDaHVua0NhbGwsIHNlYXJjaElkeCkpICE9PSAtMSkge1xuICAgICAgICAgICAgaWYgKGZpcnN0SWR4ID09PSAtMSkge1xuICAgICAgICAgICAgICBmaXJzdElkeCA9IGlkeDtcbiAgICAgICAgICAgICAgc2VhcmNoSWR4ID0gaWR4ICsgcmVnaXN0ZXJDaHVua0NhbGwubGVuZ3RoO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoaXMgb2NjdXJyZW5jZVxuICAgICAgICAgICAgICBtYWdpY1N0cmluZy5yZW1vdmUoaWR4LCBpZHggKyByZWdpc3RlckNodW5rQ2FsbC5sZW5ndGgpO1xuICAgICAgICAgICAgICBzZWFyY2hJZHggPSBpZHg7IC8vIERvbid0IGFkdmFuY2UsIGFzIHN0cmluZyBqdXN0IGdvdCBzaG9ydGVyXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUmVwbGFjZSB0aGUgY2h1bmsgbmFtZSBtYXJrZXJzIHdpdGggdGhlIGFjdHVhbCBjaHVuayBuYW1lXG4gICAgICAgICAgbWFnaWNTdHJpbmcucmVwbGFjZShjaHVua05hbWVNYXJrZXIsIGZpbGVOYW1lKTtcbiAgICAgICAgICBjaHVuay5jb2RlID0gbWFnaWNTdHJpbmcudG9TdHJpbmcoKTtcbiAgICAgICAgICBjaHVuay5tYXAgPSBtYWdpY1N0cmluZy5nZW5lcmF0ZU1hcCh7IGhpcmVzOiB0cnVlIH0pO1xuXG4gICAgICAgICAgLy8gQ29sbGVjdCBpMThuIHRyYW5zbGF0aW9uIGtleXMgZnJvbSBhbGwgbW9kdWxlcyBvZiB0aGUgY2h1bmtcbiAgICAgICAgICBjb25zdCBjaHVua0tleVNldCA9IG5ldyBTZXQoKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGNodW5rLm1vZHVsZUlkcykge1xuICAgICAgICAgICAgaWYgKCFmaWx0ZXIoaWQpKSB7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMuZ2V0TW9kdWxlSW5mbyhpZCk7XG4gICAgICAgICAgICAoaW5mbz8ubWV0YT8udmFhZGluSTE4bj8ua2V5cyA/PyBbXSkuZm9yRWFjaCgoa2V5KSA9PiBjaHVua0tleVNldC5hZGQoa2V5KSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFdyaXRlIGEgY2h1bmsgbWV0YWRhdGEgSlNPTiBmaWxlIHdpdGggdGhlIGtleXNcbiAgICAgICAgICBjaHVua0tleVNldHMuc2V0KGZpbGVOYW1lLCBjaHVua0tleVNldCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFNlcmlhbGl6ZSBjaHVuayBrZXkgc2V0c1xuICAgICAgY29uc3QgY2h1bmtzID0ge307XG4gICAgICBmb3IgKGNvbnN0IFtuYW1lLCBjaHVua0tleVNldF0gb2YgY2h1bmtLZXlTZXRzLmVudHJpZXMoKSkge1xuICAgICAgICAvLyBNYWluIGNodW5rIG5hbWUgaXMgc3VwcG9zZWQgdG8gYWx3YXlzIGNvbnRhaW4gJ2luZGV4aHRtbCdcbiAgICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoJ2luZGV4aHRtbCcpKSB7XG4gICAgICAgICAgLy8gQWRkIHRoZSBtYWluIGNodW5rIGtleXMgdG8gdGhlIG1haW4gY2h1bmsga2V5IHNldFxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIG1haW5DaHVua0tleVNldCkge1xuICAgICAgICAgICAgY2h1bmtLZXlTZXQuYWRkKGtleSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG1haW5DaHVua0tleVNldC5jbGVhcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qga2V5cyA9IEFycmF5LmZyb20oY2h1bmtLZXlTZXQpO1xuXG4gICAgICAgIGlmIChrZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjaHVua3NbbmFtZV0gPSB7a2V5c307XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIFdyaXRlIGkxOG4gbWV0YWRhdGEgSlNPTiBmaWxlOlxuICAgICAgLy8ge1xuICAgICAgLy8gICBcImNodW5rc1wiOiB7XG4gICAgICAvLyAgICAgW25hbWVdOiB7XG4gICAgICAvLyAgICAgICBrZXlzOiBbLi4uXVxuICAgICAgLy8gICAgIH1cbiAgICAgIC8vICAgfVxuICAgICAgLy8gfVxuICAgICAgYXdhaXQgZnNQcm9taXNlcy5ta2RpcihtZXRhT3V0cHV0RGlyLCB7cmVjdXJzaXZlOiB0cnVlfSk7XG4gICAgICBhd2FpdCBmc1Byb21pc2VzLndyaXRlRmlsZShwYXRoLnJlc29sdmUobWV0YU91dHB1dERpciwgbWV0YU91dHB1dEZpbGVuYW1lKSwgSlNPTi5zdHJpbmdpZnkoe2NodW5rc30sIHVuZGVmaW5lZCwgMiksIHtlbmNvZGluZzogJ3V0Zi04J30pO1xuICAgIH0sXG4gIH07XG59O1xuIiwgImNvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9kaXJuYW1lID0gXCIvaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSBIT01FL2hvbWVfVmFhZGluL3RhcmdldC9wbHVnaW5zL3ZpdGUtcGx1Z2luLXNlcnZpY2Utd29ya2VyXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ZpbGVuYW1lID0gXCIvaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSBIT01FL2hvbWVfVmFhZGluL3RhcmdldC9wbHVnaW5zL3ZpdGUtcGx1Z2luLXNlcnZpY2Utd29ya2VyL2luZGV4LnRzXCI7Y29uc3QgX192aXRlX2luamVjdGVkX29yaWdpbmFsX2ltcG9ydF9tZXRhX3VybCA9IFwiZmlsZTovLy9ob21lL3dvcmtzcGFjZS9EU3F1YXJlJTIwSE9NRS9ob21lX1ZhYWRpbi90YXJnZXQvcGx1Z2lucy92aXRlLXBsdWdpbi1zZXJ2aWNlLXdvcmtlci9pbmRleC50c1wiOy8vLyA8cmVmZXJlbmNlIHR5cGVzPVwibm9kZVwiIC8+XG5pbXBvcnQgeyByZXNvbHZlLCByZWxhdGl2ZSB9IGZyb20gJ25vZGU6cGF0aCc7XG5pbXBvcnQgdHlwZSB7IFJvbGx1cE91dHB1dCB9IGZyb20gJ3JvbGx1cCc7XG5pbXBvcnQgeyBidWlsZCwgSW5saW5lQ29uZmlnLCBQbHVnaW4gfSBmcm9tICd2aXRlJztcbmltcG9ydCB7IGdldE1hbmlmZXN0LCBNYW5pZmVzdFRyYW5zZm9ybSB9IGZyb20gJ3dvcmtib3gtYnVpbGQnO1xuLy8gQHRzLWlnbm9yZVxuaW1wb3J0IGJyb3RsaSBmcm9tICdyb2xsdXAtcGx1Z2luLWJyb3RsaSc7XG5cbmNvbnN0IEFQUF9TSEVMTF9VUkwgPSAnLic7XG5cbmZ1bmN0aW9uIGluamVjdE1hbmlmZXN0VG9TV1BsdWdpbih7IG91dERpciB9OiB7IG91dERpcjogc3RyaW5nIH0pOiBQbHVnaW4ge1xuICBjb25zdCByZXdyaXRlTWFuaWZlc3RJbmRleEh0bWxVcmw6IE1hbmlmZXN0VHJhbnNmb3JtID0gKG1hbmlmZXN0KSA9PiB7XG4gICAgY29uc3QgaW5kZXhFbnRyeSA9IG1hbmlmZXN0LmZpbmQoKGVudHJ5KSA9PiBlbnRyeS51cmwgPT09ICdpbmRleC5odG1sJyk7XG4gICAgaWYgKGluZGV4RW50cnkpIHtcbiAgICAgIGluZGV4RW50cnkudXJsID0gQVBQX1NIRUxMX1VSTDtcbiAgICB9XG5cbiAgICByZXR1cm4geyBtYW5pZmVzdCwgd2FybmluZ3M6IFtdIH07XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBuYW1lOiAndmFhZGluOmluamVjdC1tYW5pZmVzdC10by1zdycsXG4gICAgYXN5bmMgdHJhbnNmb3JtKGNvZGUsIGlkKSB7XG4gICAgICBpZiAoL3N3XFwuKHRzfGpzKSQvLnRlc3QoaWQpKSB7XG4gICAgICAgIGNvbnN0IHsgbWFuaWZlc3RFbnRyaWVzIH0gPSBhd2FpdCBnZXRNYW5pZmVzdCh7XG4gICAgICAgICAgZ2xvYkRpcmVjdG9yeTogb3V0RGlyLFxuICAgICAgICAgIGdsb2JQYXR0ZXJuczogWycqKi8qJ10sXG4gICAgICAgICAgZ2xvYklnbm9yZXM6IFsnKiovKi5icicsICdwd2EtaWNvbnMvKionXSxcbiAgICAgICAgICBtYW5pZmVzdFRyYW5zZm9ybXM6IFtyZXdyaXRlTWFuaWZlc3RJbmRleEh0bWxVcmxdLFxuICAgICAgICAgIG1heGltdW1GaWxlU2l6ZVRvQ2FjaGVJbkJ5dGVzOiAxMDAgKiAxMDI0ICogMTAyNCAvLyAxMDBtYixcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNvZGUucmVwbGFjZSgnc2VsZi5fX1dCX01BTklGRVNUJywgSlNPTi5zdHJpbmdpZnkobWFuaWZlc3RFbnRyaWVzKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogSW50ZXJuYWwgVml0ZSBwbHVnaW4gdGhhdCBidWlsZHMgdGhlIHNlcnZpY2Ugd29ya2VyLiBOb3QgaW50ZW5kZWQgZm9yIHB1YmxpYyB1c2UuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc2VydmljZVdvcmtlclBsdWdpbih7IHNyY1BhdGggfTogeyBzcmNQYXRoOiBzdHJpbmcgfSk6IFBsdWdpbiB7XG4gIGxldCBidWlsZENvbmZpZzogSW5saW5lQ29uZmlnO1xuICBsZXQgYnVpbGRPdXRwdXQ6IFJvbGx1cE91dHB1dDtcbiAgbGV0IHN3U291cmNlUGF0aCA9IHJlc29sdmUoc3JjUGF0aCk7XG5cbiAgcmV0dXJuIHtcbiAgICBuYW1lOiAndmFhZGluOmJ1aWxkLXN3JyxcbiAgICBlbmZvcmNlOiAncG9zdCcsXG4gICAgYXN5bmMgY29uZmlnUmVzb2x2ZWQodml0ZUNvbmZpZykge1xuICAgICAgYnVpbGRDb25maWcgPSB7XG4gICAgICAgIGJhc2U6IHZpdGVDb25maWcuYmFzZSxcbiAgICAgICAgcm9vdDogdml0ZUNvbmZpZy5yb290LFxuICAgICAgICBtb2RlOiB2aXRlQ29uZmlnLm1vZGUsXG4gICAgICAgIHJlc29sdmU6IHZpdGVDb25maWcucmVzb2x2ZSxcbiAgICAgICAgZGVmaW5lOiB7XG4gICAgICAgICAgLi4udml0ZUNvbmZpZy5kZWZpbmUsXG4gICAgICAgICAgJ3Byb2Nlc3MuZW52Lk5PREVfRU5WJzogSlNPTi5zdHJpbmdpZnkodml0ZUNvbmZpZy5tb2RlKSxcbiAgICAgICAgICAnZ2xvYmFsVGhpcy5kb2N1bWVudCc6IHVuZGVmaW5lZCxcbiAgICAgICAgfSxcbiAgICAgICAgYnVpbGQ6IHtcbiAgICAgICAgICB3cml0ZTogdml0ZUNvbmZpZy5tb2RlICE9PSAnZGV2ZWxvcG1lbnQnLFxuICAgICAgICAgIG1pbmlmeTogdml0ZUNvbmZpZy5idWlsZC5taW5pZnksXG4gICAgICAgICAgb3V0RGlyOiB2aXRlQ29uZmlnLmJ1aWxkLm91dERpcixcbiAgICAgICAgICB0YXJnZXQ6IHZpdGVDb25maWcuYnVpbGQudGFyZ2V0LFxuICAgICAgICAgIHNvdXJjZW1hcDogdml0ZUNvbmZpZy5jb21tYW5kID09PSAnc2VydmUnIHx8IHZpdGVDb25maWcuYnVpbGQuc291cmNlbWFwLFxuICAgICAgICAgIGVtcHR5T3V0RGlyOiBmYWxzZSxcbiAgICAgICAgICBtb2R1bGVQcmVsb2FkOiBmYWxzZSxcbiAgICAgICAgICByb2xsdXBPcHRpb25zOiB7XG4gICAgICAgICAgICBpbnB1dDoge1xuICAgICAgICAgICAgICBzdzogc3dTb3VyY2VQYXRoLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG91dHB1dDoge1xuICAgICAgICAgICAgICBmb3JtYXQ6ICdpaWZlJyxcbiAgICAgICAgICAgICAgZXhwb3J0czogJ25vbmUnLFxuICAgICAgICAgICAgICBlbnRyeUZpbGVOYW1lczogJ3N3LmpzJyxcbiAgICAgICAgICAgICAgaW5saW5lRHluYW1pY0ltcG9ydHM6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0sXG4gICAgYXN5bmMgYnVpbGRTdGFydCgpIHtcbiAgICAgIGlmIChidWlsZENvbmZpZy5tb2RlID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGJ1aWxkT3V0cHV0ID0gYXdhaXQgYnVpbGQoYnVpbGRDb25maWcpIGFzIFJvbGx1cE91dHB1dDtcbiAgICAgIH1cbiAgICB9LFxuICAgIHJlc29sdmVJZChpZCkge1xuICAgICAgaWYgKGlkID09PSAnL3N3LmpzJykge1xuICAgICAgICByZXR1cm4gc3dTb3VyY2VQYXRoO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfSxcbiAgICBhc3luYyBsb2FkKGlkKSB7XG4gICAgICBpZiAocmVsYXRpdmUoaWQsIHN3U291cmNlUGF0aCkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBidWlsZE91dHB1dC5vdXRwdXRbMF0uY29kZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuO1xuICAgIH0sXG4gICAgYXN5bmMgY2xvc2VCdW5kbGUoKSB7XG4gICAgICBpZiAoYnVpbGRDb25maWcubW9kZSAhPT0gJ2RldmVsb3BtZW50Jykge1xuICAgICAgICBhd2FpdCBidWlsZCh7XG4gICAgICAgICAgLi4uYnVpbGRDb25maWcsXG4gICAgICAgICAgcGx1Z2luczogW2luamVjdE1hbmlmZXN0VG9TV1BsdWdpbih7IG91dERpcjogYnVpbGRDb25maWcuYnVpbGQhLm91dERpciEgfSksIGJyb3RsaSgpXVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFzeW5jIGhvdFVwZGF0ZSh7IGZpbGUgfSkge1xuICAgICAgaWYgKHRoaXMuZW52aXJvbm1lbnQubmFtZSAhPT0gJ2NsaWVudCcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBuZWVkc1N3UmVidWlsZCA9ICFidWlsZE91dHB1dCB8fCBidWlsZE91dHB1dC5vdXRwdXRbMF0ubW9kdWxlSWRzLmluY2x1ZGVzKGZpbGUpO1xuICAgICAgaWYgKCFuZWVkc1N3UmVidWlsZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGJ1aWxkT3V0cHV0ID0gYXdhaXQgYnVpbGQoYnVpbGRDb25maWcpIGFzIFJvbGx1cE91dHB1dDtcbiAgICAgICAgY29uc3QgbWcgPSB0aGlzLmVudmlyb25tZW50Lm1vZHVsZUdyYXBoO1xuICAgICAgICBpZiAoIW1nKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgbW9kdWxlIG9mIG1nLmdldE1vZHVsZXNCeUZpbGUoc3dTb3VyY2VQYXRoKSA/PyBbXSkge1xuICAgICAgICAgIG1nLmludmFsaWRhdGVNb2R1bGUobW9kdWxlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVudmlyb25tZW50LmhvdC5zZW5kKHsgdHlwZTogJ2N1c3RvbScsIGV2ZW50OiAnc3ctanMtdXBkYXRlJyB9KTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgdGhpcy5lbnZpcm9ubWVudC5sb2dnZXIuZXJyb3IoZXJyb3IubWVzc2FnZSwgeyBlcnJvciB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbiIsICJjb25zdCBfX3ZpdGVfaW5qZWN0ZWRfb3JpZ2luYWxfZGlybmFtZSA9IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpblwiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9maWxlbmFtZSA9IFwiL2hvbWUvd29ya3NwYWNlL0RTcXVhcmUgSE9NRS9ob21lX1ZhYWRpbi92aXRlLmNvbmZpZy50c1wiO2NvbnN0IF9fdml0ZV9pbmplY3RlZF9vcmlnaW5hbF9pbXBvcnRfbWV0YV91cmwgPSBcImZpbGU6Ly8vaG9tZS93b3Jrc3BhY2UvRFNxdWFyZSUyMEhPTUUvaG9tZV9WYWFkaW4vdml0ZS5jb25maWcudHNcIjtpbXBvcnQgeyBVc2VyQ29uZmlnRm4gfSBmcm9tICd2aXRlJztcclxuaW1wb3J0IHsgb3ZlcnJpZGVWYWFkaW5Db25maWcgfSBmcm9tICcuL3ZpdGUuZ2VuZXJhdGVkJztcclxuXHJcbmNvbnN0IGN1c3RvbUNvbmZpZzogVXNlckNvbmZpZ0ZuID0gKGVudikgPT4gKHtcclxuICAvLyBIZXJlIHlvdSBjYW4gYWRkIGN1c3RvbSBWaXRlIHBhcmFtZXRlcnNcclxuICAvLyBodHRwczovL3ZpdGVqcy5kZXYvY29uZmlnL1xyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IG92ZXJyaWRlVmFhZGluQ29uZmlnKGN1c3RvbUNvbmZpZyk7XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7QUFNQSxPQUFPQSxXQUFVO0FBQ2pCLFNBQVMsY0FBQUMsYUFBWSxhQUFBQyxZQUFXLGVBQUFDLGNBQWEsZ0JBQUFDLGVBQWMsaUJBQUFDLHNCQUE0QjtBQUN2RixTQUFTLGtCQUFrQjtBQUMzQixZQUFZLFNBQVM7OztBQ1dyQixTQUFTLGNBQUFDLGFBQVksZ0JBQUFDLHFCQUFvQjtBQUN6QyxTQUFTLFdBQUFDLGdCQUFlOzs7QUNEeEIsU0FBUyxZQUFBQyxpQkFBZ0I7QUFDekIsU0FBUyxXQUFBQyxVQUFTLFlBQUFDLGlCQUFnQjtBQUNsQyxTQUFTLGNBQUFDLGFBQVksY0FBYyxxQkFBcUI7OztBQ0Z4RCxTQUFTLGFBQWEsVUFBVSxXQUFXLFlBQVksb0JBQW9CO0FBQzNFLFNBQVMsU0FBUyxVQUFVLFVBQVUsZUFBZTtBQUNyRCxTQUFTLGdCQUFnQjtBQUV6QixJQUFNLHdCQUF3QixDQUFDLFFBQVEsT0FBTyxPQUFPO0FBV3JELFNBQVMsbUJBQW1CQyxjQUFhLGlDQUFpQyxRQUFRO0FB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USxjQUFjO0FBQzFFLFNBQU8sS0FBSyxNQUFNRSxjQUFhLGFBQWEsRUFBRSxVQUFVLFFBQVEsQ0FBQyxDQUFDLEVBQUU7QUFDdEU7OztBVTN5QkEsSUFBTSxlQUE2QixDQUFDLFNBQVM7QUFBQTtBQUFBO0FBRzdDO0FBRUEsSUFBTyxzQkFBUSxxQkFBcUIsWUFBWTsiLAogICJuYW1lcyI6IFsicGF0aCIsICJleGlzdHNTeW5jIiwgIm1rZGlyU3luYyIsICJyZWFkZGlyU3luYyIsICJyZWFkRmlsZVN5bmMiLCAid3JpdGVGaWxlU3luYyIsICJleGlzdHNTeW5jIiwgInJlYWRGaWxlU3luYyIsICJyZXNvbHZlIiwgImdsb2JTeW5jIiwgInJlc29sdmUiLCAiYmFzZW5hbWUiLCAiZXhpc3RzU3luYyIsICJ0aGVtZUZvbGRlciIsICJ0aGVtZUZvbGRlciIsICJyZXNvbHZlIiwgImdsb2JTeW5jIiwgImV4aXN0c1N5bmMiLCAiYmFzZW5hbWUiLCAidmFyaWFibGUiLCAiZmlsZW5hbWUiLCAiZXhpc3RzU3luYyIsICJyZXNvbHZlIiwgInRoZW1lRm9sZGVyIiwgInJlYWRGaWxlU3luYyIsICJleGlzdHNTeW5jIiwgInJlYWRGaWxlU3luYyIsICJyZXNvbHZlIiwgImJhc2VuYW1lIiwgImdsb2JTeW5jIiwgInRoZW1lRm9sZGVyIiwgImdldFRoZW1lUHJvcGVydGllcyIsICJnbG9iU3luYyIsICJyZXNvbHZlIiwgImV4aXN0c1N5bmMiLCAicmVhZEZpbGVTeW5jIiwgImJhc2VuYW1lIiwgInBhdGgiLCAiYnJvdGxpIiwgImNyZWF0ZUZpbHRlciIsICJ0cmFuc2Zvcm1Bc3QiLCAicHJvY2VzcyIsICJwcm9jZXNzIiwgImNyZWF0ZUZpbHRlciIsICJ0cmFuc2Zvcm1Bc3QiLCAicmVzb2x2ZSIsICJyZWxhdGl2ZSIsICJyZXNvbHZlIiwgInJlbGF0aXZlIiwgInJlcXVpcmUiLCAicGF0aCIsICJleGlzdHNTeW5jIiwgInJlYWRGaWxlU3luYyIsICJta2RpclN5bmMiLCAiYnVuZGxlIiwgInJlYWRkaXJTeW5jIiwgInRoZW1lRm9sZGVyIiwgIndyaXRlRmlsZVN5bmMiLCAiZSIsICJicm90bGkiLCAiY3VzdG9tQ29uZmlnIl0KfQo=
